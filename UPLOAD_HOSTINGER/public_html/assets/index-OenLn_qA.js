var p0=Object.defineProperty;var x0=(t,e,s)=>e in t?p0(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s;var Xe=(t,e,s)=>x0(t,typeof e!="symbol"?e+"":e,s);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function s(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(a){if(a.ep)return;a.ep=!0;const i=s(a);fetch(a.href,i)}})();if(window.location.pathname!=="/"&&!window.location.pathname.endsWith(".html")){const t=window.location.pathname+window.location.search;window.history.replaceState({},"","/"),window.history.pushState({},"",t)}var rt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function g0(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function v0(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var s=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};s.prototype=e.prototype}else s={};return Object.defineProperty(s,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var a=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(s,n,a.get?a:{enumerable:!0,get:function(){return t[n]}})}),s}var Xu={exports:{}},ui={},Zu={exports:{}},G={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Mn=Symbol.for("react.element"),y0=Symbol.for("react.portal"),w0=Symbol.for("react.fragment"),b0=Symbol.for("react.strict_mode"),j0=Symbol.for("react.profiler"),N0=Symbol.for("react.provider"),k0=Symbol.for("react.context"),_0=Symbol.for("react.forward_ref"),S0=Symbol.for("react.suspense"),C0=Symbol.for("react.memo"),E0=Symbol.for("react.lazy"),ad=Symbol.iterator;function T0(t){return t===null||typeof t!="object"?null:(t=ad&&t[ad]||t["@@iterator"],typeof t=="function"?t:null)}var eh={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},th=Object.assign,sh={};function Tr(t,e,s){this.props=t,this.context=e,this.refs=sh,this.updater=s||eh}Tr.prototype.isReactComponent={};Tr.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Tr.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function rh(){}rh.prototype=Tr.prototype;function Vo(t,e,s){this.props=t,this.context=e,this.refs=sh,this.updater=s||eh}var Ho=Vo.prototype=new rh;Ho.constructor=Vo;th(Ho,Tr.prototype);Ho.isPureReactComponent=!0;var id=Array.isArray,nh=Object.prototype.hasOwnProperty,Ko={current:null},ah={key:!0,ref:!0,__self:!0,__source:!0};function ih(t,e,s){var n,a={},i=null,l=null;if(e!=null)for(n in e.ref!==void 0&&(l=e.ref),e.key!==void 0&&(i=""+e.key),e)nh.call(e,n)&&!ah.hasOwnProperty(n)&&(a[n]=e[n]);var o=arguments.length-2;if(o===1)a.children=s;else if(1<o){for(var c=Array(o),d=0;d<o;d++)c[d]=arguments[d+2];a.children=c}if(t&&t.defaultProps)for(n in o=t.defaultProps,o)a[n]===void 0&&(a[n]=o[n]);return{$$typeof:Mn,type:t,key:i,ref:l,props:a,_owner:Ko.current}}function I0(t,e){return{$$typeof:Mn,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Qo(t){return typeof t=="object"&&t!==null&&t.$$typeof===Mn}function P0(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(s){return e[s]})}var ld=/\/+/g;function zi(t,e){return typeof t=="object"&&t!==null&&t.key!=null?P0(""+t.key):e.toString(36)}function ya(t,e,s,n,a){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var l=!1;if(t===null)l=!0;else switch(i){case"string":case"number":l=!0;break;case"object":switch(t.$$typeof){case Mn:case y0:l=!0}}if(l)return l=t,a=a(l),t=n===""?"."+zi(l,0):n,id(a)?(s="",t!=null&&(s=t.replace(ld,"$&/")+"/"),ya(a,e,s,"",function(d){return d})):a!=null&&(Qo(a)&&(a=I0(a,s+(!a.key||l&&l.key===a.key?"":(""+a.key).replace(ld,"$&/")+"/")+t)),e.push(a)),1;if(l=0,n=n===""?".":n+":",id(t))for(var o=0;o<t.length;o++){i=t[o];var c=n+zi(i,o);l+=ya(i,e,s,c,a)}else if(c=T0(t),typeof c=="function")for(t=c.call(t),o=0;!(i=t.next()).done;)i=i.value,c=n+zi(i,o++),l+=ya(i,e,s,c,a);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return l}function Jn(t,e,s){if(t==null)return t;var n=[],a=0;return ya(t,n,"","",function(i){return e.call(s,i,a++)}),n}function A0(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(s){(t._status===0||t._status===-1)&&(t._status=1,t._result=s)},function(s){(t._status===0||t._status===-1)&&(t._status=2,t._result=s)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Me={current:null},wa={transition:null},L0={ReactCurrentDispatcher:Me,ReactCurrentBatchConfig:wa,ReactCurrentOwner:Ko};function lh(){throw Error("act(...) is not supported in production builds of React.")}G.Children={map:Jn,forEach:function(t,e,s){Jn(t,function(){e.apply(this,arguments)},s)},count:function(t){var e=0;return Jn(t,function(){e++}),e},toArray:function(t){return Jn(t,function(e){return e})||[]},only:function(t){if(!Qo(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};G.Component=Tr;G.Fragment=w0;G.Profiler=j0;G.PureComponent=Vo;G.StrictMode=b0;G.Suspense=S0;G.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=L0;G.act=lh;G.cloneElement=function(t,e,s){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var n=th({},t.props),a=t.key,i=t.ref,l=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,l=Ko.current),e.key!==void 0&&(a=""+e.key),t.type&&t.type.defaultProps)var o=t.type.defaultProps;for(c in e)nh.call(e,c)&&!ah.hasOwnProperty(c)&&(n[c]=e[c]===void 0&&o!==void 0?o[c]:e[c])}var c=arguments.length-2;if(c===1)n.children=s;else if(1<c){o=Array(c);for(var d=0;d<c;d++)o[d]=arguments[d+2];n.children=o}return{$$typeof:Mn,type:t.type,key:a,ref:i,props:n,_owner:l}};G.createContext=function(t){return t={$$typeof:k0,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:N0,_context:t},t.Consumer=t};G.createElement=ih;G.createFactory=function(t){var e=ih.bind(null,t);return e.type=t,e};G.createRef=function(){return{current:null}};G.forwardRef=function(t){return{$$typeof:_0,render:t}};G.isValidElement=Qo;G.lazy=function(t){return{$$typeof:E0,_payload:{_status:-1,_result:t},_init:A0}};G.memo=function(t,e){return{$$typeof:C0,type:t,compare:e===void 0?null:e}};G.startTransition=function(t){var e=wa.transition;wa.transition={};try{t()}finally{wa.transition=e}};G.unstable_act=lh;G.useCallback=function(t,e){return Me.current.useCallback(t,e)};G.useContext=function(t){return Me.current.useContext(t)};G.useDebugValue=function(){};G.useDeferredValue=function(t){return Me.current.useDeferredValue(t)};G.useEffect=function(t,e){return Me.current.useEffect(t,e)};G.useId=function(){return Me.current.useId()};G.useImperativeHandle=function(t,e,s){return Me.current.useImperativeHandle(t,e,s)};G.useInsertionEffect=function(t,e){return Me.current.useInsertionEffect(t,e)};G.useLayoutEffect=function(t,e){return Me.current.useLayoutEffect(t,e)};G.useMemo=function(t,e){return Me.current.useMemo(t,e)};G.useReducer=function(t,e,s){return Me.current.useReducer(t,e,s)};G.useRef=function(t){return Me.current.useRef(t)};G.useState=function(t){return Me.current.useState(t)};G.useSyncExternalStore=function(t,e,s){return Me.current.useSyncExternalStore(t,e,s)};G.useTransition=function(){return Me.current.useTransition()};G.version="18.3.1";Zu.exports=G;var v=Zu.exports;const fn=g0(v);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var D0=v,R0=Symbol.for("react.element"),O0=Symbol.for("react.fragment"),M0=Object.prototype.hasOwnProperty,$0=D0.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,z0={key:!0,ref:!0,__self:!0,__source:!0};function oh(t,e,s){var n,a={},i=null,l=null;s!==void 0&&(i=""+s),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(l=e.ref);for(n in e)M0.call(e,n)&&!z0.hasOwnProperty(n)&&(a[n]=e[n]);if(t&&t.defaultProps)for(n in e=t.defaultProps,e)a[n]===void 0&&(a[n]=e[n]);return{$$typeof:R0,type:t,key:i,ref:l,props:a,_owner:$0.current}}ui.Fragment=O0;ui.jsx=oh;ui.jsxs=oh;Xu.exports=ui;var r=Xu.exports,ch={exports:{}},Ge={},dh={exports:{}},uh={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(I,D){var F=I.length;I.push(D);e:for(;0<F;){var ee=F-1>>>1,se=I[ee];if(0<a(se,D))I[ee]=D,I[F]=se,F=ee;else break e}}function s(I){return I.length===0?null:I[0]}function n(I){if(I.length===0)return null;var D=I[0],F=I.pop();if(F!==D){I[0]=F;e:for(var ee=0,se=I.length,Ye=se>>>1;ee<Ye;){var it=2*(ee+1)-1,Qt=I[it],lt=it+1,Mr=I[lt];if(0>a(Qt,F))lt<se&&0>a(Mr,Qt)?(I[ee]=Mr,I[lt]=F,ee=lt):(I[ee]=Qt,I[it]=F,ee=it);else if(lt<se&&0>a(Mr,F))I[ee]=Mr,I[lt]=F,ee=lt;else break e}}return D}function a(I,D){var F=I.sortIndex-D.sortIndex;return F!==0?F:I.id-D.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var l=Date,o=l.now();t.unstable_now=function(){return l.now()-o}}var c=[],d=[],u=1,m=null,h=3,y=!1,g=!1,b=!1,x=typeof setTimeout=="function"?setTimeout:null,p=typeof clearTimeout=="function"?clearTimeout:null,f=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(I){for(var D=s(d);D!==null;){if(D.callback===null)n(d);else if(D.startTime<=I)n(d),D.sortIndex=D.expirationTime,e(c,D);else break;D=s(d)}}function j(I){if(b=!1,w(I),!g)if(s(c)!==null)g=!0,P(_);else{var D=s(d);D!==null&&V(j,D.startTime-I)}}function _(I,D){g=!1,b&&(b=!1,p(S),S=-1),y=!0;var F=h;try{for(w(D),m=s(c);m!==null&&(!(m.expirationTime>D)||I&&!E());){var ee=m.callback;if(typeof ee=="function"){m.callback=null,h=m.priorityLevel;var se=ee(m.expirationTime<=D);D=t.unstable_now(),typeof se=="function"?m.callback=se:m===s(c)&&n(c),w(D)}else n(c);m=s(c)}if(m!==null)var Ye=!0;else{var it=s(d);it!==null&&V(j,it.startTime-D),Ye=!1}return Ye}finally{m=null,h=F,y=!1}}var N=!1,k=null,S=-1,O=5,L=-1;function E(){return!(t.unstable_now()-L<O)}function W(){if(k!==null){var I=t.unstable_now();L=I;var D=!0;try{D=k(!0,I)}finally{D?C():(N=!1,k=null)}}else N=!1}var C;if(typeof f=="function")C=function(){f(W)};else if(typeof MessageChannel<"u"){var B=new MessageChannel,T=B.port2;B.port1.onmessage=W,C=function(){T.postMessage(null)}}else C=function(){x(W,0)};function P(I){k=I,N||(N=!0,C())}function V(I,D){S=x(function(){I(t.unstable_now())},D)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(I){I.callback=null},t.unstable_continueExecution=function(){g||y||(g=!0,P(_))},t.unstable_forceFrameRate=function(I){0>I||125<I?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):O=0<I?Math.floor(1e3/I):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return s(c)},t.unstable_next=function(I){switch(h){case 1:case 2:case 3:var D=3;break;default:D=h}var F=h;h=D;try{return I()}finally{h=F}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(I,D){switch(I){case 1:case 2:case 3:case 4:case 5:break;default:I=3}var F=h;h=I;try{return D()}finally{h=F}},t.unstable_scheduleCallback=function(I,D,F){var ee=t.unstable_now();switch(typeof F=="object"&&F!==null?(F=F.delay,F=typeof F=="number"&&0<F?ee+F:ee):F=ee,I){case 1:var se=-1;break;case 2:se=250;break;case 5:se=1073741823;break;case 4:se=1e4;break;default:se=5e3}return se=F+se,I={id:u++,callback:D,priorityLevel:I,startTime:F,expirationTime:se,sortIndex:-1},F>ee?(I.sortIndex=F,e(d,I),s(c)===null&&I===s(d)&&(b?(p(S),S=-1):b=!0,V(j,F-ee))):(I.sortIndex=se,e(c,I),g||y||(g=!0,P(_))),I},t.unstable_shouldYield=E,t.unstable_wrapCallback=function(I){var D=h;return function(){var F=h;h=D;try{return I.apply(this,arguments)}finally{h=F}}}})(uh);dh.exports=uh;var F0=dh.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var U0=v,Qe=F0;function A(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,s=1;s<arguments.length;s++)e+="&args[]="+encodeURIComponent(arguments[s]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var hh=new Set,pn={};function qs(t,e){wr(t,e),wr(t+"Capture",e)}function wr(t,e){for(pn[t]=e,t=0;t<e.length;t++)hh.add(e[t])}var Ut=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Al=Object.prototype.hasOwnProperty,q0=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,od={},cd={};function B0(t){return Al.call(cd,t)?!0:Al.call(od,t)?!1:q0.test(t)?cd[t]=!0:(od[t]=!0,!1)}function W0(t,e,s,n){if(s!==null&&s.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return n?!1:s!==null?!s.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function V0(t,e,s,n){if(e===null||typeof e>"u"||W0(t,e,s,n))return!0;if(n)return!1;if(s!==null)switch(s.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function $e(t,e,s,n,a,i,l){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=n,this.attributeNamespace=a,this.mustUseProperty=s,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=l}var Ee={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Ee[t]=new $e(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Ee[e]=new $e(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Ee[t]=new $e(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Ee[t]=new $e(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Ee[t]=new $e(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Ee[t]=new $e(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Ee[t]=new $e(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Ee[t]=new $e(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Ee[t]=new $e(t,5,!1,t.toLowerCase(),null,!1,!1)});var Go=/[\-:]([a-z])/g;function Jo(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Go,Jo);Ee[e]=new $e(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Go,Jo);Ee[e]=new $e(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Go,Jo);Ee[e]=new $e(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Ee[t]=new $e(t,1,!1,t.toLowerCase(),null,!1,!1)});Ee.xlinkHref=new $e("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Ee[t]=new $e(t,1,!1,t.toLowerCase(),null,!0,!0)});function Yo(t,e,s,n){var a=Ee.hasOwnProperty(e)?Ee[e]:null;(a!==null?a.type!==0:n||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(V0(e,s,a,n)&&(s=null),n||a===null?B0(e)&&(s===null?t.removeAttribute(e):t.setAttribute(e,""+s)):a.mustUseProperty?t[a.propertyName]=s===null?a.type===3?!1:"":s:(e=a.attributeName,n=a.attributeNamespace,s===null?t.removeAttribute(e):(a=a.type,s=a===3||a===4&&s===!0?"":""+s,n?t.setAttributeNS(n,e,s):t.setAttribute(e,s))))}var Kt=U0.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Yn=Symbol.for("react.element"),er=Symbol.for("react.portal"),tr=Symbol.for("react.fragment"),Xo=Symbol.for("react.strict_mode"),Ll=Symbol.for("react.profiler"),mh=Symbol.for("react.provider"),fh=Symbol.for("react.context"),Zo=Symbol.for("react.forward_ref"),Dl=Symbol.for("react.suspense"),Rl=Symbol.for("react.suspense_list"),ec=Symbol.for("react.memo"),Xt=Symbol.for("react.lazy"),ph=Symbol.for("react.offscreen"),dd=Symbol.iterator;function zr(t){return t===null||typeof t!="object"?null:(t=dd&&t[dd]||t["@@iterator"],typeof t=="function"?t:null)}var me=Object.assign,Fi;function Gr(t){if(Fi===void 0)try{throw Error()}catch(s){var e=s.stack.trim().match(/\n( *(at )?)/);Fi=e&&e[1]||""}return`
`+Fi+t}var Ui=!1;function qi(t,e){if(!t||Ui)return"";Ui=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var n=d}Reflect.construct(t,[],e)}else{try{e.call()}catch(d){n=d}t.call(e.prototype)}else{try{throw Error()}catch(d){n=d}t()}}catch(d){if(d&&n&&typeof d.stack=="string"){for(var a=d.stack.split(`
`),i=n.stack.split(`
`),l=a.length-1,o=i.length-1;1<=l&&0<=o&&a[l]!==i[o];)o--;for(;1<=l&&0<=o;l--,o--)if(a[l]!==i[o]){if(l!==1||o!==1)do if(l--,o--,0>o||a[l]!==i[o]){var c=`
`+a[l].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=l&&0<=o);break}}}finally{Ui=!1,Error.prepareStackTrace=s}return(t=t?t.displayName||t.name:"")?Gr(t):""}function H0(t){switch(t.tag){case 5:return Gr(t.type);case 16:return Gr("Lazy");case 13:return Gr("Suspense");case 19:return Gr("SuspenseList");case 0:case 2:case 15:return t=qi(t.type,!1),t;case 11:return t=qi(t.type.render,!1),t;case 1:return t=qi(t.type,!0),t;default:return""}}function Ol(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case tr:return"Fragment";case er:return"Portal";case Ll:return"Profiler";case Xo:return"StrictMode";case Dl:return"Suspense";case Rl:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case fh:return(t.displayName||"Context")+".Consumer";case mh:return(t._context.displayName||"Context")+".Provider";case Zo:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case ec:return e=t.displayName||null,e!==null?e:Ol(t.type)||"Memo";case Xt:e=t._payload,t=t._init;try{return Ol(t(e))}catch{}}return null}function K0(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ol(e);case 8:return e===Xo?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function fs(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function xh(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Q0(t){var e=xh(t)?"checked":"value",s=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),n=""+t[e];if(!t.hasOwnProperty(e)&&typeof s<"u"&&typeof s.get=="function"&&typeof s.set=="function"){var a=s.get,i=s.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return a.call(this)},set:function(l){n=""+l,i.call(this,l)}}),Object.defineProperty(t,e,{enumerable:s.enumerable}),{getValue:function(){return n},setValue:function(l){n=""+l},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Xn(t){t._valueTracker||(t._valueTracker=Q0(t))}function gh(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var s=e.getValue(),n="";return t&&(n=xh(t)?t.checked?"true":"false":t.value),t=n,t!==s?(e.setValue(t),!0):!1}function Ra(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Ml(t,e){var s=e.checked;return me({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:s??t._wrapperState.initialChecked})}function ud(t,e){var s=e.defaultValue==null?"":e.defaultValue,n=e.checked!=null?e.checked:e.defaultChecked;s=fs(e.value!=null?e.value:s),t._wrapperState={initialChecked:n,initialValue:s,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function vh(t,e){e=e.checked,e!=null&&Yo(t,"checked",e,!1)}function $l(t,e){vh(t,e);var s=fs(e.value),n=e.type;if(s!=null)n==="number"?(s===0&&t.value===""||t.value!=s)&&(t.value=""+s):t.value!==""+s&&(t.value=""+s);else if(n==="submit"||n==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?zl(t,e.type,s):e.hasOwnProperty("defaultValue")&&zl(t,e.type,fs(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function hd(t,e,s){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!(n!=="submit"&&n!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,s||e===t.value||(t.value=e),t.defaultValue=e}s=t.name,s!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,s!==""&&(t.name=s)}function zl(t,e,s){(e!=="number"||Ra(t.ownerDocument)!==t)&&(s==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+s&&(t.defaultValue=""+s))}var Jr=Array.isArray;function fr(t,e,s,n){if(t=t.options,e){e={};for(var a=0;a<s.length;a++)e["$"+s[a]]=!0;for(s=0;s<t.length;s++)a=e.hasOwnProperty("$"+t[s].value),t[s].selected!==a&&(t[s].selected=a),a&&n&&(t[s].defaultSelected=!0)}else{for(s=""+fs(s),e=null,a=0;a<t.length;a++){if(t[a].value===s){t[a].selected=!0,n&&(t[a].defaultSelected=!0);return}e!==null||t[a].disabled||(e=t[a])}e!==null&&(e.selected=!0)}}function Fl(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(A(91));return me({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function md(t,e){var s=e.value;if(s==null){if(s=e.children,e=e.defaultValue,s!=null){if(e!=null)throw Error(A(92));if(Jr(s)){if(1<s.length)throw Error(A(93));s=s[0]}e=s}e==null&&(e=""),s=e}t._wrapperState={initialValue:fs(s)}}function yh(t,e){var s=fs(e.value),n=fs(e.defaultValue);s!=null&&(s=""+s,s!==t.value&&(t.value=s),e.defaultValue==null&&t.defaultValue!==s&&(t.defaultValue=s)),n!=null&&(t.defaultValue=""+n)}function fd(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function wh(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ul(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?wh(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Zn,bh=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,s,n,a){MSApp.execUnsafeLocalFunction(function(){return t(e,s,n,a)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Zn=Zn||document.createElement("div"),Zn.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Zn.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function xn(t,e){if(e){var s=t.firstChild;if(s&&s===t.lastChild&&s.nodeType===3){s.nodeValue=e;return}}t.textContent=e}var en={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},G0=["Webkit","ms","Moz","O"];Object.keys(en).forEach(function(t){G0.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),en[e]=en[t]})});function jh(t,e,s){return e==null||typeof e=="boolean"||e===""?"":s||typeof e!="number"||e===0||en.hasOwnProperty(t)&&en[t]?(""+e).trim():e+"px"}function Nh(t,e){t=t.style;for(var s in e)if(e.hasOwnProperty(s)){var n=s.indexOf("--")===0,a=jh(s,e[s],n);s==="float"&&(s="cssFloat"),n?t.setProperty(s,a):t[s]=a}}var J0=me({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ql(t,e){if(e){if(J0[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(A(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(A(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(A(61))}if(e.style!=null&&typeof e.style!="object")throw Error(A(62))}}function Bl(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Wl=null;function tc(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Vl=null,pr=null,xr=null;function pd(t){if(t=Fn(t)){if(typeof Vl!="function")throw Error(A(280));var e=t.stateNode;e&&(e=xi(e),Vl(t.stateNode,t.type,e))}}function kh(t){pr?xr?xr.push(t):xr=[t]:pr=t}function _h(){if(pr){var t=pr,e=xr;if(xr=pr=null,pd(t),e)for(t=0;t<e.length;t++)pd(e[t])}}function Sh(t,e){return t(e)}function Ch(){}var Bi=!1;function Eh(t,e,s){if(Bi)return t(e,s);Bi=!0;try{return Sh(t,e,s)}finally{Bi=!1,(pr!==null||xr!==null)&&(Ch(),_h())}}function gn(t,e){var s=t.stateNode;if(s===null)return null;var n=xi(s);if(n===null)return null;s=n[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(t=t.type,n=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!n;break e;default:t=!1}if(t)return null;if(s&&typeof s!="function")throw Error(A(231,e,typeof s));return s}var Hl=!1;if(Ut)try{var Fr={};Object.defineProperty(Fr,"passive",{get:function(){Hl=!0}}),window.addEventListener("test",Fr,Fr),window.removeEventListener("test",Fr,Fr)}catch{Hl=!1}function Y0(t,e,s,n,a,i,l,o,c){var d=Array.prototype.slice.call(arguments,3);try{e.apply(s,d)}catch(u){this.onError(u)}}var tn=!1,Oa=null,Ma=!1,Kl=null,X0={onError:function(t){tn=!0,Oa=t}};function Z0(t,e,s,n,a,i,l,o,c){tn=!1,Oa=null,Y0.apply(X0,arguments)}function ep(t,e,s,n,a,i,l,o,c){if(Z0.apply(this,arguments),tn){if(tn){var d=Oa;tn=!1,Oa=null}else throw Error(A(198));Ma||(Ma=!0,Kl=d)}}function Bs(t){var e=t,s=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(s=e.return),t=e.return;while(t)}return e.tag===3?s:null}function Th(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function xd(t){if(Bs(t)!==t)throw Error(A(188))}function tp(t){var e=t.alternate;if(!e){if(e=Bs(t),e===null)throw Error(A(188));return e!==t?null:t}for(var s=t,n=e;;){var a=s.return;if(a===null)break;var i=a.alternate;if(i===null){if(n=a.return,n!==null){s=n;continue}break}if(a.child===i.child){for(i=a.child;i;){if(i===s)return xd(a),t;if(i===n)return xd(a),e;i=i.sibling}throw Error(A(188))}if(s.return!==n.return)s=a,n=i;else{for(var l=!1,o=a.child;o;){if(o===s){l=!0,s=a,n=i;break}if(o===n){l=!0,n=a,s=i;break}o=o.sibling}if(!l){for(o=i.child;o;){if(o===s){l=!0,s=i,n=a;break}if(o===n){l=!0,n=i,s=a;break}o=o.sibling}if(!l)throw Error(A(189))}}if(s.alternate!==n)throw Error(A(190))}if(s.tag!==3)throw Error(A(188));return s.stateNode.current===s?t:e}function Ih(t){return t=tp(t),t!==null?Ph(t):null}function Ph(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Ph(t);if(e!==null)return e;t=t.sibling}return null}var Ah=Qe.unstable_scheduleCallback,gd=Qe.unstable_cancelCallback,sp=Qe.unstable_shouldYield,rp=Qe.unstable_requestPaint,xe=Qe.unstable_now,np=Qe.unstable_getCurrentPriorityLevel,sc=Qe.unstable_ImmediatePriority,Lh=Qe.unstable_UserBlockingPriority,$a=Qe.unstable_NormalPriority,ap=Qe.unstable_LowPriority,Dh=Qe.unstable_IdlePriority,hi=null,Et=null;function ip(t){if(Et&&typeof Et.onCommitFiberRoot=="function")try{Et.onCommitFiberRoot(hi,t,void 0,(t.current.flags&128)===128)}catch{}}var xt=Math.clz32?Math.clz32:cp,lp=Math.log,op=Math.LN2;function cp(t){return t>>>=0,t===0?32:31-(lp(t)/op|0)|0}var ea=64,ta=4194304;function Yr(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function za(t,e){var s=t.pendingLanes;if(s===0)return 0;var n=0,a=t.suspendedLanes,i=t.pingedLanes,l=s&268435455;if(l!==0){var o=l&~a;o!==0?n=Yr(o):(i&=l,i!==0&&(n=Yr(i)))}else l=s&~a,l!==0?n=Yr(l):i!==0&&(n=Yr(i));if(n===0)return 0;if(e!==0&&e!==n&&!(e&a)&&(a=n&-n,i=e&-e,a>=i||a===16&&(i&4194240)!==0))return e;if(n&4&&(n|=s&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=n;0<e;)s=31-xt(e),a=1<<s,n|=t[s],e&=~a;return n}function dp(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function up(t,e){for(var s=t.suspendedLanes,n=t.pingedLanes,a=t.expirationTimes,i=t.pendingLanes;0<i;){var l=31-xt(i),o=1<<l,c=a[l];c===-1?(!(o&s)||o&n)&&(a[l]=dp(o,e)):c<=e&&(t.expiredLanes|=o),i&=~o}}function Ql(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Rh(){var t=ea;return ea<<=1,!(ea&4194240)&&(ea=64),t}function Wi(t){for(var e=[],s=0;31>s;s++)e.push(t);return e}function $n(t,e,s){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-xt(e),t[e]=s}function hp(t,e){var s=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var n=t.eventTimes;for(t=t.expirationTimes;0<s;){var a=31-xt(s),i=1<<a;e[a]=0,n[a]=-1,t[a]=-1,s&=~i}}function rc(t,e){var s=t.entangledLanes|=e;for(t=t.entanglements;s;){var n=31-xt(s),a=1<<n;a&e|t[n]&e&&(t[n]|=e),s&=~a}}var Z=0;function Oh(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Mh,nc,$h,zh,Fh,Gl=!1,sa=[],is=null,ls=null,os=null,vn=new Map,yn=new Map,es=[],mp="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function vd(t,e){switch(t){case"focusin":case"focusout":is=null;break;case"dragenter":case"dragleave":ls=null;break;case"mouseover":case"mouseout":os=null;break;case"pointerover":case"pointerout":vn.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":yn.delete(e.pointerId)}}function Ur(t,e,s,n,a,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:s,eventSystemFlags:n,nativeEvent:i,targetContainers:[a]},e!==null&&(e=Fn(e),e!==null&&nc(e)),t):(t.eventSystemFlags|=n,e=t.targetContainers,a!==null&&e.indexOf(a)===-1&&e.push(a),t)}function fp(t,e,s,n,a){switch(e){case"focusin":return is=Ur(is,t,e,s,n,a),!0;case"dragenter":return ls=Ur(ls,t,e,s,n,a),!0;case"mouseover":return os=Ur(os,t,e,s,n,a),!0;case"pointerover":var i=a.pointerId;return vn.set(i,Ur(vn.get(i)||null,t,e,s,n,a)),!0;case"gotpointercapture":return i=a.pointerId,yn.set(i,Ur(yn.get(i)||null,t,e,s,n,a)),!0}return!1}function Uh(t){var e=Is(t.target);if(e!==null){var s=Bs(e);if(s!==null){if(e=s.tag,e===13){if(e=Th(s),e!==null){t.blockedOn=e,Fh(t.priority,function(){$h(s)});return}}else if(e===3&&s.stateNode.current.memoizedState.isDehydrated){t.blockedOn=s.tag===3?s.stateNode.containerInfo:null;return}}}t.blockedOn=null}function ba(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var s=Jl(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(s===null){s=t.nativeEvent;var n=new s.constructor(s.type,s);Wl=n,s.target.dispatchEvent(n),Wl=null}else return e=Fn(s),e!==null&&nc(e),t.blockedOn=s,!1;e.shift()}return!0}function yd(t,e,s){ba(t)&&s.delete(e)}function pp(){Gl=!1,is!==null&&ba(is)&&(is=null),ls!==null&&ba(ls)&&(ls=null),os!==null&&ba(os)&&(os=null),vn.forEach(yd),yn.forEach(yd)}function qr(t,e){t.blockedOn===e&&(t.blockedOn=null,Gl||(Gl=!0,Qe.unstable_scheduleCallback(Qe.unstable_NormalPriority,pp)))}function wn(t){function e(a){return qr(a,t)}if(0<sa.length){qr(sa[0],t);for(var s=1;s<sa.length;s++){var n=sa[s];n.blockedOn===t&&(n.blockedOn=null)}}for(is!==null&&qr(is,t),ls!==null&&qr(ls,t),os!==null&&qr(os,t),vn.forEach(e),yn.forEach(e),s=0;s<es.length;s++)n=es[s],n.blockedOn===t&&(n.blockedOn=null);for(;0<es.length&&(s=es[0],s.blockedOn===null);)Uh(s),s.blockedOn===null&&es.shift()}var gr=Kt.ReactCurrentBatchConfig,Fa=!0;function xp(t,e,s,n){var a=Z,i=gr.transition;gr.transition=null;try{Z=1,ac(t,e,s,n)}finally{Z=a,gr.transition=i}}function gp(t,e,s,n){var a=Z,i=gr.transition;gr.transition=null;try{Z=4,ac(t,e,s,n)}finally{Z=a,gr.transition=i}}function ac(t,e,s,n){if(Fa){var a=Jl(t,e,s,n);if(a===null)el(t,e,n,Ua,s),vd(t,n);else if(fp(a,t,e,s,n))n.stopPropagation();else if(vd(t,n),e&4&&-1<mp.indexOf(t)){for(;a!==null;){var i=Fn(a);if(i!==null&&Mh(i),i=Jl(t,e,s,n),i===null&&el(t,e,n,Ua,s),i===a)break;a=i}a!==null&&n.stopPropagation()}else el(t,e,n,null,s)}}var Ua=null;function Jl(t,e,s,n){if(Ua=null,t=tc(n),t=Is(t),t!==null)if(e=Bs(t),e===null)t=null;else if(s=e.tag,s===13){if(t=Th(e),t!==null)return t;t=null}else if(s===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Ua=t,null}function qh(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(np()){case sc:return 1;case Lh:return 4;case $a:case ap:return 16;case Dh:return 536870912;default:return 16}default:return 16}}var rs=null,ic=null,ja=null;function Bh(){if(ja)return ja;var t,e=ic,s=e.length,n,a="value"in rs?rs.value:rs.textContent,i=a.length;for(t=0;t<s&&e[t]===a[t];t++);var l=s-t;for(n=1;n<=l&&e[s-n]===a[i-n];n++);return ja=a.slice(t,1<n?1-n:void 0)}function Na(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function ra(){return!0}function wd(){return!1}function Je(t){function e(s,n,a,i,l){this._reactName=s,this._targetInst=a,this.type=n,this.nativeEvent=i,this.target=l,this.currentTarget=null;for(var o in t)t.hasOwnProperty(o)&&(s=t[o],this[o]=s?s(i):i[o]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?ra:wd,this.isPropagationStopped=wd,this}return me(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var s=this.nativeEvent;s&&(s.preventDefault?s.preventDefault():typeof s.returnValue!="unknown"&&(s.returnValue=!1),this.isDefaultPrevented=ra)},stopPropagation:function(){var s=this.nativeEvent;s&&(s.stopPropagation?s.stopPropagation():typeof s.cancelBubble!="unknown"&&(s.cancelBubble=!0),this.isPropagationStopped=ra)},persist:function(){},isPersistent:ra}),e}var Ir={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},lc=Je(Ir),zn=me({},Ir,{view:0,detail:0}),vp=Je(zn),Vi,Hi,Br,mi=me({},zn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:oc,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Br&&(Br&&t.type==="mousemove"?(Vi=t.screenX-Br.screenX,Hi=t.screenY-Br.screenY):Hi=Vi=0,Br=t),Vi)},movementY:function(t){return"movementY"in t?t.movementY:Hi}}),bd=Je(mi),yp=me({},mi,{dataTransfer:0}),wp=Je(yp),bp=me({},zn,{relatedTarget:0}),Ki=Je(bp),jp=me({},Ir,{animationName:0,elapsedTime:0,pseudoElement:0}),Np=Je(jp),kp=me({},Ir,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),_p=Je(kp),Sp=me({},Ir,{data:0}),jd=Je(Sp),Cp={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ep={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Tp={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ip(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Tp[t])?!!e[t]:!1}function oc(){return Ip}var Pp=me({},zn,{key:function(t){if(t.key){var e=Cp[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Na(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Ep[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:oc,charCode:function(t){return t.type==="keypress"?Na(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Na(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Ap=Je(Pp),Lp=me({},mi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Nd=Je(Lp),Dp=me({},zn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:oc}),Rp=Je(Dp),Op=me({},Ir,{propertyName:0,elapsedTime:0,pseudoElement:0}),Mp=Je(Op),$p=me({},mi,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),zp=Je($p),Fp=[9,13,27,32],cc=Ut&&"CompositionEvent"in window,sn=null;Ut&&"documentMode"in document&&(sn=document.documentMode);var Up=Ut&&"TextEvent"in window&&!sn,Wh=Ut&&(!cc||sn&&8<sn&&11>=sn),kd=" ",_d=!1;function Vh(t,e){switch(t){case"keyup":return Fp.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Hh(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var sr=!1;function qp(t,e){switch(t){case"compositionend":return Hh(e);case"keypress":return e.which!==32?null:(_d=!0,kd);case"textInput":return t=e.data,t===kd&&_d?null:t;default:return null}}function Bp(t,e){if(sr)return t==="compositionend"||!cc&&Vh(t,e)?(t=Bh(),ja=ic=rs=null,sr=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Wh&&e.locale!=="ko"?null:e.data;default:return null}}var Wp={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Sd(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Wp[t.type]:e==="textarea"}function Kh(t,e,s,n){kh(n),e=qa(e,"onChange"),0<e.length&&(s=new lc("onChange","change",null,s,n),t.push({event:s,listeners:e}))}var rn=null,bn=null;function Vp(t){nm(t,0)}function fi(t){var e=ar(t);if(gh(e))return t}function Hp(t,e){if(t==="change")return e}var Qh=!1;if(Ut){var Qi;if(Ut){var Gi="oninput"in document;if(!Gi){var Cd=document.createElement("div");Cd.setAttribute("oninput","return;"),Gi=typeof Cd.oninput=="function"}Qi=Gi}else Qi=!1;Qh=Qi&&(!document.documentMode||9<document.documentMode)}function Ed(){rn&&(rn.detachEvent("onpropertychange",Gh),bn=rn=null)}function Gh(t){if(t.propertyName==="value"&&fi(bn)){var e=[];Kh(e,bn,t,tc(t)),Eh(Vp,e)}}function Kp(t,e,s){t==="focusin"?(Ed(),rn=e,bn=s,rn.attachEvent("onpropertychange",Gh)):t==="focusout"&&Ed()}function Qp(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return fi(bn)}function Gp(t,e){if(t==="click")return fi(e)}function Jp(t,e){if(t==="input"||t==="change")return fi(e)}function Yp(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var vt=typeof Object.is=="function"?Object.is:Yp;function jn(t,e){if(vt(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var s=Object.keys(t),n=Object.keys(e);if(s.length!==n.length)return!1;for(n=0;n<s.length;n++){var a=s[n];if(!Al.call(e,a)||!vt(t[a],e[a]))return!1}return!0}function Td(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Id(t,e){var s=Td(t);t=0;for(var n;s;){if(s.nodeType===3){if(n=t+s.textContent.length,t<=e&&n>=e)return{node:s,offset:e-t};t=n}e:{for(;s;){if(s.nextSibling){s=s.nextSibling;break e}s=s.parentNode}s=void 0}s=Td(s)}}function Jh(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Jh(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Yh(){for(var t=window,e=Ra();e instanceof t.HTMLIFrameElement;){try{var s=typeof e.contentWindow.location.href=="string"}catch{s=!1}if(s)t=e.contentWindow;else break;e=Ra(t.document)}return e}function dc(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function Xp(t){var e=Yh(),s=t.focusedElem,n=t.selectionRange;if(e!==s&&s&&s.ownerDocument&&Jh(s.ownerDocument.documentElement,s)){if(n!==null&&dc(s)){if(e=n.start,t=n.end,t===void 0&&(t=e),"selectionStart"in s)s.selectionStart=e,s.selectionEnd=Math.min(t,s.value.length);else if(t=(e=s.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var a=s.textContent.length,i=Math.min(n.start,a);n=n.end===void 0?i:Math.min(n.end,a),!t.extend&&i>n&&(a=n,n=i,i=a),a=Id(s,i);var l=Id(s,n);a&&l&&(t.rangeCount!==1||t.anchorNode!==a.node||t.anchorOffset!==a.offset||t.focusNode!==l.node||t.focusOffset!==l.offset)&&(e=e.createRange(),e.setStart(a.node,a.offset),t.removeAllRanges(),i>n?(t.addRange(e),t.extend(l.node,l.offset)):(e.setEnd(l.node,l.offset),t.addRange(e)))}}for(e=[],t=s;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof s.focus=="function"&&s.focus(),s=0;s<e.length;s++)t=e[s],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Zp=Ut&&"documentMode"in document&&11>=document.documentMode,rr=null,Yl=null,nn=null,Xl=!1;function Pd(t,e,s){var n=s.window===s?s.document:s.nodeType===9?s:s.ownerDocument;Xl||rr==null||rr!==Ra(n)||(n=rr,"selectionStart"in n&&dc(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),nn&&jn(nn,n)||(nn=n,n=qa(Yl,"onSelect"),0<n.length&&(e=new lc("onSelect","select",null,e,s),t.push({event:e,listeners:n}),e.target=rr)))}function na(t,e){var s={};return s[t.toLowerCase()]=e.toLowerCase(),s["Webkit"+t]="webkit"+e,s["Moz"+t]="moz"+e,s}var nr={animationend:na("Animation","AnimationEnd"),animationiteration:na("Animation","AnimationIteration"),animationstart:na("Animation","AnimationStart"),transitionend:na("Transition","TransitionEnd")},Ji={},Xh={};Ut&&(Xh=document.createElement("div").style,"AnimationEvent"in window||(delete nr.animationend.animation,delete nr.animationiteration.animation,delete nr.animationstart.animation),"TransitionEvent"in window||delete nr.transitionend.transition);function pi(t){if(Ji[t])return Ji[t];if(!nr[t])return t;var e=nr[t],s;for(s in e)if(e.hasOwnProperty(s)&&s in Xh)return Ji[t]=e[s];return t}var Zh=pi("animationend"),em=pi("animationiteration"),tm=pi("animationstart"),sm=pi("transitionend"),rm=new Map,Ad="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function vs(t,e){rm.set(t,e),qs(e,[t])}for(var Yi=0;Yi<Ad.length;Yi++){var Xi=Ad[Yi],ex=Xi.toLowerCase(),tx=Xi[0].toUpperCase()+Xi.slice(1);vs(ex,"on"+tx)}vs(Zh,"onAnimationEnd");vs(em,"onAnimationIteration");vs(tm,"onAnimationStart");vs("dblclick","onDoubleClick");vs("focusin","onFocus");vs("focusout","onBlur");vs(sm,"onTransitionEnd");wr("onMouseEnter",["mouseout","mouseover"]);wr("onMouseLeave",["mouseout","mouseover"]);wr("onPointerEnter",["pointerout","pointerover"]);wr("onPointerLeave",["pointerout","pointerover"]);qs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));qs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));qs("onBeforeInput",["compositionend","keypress","textInput","paste"]);qs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));qs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));qs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Xr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),sx=new Set("cancel close invalid load scroll toggle".split(" ").concat(Xr));function Ld(t,e,s){var n=t.type||"unknown-event";t.currentTarget=s,ep(n,e,void 0,t),t.currentTarget=null}function nm(t,e){e=(e&4)!==0;for(var s=0;s<t.length;s++){var n=t[s],a=n.event;n=n.listeners;e:{var i=void 0;if(e)for(var l=n.length-1;0<=l;l--){var o=n[l],c=o.instance,d=o.currentTarget;if(o=o.listener,c!==i&&a.isPropagationStopped())break e;Ld(a,o,d),i=c}else for(l=0;l<n.length;l++){if(o=n[l],c=o.instance,d=o.currentTarget,o=o.listener,c!==i&&a.isPropagationStopped())break e;Ld(a,o,d),i=c}}}if(Ma)throw t=Kl,Ma=!1,Kl=null,t}function ie(t,e){var s=e[ro];s===void 0&&(s=e[ro]=new Set);var n=t+"__bubble";s.has(n)||(am(e,t,2,!1),s.add(n))}function Zi(t,e,s){var n=0;e&&(n|=4),am(s,t,n,e)}var aa="_reactListening"+Math.random().toString(36).slice(2);function Nn(t){if(!t[aa]){t[aa]=!0,hh.forEach(function(s){s!=="selectionchange"&&(sx.has(s)||Zi(s,!1,t),Zi(s,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[aa]||(e[aa]=!0,Zi("selectionchange",!1,e))}}function am(t,e,s,n){switch(qh(e)){case 1:var a=xp;break;case 4:a=gp;break;default:a=ac}s=a.bind(null,e,s,t),a=void 0,!Hl||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(a=!0),n?a!==void 0?t.addEventListener(e,s,{capture:!0,passive:a}):t.addEventListener(e,s,!0):a!==void 0?t.addEventListener(e,s,{passive:a}):t.addEventListener(e,s,!1)}function el(t,e,s,n,a){var i=n;if(!(e&1)&&!(e&2)&&n!==null)e:for(;;){if(n===null)return;var l=n.tag;if(l===3||l===4){var o=n.stateNode.containerInfo;if(o===a||o.nodeType===8&&o.parentNode===a)break;if(l===4)for(l=n.return;l!==null;){var c=l.tag;if((c===3||c===4)&&(c=l.stateNode.containerInfo,c===a||c.nodeType===8&&c.parentNode===a))return;l=l.return}for(;o!==null;){if(l=Is(o),l===null)return;if(c=l.tag,c===5||c===6){n=i=l;continue e}o=o.parentNode}}n=n.return}Eh(function(){var d=i,u=tc(s),m=[];e:{var h=rm.get(t);if(h!==void 0){var y=lc,g=t;switch(t){case"keypress":if(Na(s)===0)break e;case"keydown":case"keyup":y=Ap;break;case"focusin":g="focus",y=Ki;break;case"focusout":g="blur",y=Ki;break;case"beforeblur":case"afterblur":y=Ki;break;case"click":if(s.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":y=bd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":y=wp;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":y=Rp;break;case Zh:case em:case tm:y=Np;break;case sm:y=Mp;break;case"scroll":y=vp;break;case"wheel":y=zp;break;case"copy":case"cut":case"paste":y=_p;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":y=Nd}var b=(e&4)!==0,x=!b&&t==="scroll",p=b?h!==null?h+"Capture":null:h;b=[];for(var f=d,w;f!==null;){w=f;var j=w.stateNode;if(w.tag===5&&j!==null&&(w=j,p!==null&&(j=gn(f,p),j!=null&&b.push(kn(f,j,w)))),x)break;f=f.return}0<b.length&&(h=new y(h,g,null,s,u),m.push({event:h,listeners:b}))}}if(!(e&7)){e:{if(h=t==="mouseover"||t==="pointerover",y=t==="mouseout"||t==="pointerout",h&&s!==Wl&&(g=s.relatedTarget||s.fromElement)&&(Is(g)||g[qt]))break e;if((y||h)&&(h=u.window===u?u:(h=u.ownerDocument)?h.defaultView||h.parentWindow:window,y?(g=s.relatedTarget||s.toElement,y=d,g=g?Is(g):null,g!==null&&(x=Bs(g),g!==x||g.tag!==5&&g.tag!==6)&&(g=null)):(y=null,g=d),y!==g)){if(b=bd,j="onMouseLeave",p="onMouseEnter",f="mouse",(t==="pointerout"||t==="pointerover")&&(b=Nd,j="onPointerLeave",p="onPointerEnter",f="pointer"),x=y==null?h:ar(y),w=g==null?h:ar(g),h=new b(j,f+"leave",y,s,u),h.target=x,h.relatedTarget=w,j=null,Is(u)===d&&(b=new b(p,f+"enter",g,s,u),b.target=w,b.relatedTarget=x,j=b),x=j,y&&g)t:{for(b=y,p=g,f=0,w=b;w;w=Vs(w))f++;for(w=0,j=p;j;j=Vs(j))w++;for(;0<f-w;)b=Vs(b),f--;for(;0<w-f;)p=Vs(p),w--;for(;f--;){if(b===p||p!==null&&b===p.alternate)break t;b=Vs(b),p=Vs(p)}b=null}else b=null;y!==null&&Dd(m,h,y,b,!1),g!==null&&x!==null&&Dd(m,x,g,b,!0)}}e:{if(h=d?ar(d):window,y=h.nodeName&&h.nodeName.toLowerCase(),y==="select"||y==="input"&&h.type==="file")var _=Hp;else if(Sd(h))if(Qh)_=Jp;else{_=Qp;var N=Kp}else(y=h.nodeName)&&y.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(_=Gp);if(_&&(_=_(t,d))){Kh(m,_,s,u);break e}N&&N(t,h,d),t==="focusout"&&(N=h._wrapperState)&&N.controlled&&h.type==="number"&&zl(h,"number",h.value)}switch(N=d?ar(d):window,t){case"focusin":(Sd(N)||N.contentEditable==="true")&&(rr=N,Yl=d,nn=null);break;case"focusout":nn=Yl=rr=null;break;case"mousedown":Xl=!0;break;case"contextmenu":case"mouseup":case"dragend":Xl=!1,Pd(m,s,u);break;case"selectionchange":if(Zp)break;case"keydown":case"keyup":Pd(m,s,u)}var k;if(cc)e:{switch(t){case"compositionstart":var S="onCompositionStart";break e;case"compositionend":S="onCompositionEnd";break e;case"compositionupdate":S="onCompositionUpdate";break e}S=void 0}else sr?Vh(t,s)&&(S="onCompositionEnd"):t==="keydown"&&s.keyCode===229&&(S="onCompositionStart");S&&(Wh&&s.locale!=="ko"&&(sr||S!=="onCompositionStart"?S==="onCompositionEnd"&&sr&&(k=Bh()):(rs=u,ic="value"in rs?rs.value:rs.textContent,sr=!0)),N=qa(d,S),0<N.length&&(S=new jd(S,t,null,s,u),m.push({event:S,listeners:N}),k?S.data=k:(k=Hh(s),k!==null&&(S.data=k)))),(k=Up?qp(t,s):Bp(t,s))&&(d=qa(d,"onBeforeInput"),0<d.length&&(u=new jd("onBeforeInput","beforeinput",null,s,u),m.push({event:u,listeners:d}),u.data=k))}nm(m,e)})}function kn(t,e,s){return{instance:t,listener:e,currentTarget:s}}function qa(t,e){for(var s=e+"Capture",n=[];t!==null;){var a=t,i=a.stateNode;a.tag===5&&i!==null&&(a=i,i=gn(t,s),i!=null&&n.unshift(kn(t,i,a)),i=gn(t,e),i!=null&&n.push(kn(t,i,a))),t=t.return}return n}function Vs(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Dd(t,e,s,n,a){for(var i=e._reactName,l=[];s!==null&&s!==n;){var o=s,c=o.alternate,d=o.stateNode;if(c!==null&&c===n)break;o.tag===5&&d!==null&&(o=d,a?(c=gn(s,i),c!=null&&l.unshift(kn(s,c,o))):a||(c=gn(s,i),c!=null&&l.push(kn(s,c,o)))),s=s.return}l.length!==0&&t.push({event:e,listeners:l})}var rx=/\r\n?/g,nx=/\u0000|\uFFFD/g;function Rd(t){return(typeof t=="string"?t:""+t).replace(rx,`
`).replace(nx,"")}function ia(t,e,s){if(e=Rd(e),Rd(t)!==e&&s)throw Error(A(425))}function Ba(){}var Zl=null,eo=null;function to(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var so=typeof setTimeout=="function"?setTimeout:void 0,ax=typeof clearTimeout=="function"?clearTimeout:void 0,Od=typeof Promise=="function"?Promise:void 0,ix=typeof queueMicrotask=="function"?queueMicrotask:typeof Od<"u"?function(t){return Od.resolve(null).then(t).catch(lx)}:so;function lx(t){setTimeout(function(){throw t})}function tl(t,e){var s=e,n=0;do{var a=s.nextSibling;if(t.removeChild(s),a&&a.nodeType===8)if(s=a.data,s==="/$"){if(n===0){t.removeChild(a),wn(e);return}n--}else s!=="$"&&s!=="$?"&&s!=="$!"||n++;s=a}while(s);wn(e)}function cs(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Md(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var s=t.data;if(s==="$"||s==="$!"||s==="$?"){if(e===0)return t;e--}else s==="/$"&&e++}t=t.previousSibling}return null}var Pr=Math.random().toString(36).slice(2),Ct="__reactFiber$"+Pr,_n="__reactProps$"+Pr,qt="__reactContainer$"+Pr,ro="__reactEvents$"+Pr,ox="__reactListeners$"+Pr,cx="__reactHandles$"+Pr;function Is(t){var e=t[Ct];if(e)return e;for(var s=t.parentNode;s;){if(e=s[qt]||s[Ct]){if(s=e.alternate,e.child!==null||s!==null&&s.child!==null)for(t=Md(t);t!==null;){if(s=t[Ct])return s;t=Md(t)}return e}t=s,s=t.parentNode}return null}function Fn(t){return t=t[Ct]||t[qt],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function ar(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(A(33))}function xi(t){return t[_n]||null}var no=[],ir=-1;function ys(t){return{current:t}}function le(t){0>ir||(t.current=no[ir],no[ir]=null,ir--)}function ae(t,e){ir++,no[ir]=t.current,t.current=e}var ps={},Le=ys(ps),qe=ys(!1),Rs=ps;function br(t,e){var s=t.type.contextTypes;if(!s)return ps;var n=t.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var a={},i;for(i in s)a[i]=e[i];return n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=a),a}function Be(t){return t=t.childContextTypes,t!=null}function Wa(){le(qe),le(Le)}function $d(t,e,s){if(Le.current!==ps)throw Error(A(168));ae(Le,e),ae(qe,s)}function im(t,e,s){var n=t.stateNode;if(e=e.childContextTypes,typeof n.getChildContext!="function")return s;n=n.getChildContext();for(var a in n)if(!(a in e))throw Error(A(108,K0(t)||"Unknown",a));return me({},s,n)}function Va(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||ps,Rs=Le.current,ae(Le,t),ae(qe,qe.current),!0}function zd(t,e,s){var n=t.stateNode;if(!n)throw Error(A(169));s?(t=im(t,e,Rs),n.__reactInternalMemoizedMergedChildContext=t,le(qe),le(Le),ae(Le,t)):le(qe),ae(qe,s)}var Ot=null,gi=!1,sl=!1;function lm(t){Ot===null?Ot=[t]:Ot.push(t)}function dx(t){gi=!0,lm(t)}function ws(){if(!sl&&Ot!==null){sl=!0;var t=0,e=Z;try{var s=Ot;for(Z=1;t<s.length;t++){var n=s[t];do n=n(!0);while(n!==null)}Ot=null,gi=!1}catch(a){throw Ot!==null&&(Ot=Ot.slice(t+1)),Ah(sc,ws),a}finally{Z=e,sl=!1}}return null}var lr=[],or=0,Ha=null,Ka=0,Ze=[],et=0,Os=null,Mt=1,$t="";function _s(t,e){lr[or++]=Ka,lr[or++]=Ha,Ha=t,Ka=e}function om(t,e,s){Ze[et++]=Mt,Ze[et++]=$t,Ze[et++]=Os,Os=t;var n=Mt;t=$t;var a=32-xt(n)-1;n&=~(1<<a),s+=1;var i=32-xt(e)+a;if(30<i){var l=a-a%5;i=(n&(1<<l)-1).toString(32),n>>=l,a-=l,Mt=1<<32-xt(e)+a|s<<a|n,$t=i+t}else Mt=1<<i|s<<a|n,$t=t}function uc(t){t.return!==null&&(_s(t,1),om(t,1,0))}function hc(t){for(;t===Ha;)Ha=lr[--or],lr[or]=null,Ka=lr[--or],lr[or]=null;for(;t===Os;)Os=Ze[--et],Ze[et]=null,$t=Ze[--et],Ze[et]=null,Mt=Ze[--et],Ze[et]=null}var Ke=null,He=null,oe=!1,pt=null;function cm(t,e){var s=tt(5,null,null,0);s.elementType="DELETED",s.stateNode=e,s.return=t,e=t.deletions,e===null?(t.deletions=[s],t.flags|=16):e.push(s)}function Fd(t,e){switch(t.tag){case 5:var s=t.type;return e=e.nodeType!==1||s.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Ke=t,He=cs(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Ke=t,He=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(s=Os!==null?{id:Mt,overflow:$t}:null,t.memoizedState={dehydrated:e,treeContext:s,retryLane:1073741824},s=tt(18,null,null,0),s.stateNode=e,s.return=t,t.child=s,Ke=t,He=null,!0):!1;default:return!1}}function ao(t){return(t.mode&1)!==0&&(t.flags&128)===0}function io(t){if(oe){var e=He;if(e){var s=e;if(!Fd(t,e)){if(ao(t))throw Error(A(418));e=cs(s.nextSibling);var n=Ke;e&&Fd(t,e)?cm(n,s):(t.flags=t.flags&-4097|2,oe=!1,Ke=t)}}else{if(ao(t))throw Error(A(418));t.flags=t.flags&-4097|2,oe=!1,Ke=t}}}function Ud(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Ke=t}function la(t){if(t!==Ke)return!1;if(!oe)return Ud(t),oe=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!to(t.type,t.memoizedProps)),e&&(e=He)){if(ao(t))throw dm(),Error(A(418));for(;e;)cm(t,e),e=cs(e.nextSibling)}if(Ud(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(A(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var s=t.data;if(s==="/$"){if(e===0){He=cs(t.nextSibling);break e}e--}else s!=="$"&&s!=="$!"&&s!=="$?"||e++}t=t.nextSibling}He=null}}else He=Ke?cs(t.stateNode.nextSibling):null;return!0}function dm(){for(var t=He;t;)t=cs(t.nextSibling)}function jr(){He=Ke=null,oe=!1}function mc(t){pt===null?pt=[t]:pt.push(t)}var ux=Kt.ReactCurrentBatchConfig;function Wr(t,e,s){if(t=s.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(s._owner){if(s=s._owner,s){if(s.tag!==1)throw Error(A(309));var n=s.stateNode}if(!n)throw Error(A(147,t));var a=n,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(l){var o=a.refs;l===null?delete o[i]:o[i]=l},e._stringRef=i,e)}if(typeof t!="string")throw Error(A(284));if(!s._owner)throw Error(A(290,t))}return t}function oa(t,e){throw t=Object.prototype.toString.call(e),Error(A(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function qd(t){var e=t._init;return e(t._payload)}function um(t){function e(p,f){if(t){var w=p.deletions;w===null?(p.deletions=[f],p.flags|=16):w.push(f)}}function s(p,f){if(!t)return null;for(;f!==null;)e(p,f),f=f.sibling;return null}function n(p,f){for(p=new Map;f!==null;)f.key!==null?p.set(f.key,f):p.set(f.index,f),f=f.sibling;return p}function a(p,f){return p=ms(p,f),p.index=0,p.sibling=null,p}function i(p,f,w){return p.index=w,t?(w=p.alternate,w!==null?(w=w.index,w<f?(p.flags|=2,f):w):(p.flags|=2,f)):(p.flags|=1048576,f)}function l(p){return t&&p.alternate===null&&(p.flags|=2),p}function o(p,f,w,j){return f===null||f.tag!==6?(f=cl(w,p.mode,j),f.return=p,f):(f=a(f,w),f.return=p,f)}function c(p,f,w,j){var _=w.type;return _===tr?u(p,f,w.props.children,j,w.key):f!==null&&(f.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===Xt&&qd(_)===f.type)?(j=a(f,w.props),j.ref=Wr(p,f,w),j.return=p,j):(j=Ia(w.type,w.key,w.props,null,p.mode,j),j.ref=Wr(p,f,w),j.return=p,j)}function d(p,f,w,j){return f===null||f.tag!==4||f.stateNode.containerInfo!==w.containerInfo||f.stateNode.implementation!==w.implementation?(f=dl(w,p.mode,j),f.return=p,f):(f=a(f,w.children||[]),f.return=p,f)}function u(p,f,w,j,_){return f===null||f.tag!==7?(f=Ds(w,p.mode,j,_),f.return=p,f):(f=a(f,w),f.return=p,f)}function m(p,f,w){if(typeof f=="string"&&f!==""||typeof f=="number")return f=cl(""+f,p.mode,w),f.return=p,f;if(typeof f=="object"&&f!==null){switch(f.$$typeof){case Yn:return w=Ia(f.type,f.key,f.props,null,p.mode,w),w.ref=Wr(p,null,f),w.return=p,w;case er:return f=dl(f,p.mode,w),f.return=p,f;case Xt:var j=f._init;return m(p,j(f._payload),w)}if(Jr(f)||zr(f))return f=Ds(f,p.mode,w,null),f.return=p,f;oa(p,f)}return null}function h(p,f,w,j){var _=f!==null?f.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return _!==null?null:o(p,f,""+w,j);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Yn:return w.key===_?c(p,f,w,j):null;case er:return w.key===_?d(p,f,w,j):null;case Xt:return _=w._init,h(p,f,_(w._payload),j)}if(Jr(w)||zr(w))return _!==null?null:u(p,f,w,j,null);oa(p,w)}return null}function y(p,f,w,j,_){if(typeof j=="string"&&j!==""||typeof j=="number")return p=p.get(w)||null,o(f,p,""+j,_);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case Yn:return p=p.get(j.key===null?w:j.key)||null,c(f,p,j,_);case er:return p=p.get(j.key===null?w:j.key)||null,d(f,p,j,_);case Xt:var N=j._init;return y(p,f,w,N(j._payload),_)}if(Jr(j)||zr(j))return p=p.get(w)||null,u(f,p,j,_,null);oa(f,j)}return null}function g(p,f,w,j){for(var _=null,N=null,k=f,S=f=0,O=null;k!==null&&S<w.length;S++){k.index>S?(O=k,k=null):O=k.sibling;var L=h(p,k,w[S],j);if(L===null){k===null&&(k=O);break}t&&k&&L.alternate===null&&e(p,k),f=i(L,f,S),N===null?_=L:N.sibling=L,N=L,k=O}if(S===w.length)return s(p,k),oe&&_s(p,S),_;if(k===null){for(;S<w.length;S++)k=m(p,w[S],j),k!==null&&(f=i(k,f,S),N===null?_=k:N.sibling=k,N=k);return oe&&_s(p,S),_}for(k=n(p,k);S<w.length;S++)O=y(k,p,S,w[S],j),O!==null&&(t&&O.alternate!==null&&k.delete(O.key===null?S:O.key),f=i(O,f,S),N===null?_=O:N.sibling=O,N=O);return t&&k.forEach(function(E){return e(p,E)}),oe&&_s(p,S),_}function b(p,f,w,j){var _=zr(w);if(typeof _!="function")throw Error(A(150));if(w=_.call(w),w==null)throw Error(A(151));for(var N=_=null,k=f,S=f=0,O=null,L=w.next();k!==null&&!L.done;S++,L=w.next()){k.index>S?(O=k,k=null):O=k.sibling;var E=h(p,k,L.value,j);if(E===null){k===null&&(k=O);break}t&&k&&E.alternate===null&&e(p,k),f=i(E,f,S),N===null?_=E:N.sibling=E,N=E,k=O}if(L.done)return s(p,k),oe&&_s(p,S),_;if(k===null){for(;!L.done;S++,L=w.next())L=m(p,L.value,j),L!==null&&(f=i(L,f,S),N===null?_=L:N.sibling=L,N=L);return oe&&_s(p,S),_}for(k=n(p,k);!L.done;S++,L=w.next())L=y(k,p,S,L.value,j),L!==null&&(t&&L.alternate!==null&&k.delete(L.key===null?S:L.key),f=i(L,f,S),N===null?_=L:N.sibling=L,N=L);return t&&k.forEach(function(W){return e(p,W)}),oe&&_s(p,S),_}function x(p,f,w,j){if(typeof w=="object"&&w!==null&&w.type===tr&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case Yn:e:{for(var _=w.key,N=f;N!==null;){if(N.key===_){if(_=w.type,_===tr){if(N.tag===7){s(p,N.sibling),f=a(N,w.props.children),f.return=p,p=f;break e}}else if(N.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===Xt&&qd(_)===N.type){s(p,N.sibling),f=a(N,w.props),f.ref=Wr(p,N,w),f.return=p,p=f;break e}s(p,N);break}else e(p,N);N=N.sibling}w.type===tr?(f=Ds(w.props.children,p.mode,j,w.key),f.return=p,p=f):(j=Ia(w.type,w.key,w.props,null,p.mode,j),j.ref=Wr(p,f,w),j.return=p,p=j)}return l(p);case er:e:{for(N=w.key;f!==null;){if(f.key===N)if(f.tag===4&&f.stateNode.containerInfo===w.containerInfo&&f.stateNode.implementation===w.implementation){s(p,f.sibling),f=a(f,w.children||[]),f.return=p,p=f;break e}else{s(p,f);break}else e(p,f);f=f.sibling}f=dl(w,p.mode,j),f.return=p,p=f}return l(p);case Xt:return N=w._init,x(p,f,N(w._payload),j)}if(Jr(w))return g(p,f,w,j);if(zr(w))return b(p,f,w,j);oa(p,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,f!==null&&f.tag===6?(s(p,f.sibling),f=a(f,w),f.return=p,p=f):(s(p,f),f=cl(w,p.mode,j),f.return=p,p=f),l(p)):s(p,f)}return x}var Nr=um(!0),hm=um(!1),Qa=ys(null),Ga=null,cr=null,fc=null;function pc(){fc=cr=Ga=null}function xc(t){var e=Qa.current;le(Qa),t._currentValue=e}function lo(t,e,s){for(;t!==null;){var n=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,n!==null&&(n.childLanes|=e)):n!==null&&(n.childLanes&e)!==e&&(n.childLanes|=e),t===s)break;t=t.return}}function vr(t,e){Ga=t,fc=cr=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Ue=!0),t.firstContext=null)}function nt(t){var e=t._currentValue;if(fc!==t)if(t={context:t,memoizedValue:e,next:null},cr===null){if(Ga===null)throw Error(A(308));cr=t,Ga.dependencies={lanes:0,firstContext:t}}else cr=cr.next=t;return e}var Ps=null;function gc(t){Ps===null?Ps=[t]:Ps.push(t)}function mm(t,e,s,n){var a=e.interleaved;return a===null?(s.next=s,gc(e)):(s.next=a.next,a.next=s),e.interleaved=s,Bt(t,n)}function Bt(t,e){t.lanes|=e;var s=t.alternate;for(s!==null&&(s.lanes|=e),s=t,t=t.return;t!==null;)t.childLanes|=e,s=t.alternate,s!==null&&(s.childLanes|=e),s=t,t=t.return;return s.tag===3?s.stateNode:null}var Zt=!1;function vc(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function fm(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function zt(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function ds(t,e,s){var n=t.updateQueue;if(n===null)return null;if(n=n.shared,J&2){var a=n.pending;return a===null?e.next=e:(e.next=a.next,a.next=e),n.pending=e,Bt(t,s)}return a=n.interleaved,a===null?(e.next=e,gc(n)):(e.next=a.next,a.next=e),n.interleaved=e,Bt(t,s)}function ka(t,e,s){if(e=e.updateQueue,e!==null&&(e=e.shared,(s&4194240)!==0)){var n=e.lanes;n&=t.pendingLanes,s|=n,e.lanes=s,rc(t,s)}}function Bd(t,e){var s=t.updateQueue,n=t.alternate;if(n!==null&&(n=n.updateQueue,s===n)){var a=null,i=null;if(s=s.firstBaseUpdate,s!==null){do{var l={eventTime:s.eventTime,lane:s.lane,tag:s.tag,payload:s.payload,callback:s.callback,next:null};i===null?a=i=l:i=i.next=l,s=s.next}while(s!==null);i===null?a=i=e:i=i.next=e}else a=i=e;s={baseState:n.baseState,firstBaseUpdate:a,lastBaseUpdate:i,shared:n.shared,effects:n.effects},t.updateQueue=s;return}t=s.lastBaseUpdate,t===null?s.firstBaseUpdate=e:t.next=e,s.lastBaseUpdate=e}function Ja(t,e,s,n){var a=t.updateQueue;Zt=!1;var i=a.firstBaseUpdate,l=a.lastBaseUpdate,o=a.shared.pending;if(o!==null){a.shared.pending=null;var c=o,d=c.next;c.next=null,l===null?i=d:l.next=d,l=c;var u=t.alternate;u!==null&&(u=u.updateQueue,o=u.lastBaseUpdate,o!==l&&(o===null?u.firstBaseUpdate=d:o.next=d,u.lastBaseUpdate=c))}if(i!==null){var m=a.baseState;l=0,u=d=c=null,o=i;do{var h=o.lane,y=o.eventTime;if((n&h)===h){u!==null&&(u=u.next={eventTime:y,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var g=t,b=o;switch(h=e,y=s,b.tag){case 1:if(g=b.payload,typeof g=="function"){m=g.call(y,m,h);break e}m=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=b.payload,h=typeof g=="function"?g.call(y,m,h):g,h==null)break e;m=me({},m,h);break e;case 2:Zt=!0}}o.callback!==null&&o.lane!==0&&(t.flags|=64,h=a.effects,h===null?a.effects=[o]:h.push(o))}else y={eventTime:y,lane:h,tag:o.tag,payload:o.payload,callback:o.callback,next:null},u===null?(d=u=y,c=m):u=u.next=y,l|=h;if(o=o.next,o===null){if(o=a.shared.pending,o===null)break;h=o,o=h.next,h.next=null,a.lastBaseUpdate=h,a.shared.pending=null}}while(!0);if(u===null&&(c=m),a.baseState=c,a.firstBaseUpdate=d,a.lastBaseUpdate=u,e=a.shared.interleaved,e!==null){a=e;do l|=a.lane,a=a.next;while(a!==e)}else i===null&&(a.shared.lanes=0);$s|=l,t.lanes=l,t.memoizedState=m}}function Wd(t,e,s){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var n=t[e],a=n.callback;if(a!==null){if(n.callback=null,n=s,typeof a!="function")throw Error(A(191,a));a.call(n)}}}var Un={},Tt=ys(Un),Sn=ys(Un),Cn=ys(Un);function As(t){if(t===Un)throw Error(A(174));return t}function yc(t,e){switch(ae(Cn,e),ae(Sn,t),ae(Tt,Un),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Ul(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Ul(e,t)}le(Tt),ae(Tt,e)}function kr(){le(Tt),le(Sn),le(Cn)}function pm(t){As(Cn.current);var e=As(Tt.current),s=Ul(e,t.type);e!==s&&(ae(Sn,t),ae(Tt,s))}function wc(t){Sn.current===t&&(le(Tt),le(Sn))}var ue=ys(0);function Ya(t){for(var e=t;e!==null;){if(e.tag===13){var s=e.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||s.data==="$?"||s.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var rl=[];function bc(){for(var t=0;t<rl.length;t++)rl[t]._workInProgressVersionPrimary=null;rl.length=0}var _a=Kt.ReactCurrentDispatcher,nl=Kt.ReactCurrentBatchConfig,Ms=0,he=null,be=null,Ne=null,Xa=!1,an=!1,En=0,hx=0;function Te(){throw Error(A(321))}function jc(t,e){if(e===null)return!1;for(var s=0;s<e.length&&s<t.length;s++)if(!vt(t[s],e[s]))return!1;return!0}function Nc(t,e,s,n,a,i){if(Ms=i,he=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,_a.current=t===null||t.memoizedState===null?xx:gx,t=s(n,a),an){i=0;do{if(an=!1,En=0,25<=i)throw Error(A(301));i+=1,Ne=be=null,e.updateQueue=null,_a.current=vx,t=s(n,a)}while(an)}if(_a.current=Za,e=be!==null&&be.next!==null,Ms=0,Ne=be=he=null,Xa=!1,e)throw Error(A(300));return t}function kc(){var t=En!==0;return En=0,t}function _t(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ne===null?he.memoizedState=Ne=t:Ne=Ne.next=t,Ne}function at(){if(be===null){var t=he.alternate;t=t!==null?t.memoizedState:null}else t=be.next;var e=Ne===null?he.memoizedState:Ne.next;if(e!==null)Ne=e,be=t;else{if(t===null)throw Error(A(310));be=t,t={memoizedState:be.memoizedState,baseState:be.baseState,baseQueue:be.baseQueue,queue:be.queue,next:null},Ne===null?he.memoizedState=Ne=t:Ne=Ne.next=t}return Ne}function Tn(t,e){return typeof e=="function"?e(t):e}function al(t){var e=at(),s=e.queue;if(s===null)throw Error(A(311));s.lastRenderedReducer=t;var n=be,a=n.baseQueue,i=s.pending;if(i!==null){if(a!==null){var l=a.next;a.next=i.next,i.next=l}n.baseQueue=a=i,s.pending=null}if(a!==null){i=a.next,n=n.baseState;var o=l=null,c=null,d=i;do{var u=d.lane;if((Ms&u)===u)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),n=d.hasEagerState?d.eagerState:t(n,d.action);else{var m={lane:u,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(o=c=m,l=n):c=c.next=m,he.lanes|=u,$s|=u}d=d.next}while(d!==null&&d!==i);c===null?l=n:c.next=o,vt(n,e.memoizedState)||(Ue=!0),e.memoizedState=n,e.baseState=l,e.baseQueue=c,s.lastRenderedState=n}if(t=s.interleaved,t!==null){a=t;do i=a.lane,he.lanes|=i,$s|=i,a=a.next;while(a!==t)}else a===null&&(s.lanes=0);return[e.memoizedState,s.dispatch]}function il(t){var e=at(),s=e.queue;if(s===null)throw Error(A(311));s.lastRenderedReducer=t;var n=s.dispatch,a=s.pending,i=e.memoizedState;if(a!==null){s.pending=null;var l=a=a.next;do i=t(i,l.action),l=l.next;while(l!==a);vt(i,e.memoizedState)||(Ue=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),s.lastRenderedState=i}return[i,n]}function xm(){}function gm(t,e){var s=he,n=at(),a=e(),i=!vt(n.memoizedState,a);if(i&&(n.memoizedState=a,Ue=!0),n=n.queue,_c(wm.bind(null,s,n,t),[t]),n.getSnapshot!==e||i||Ne!==null&&Ne.memoizedState.tag&1){if(s.flags|=2048,In(9,ym.bind(null,s,n,a,e),void 0,null),ke===null)throw Error(A(349));Ms&30||vm(s,e,a)}return a}function vm(t,e,s){t.flags|=16384,t={getSnapshot:e,value:s},e=he.updateQueue,e===null?(e={lastEffect:null,stores:null},he.updateQueue=e,e.stores=[t]):(s=e.stores,s===null?e.stores=[t]:s.push(t))}function ym(t,e,s,n){e.value=s,e.getSnapshot=n,bm(e)&&jm(t)}function wm(t,e,s){return s(function(){bm(e)&&jm(t)})}function bm(t){var e=t.getSnapshot;t=t.value;try{var s=e();return!vt(t,s)}catch{return!0}}function jm(t){var e=Bt(t,1);e!==null&&gt(e,t,1,-1)}function Vd(t){var e=_t();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Tn,lastRenderedState:t},e.queue=t,t=t.dispatch=px.bind(null,he,t),[e.memoizedState,t]}function In(t,e,s,n){return t={tag:t,create:e,destroy:s,deps:n,next:null},e=he.updateQueue,e===null?(e={lastEffect:null,stores:null},he.updateQueue=e,e.lastEffect=t.next=t):(s=e.lastEffect,s===null?e.lastEffect=t.next=t:(n=s.next,s.next=t,t.next=n,e.lastEffect=t)),t}function Nm(){return at().memoizedState}function Sa(t,e,s,n){var a=_t();he.flags|=t,a.memoizedState=In(1|e,s,void 0,n===void 0?null:n)}function vi(t,e,s,n){var a=at();n=n===void 0?null:n;var i=void 0;if(be!==null){var l=be.memoizedState;if(i=l.destroy,n!==null&&jc(n,l.deps)){a.memoizedState=In(e,s,i,n);return}}he.flags|=t,a.memoizedState=In(1|e,s,i,n)}function Hd(t,e){return Sa(8390656,8,t,e)}function _c(t,e){return vi(2048,8,t,e)}function km(t,e){return vi(4,2,t,e)}function _m(t,e){return vi(4,4,t,e)}function Sm(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Cm(t,e,s){return s=s!=null?s.concat([t]):null,vi(4,4,Sm.bind(null,e,t),s)}function Sc(){}function Em(t,e){var s=at();e=e===void 0?null:e;var n=s.memoizedState;return n!==null&&e!==null&&jc(e,n[1])?n[0]:(s.memoizedState=[t,e],t)}function Tm(t,e){var s=at();e=e===void 0?null:e;var n=s.memoizedState;return n!==null&&e!==null&&jc(e,n[1])?n[0]:(t=t(),s.memoizedState=[t,e],t)}function Im(t,e,s){return Ms&21?(vt(s,e)||(s=Rh(),he.lanes|=s,$s|=s,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Ue=!0),t.memoizedState=s)}function mx(t,e){var s=Z;Z=s!==0&&4>s?s:4,t(!0);var n=nl.transition;nl.transition={};try{t(!1),e()}finally{Z=s,nl.transition=n}}function Pm(){return at().memoizedState}function fx(t,e,s){var n=hs(t);if(s={lane:n,action:s,hasEagerState:!1,eagerState:null,next:null},Am(t))Lm(e,s);else if(s=mm(t,e,s,n),s!==null){var a=Oe();gt(s,t,n,a),Dm(s,e,n)}}function px(t,e,s){var n=hs(t),a={lane:n,action:s,hasEagerState:!1,eagerState:null,next:null};if(Am(t))Lm(e,a);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var l=e.lastRenderedState,o=i(l,s);if(a.hasEagerState=!0,a.eagerState=o,vt(o,l)){var c=e.interleaved;c===null?(a.next=a,gc(e)):(a.next=c.next,c.next=a),e.interleaved=a;return}}catch{}finally{}s=mm(t,e,a,n),s!==null&&(a=Oe(),gt(s,t,n,a),Dm(s,e,n))}}function Am(t){var e=t.alternate;return t===he||e!==null&&e===he}function Lm(t,e){an=Xa=!0;var s=t.pending;s===null?e.next=e:(e.next=s.next,s.next=e),t.pending=e}function Dm(t,e,s){if(s&4194240){var n=e.lanes;n&=t.pendingLanes,s|=n,e.lanes=s,rc(t,s)}}var Za={readContext:nt,useCallback:Te,useContext:Te,useEffect:Te,useImperativeHandle:Te,useInsertionEffect:Te,useLayoutEffect:Te,useMemo:Te,useReducer:Te,useRef:Te,useState:Te,useDebugValue:Te,useDeferredValue:Te,useTransition:Te,useMutableSource:Te,useSyncExternalStore:Te,useId:Te,unstable_isNewReconciler:!1},xx={readContext:nt,useCallback:function(t,e){return _t().memoizedState=[t,e===void 0?null:e],t},useContext:nt,useEffect:Hd,useImperativeHandle:function(t,e,s){return s=s!=null?s.concat([t]):null,Sa(4194308,4,Sm.bind(null,e,t),s)},useLayoutEffect:function(t,e){return Sa(4194308,4,t,e)},useInsertionEffect:function(t,e){return Sa(4,2,t,e)},useMemo:function(t,e){var s=_t();return e=e===void 0?null:e,t=t(),s.memoizedState=[t,e],t},useReducer:function(t,e,s){var n=_t();return e=s!==void 0?s(e):e,n.memoizedState=n.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},n.queue=t,t=t.dispatch=fx.bind(null,he,t),[n.memoizedState,t]},useRef:function(t){var e=_t();return t={current:t},e.memoizedState=t},useState:Vd,useDebugValue:Sc,useDeferredValue:function(t){return _t().memoizedState=t},useTransition:function(){var t=Vd(!1),e=t[0];return t=mx.bind(null,t[1]),_t().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,s){var n=he,a=_t();if(oe){if(s===void 0)throw Error(A(407));s=s()}else{if(s=e(),ke===null)throw Error(A(349));Ms&30||vm(n,e,s)}a.memoizedState=s;var i={value:s,getSnapshot:e};return a.queue=i,Hd(wm.bind(null,n,i,t),[t]),n.flags|=2048,In(9,ym.bind(null,n,i,s,e),void 0,null),s},useId:function(){var t=_t(),e=ke.identifierPrefix;if(oe){var s=$t,n=Mt;s=(n&~(1<<32-xt(n)-1)).toString(32)+s,e=":"+e+"R"+s,s=En++,0<s&&(e+="H"+s.toString(32)),e+=":"}else s=hx++,e=":"+e+"r"+s.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},gx={readContext:nt,useCallback:Em,useContext:nt,useEffect:_c,useImperativeHandle:Cm,useInsertionEffect:km,useLayoutEffect:_m,useMemo:Tm,useReducer:al,useRef:Nm,useState:function(){return al(Tn)},useDebugValue:Sc,useDeferredValue:function(t){var e=at();return Im(e,be.memoizedState,t)},useTransition:function(){var t=al(Tn)[0],e=at().memoizedState;return[t,e]},useMutableSource:xm,useSyncExternalStore:gm,useId:Pm,unstable_isNewReconciler:!1},vx={readContext:nt,useCallback:Em,useContext:nt,useEffect:_c,useImperativeHandle:Cm,useInsertionEffect:km,useLayoutEffect:_m,useMemo:Tm,useReducer:il,useRef:Nm,useState:function(){return il(Tn)},useDebugValue:Sc,useDeferredValue:function(t){var e=at();return be===null?e.memoizedState=t:Im(e,be.memoizedState,t)},useTransition:function(){var t=il(Tn)[0],e=at().memoizedState;return[t,e]},useMutableSource:xm,useSyncExternalStore:gm,useId:Pm,unstable_isNewReconciler:!1};function ht(t,e){if(t&&t.defaultProps){e=me({},e),t=t.defaultProps;for(var s in t)e[s]===void 0&&(e[s]=t[s]);return e}return e}function oo(t,e,s,n){e=t.memoizedState,s=s(n,e),s=s==null?e:me({},e,s),t.memoizedState=s,t.lanes===0&&(t.updateQueue.baseState=s)}var yi={isMounted:function(t){return(t=t._reactInternals)?Bs(t)===t:!1},enqueueSetState:function(t,e,s){t=t._reactInternals;var n=Oe(),a=hs(t),i=zt(n,a);i.payload=e,s!=null&&(i.callback=s),e=ds(t,i,a),e!==null&&(gt(e,t,a,n),ka(e,t,a))},enqueueReplaceState:function(t,e,s){t=t._reactInternals;var n=Oe(),a=hs(t),i=zt(n,a);i.tag=1,i.payload=e,s!=null&&(i.callback=s),e=ds(t,i,a),e!==null&&(gt(e,t,a,n),ka(e,t,a))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var s=Oe(),n=hs(t),a=zt(s,n);a.tag=2,e!=null&&(a.callback=e),e=ds(t,a,n),e!==null&&(gt(e,t,n,s),ka(e,t,n))}};function Kd(t,e,s,n,a,i,l){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(n,i,l):e.prototype&&e.prototype.isPureReactComponent?!jn(s,n)||!jn(a,i):!0}function Rm(t,e,s){var n=!1,a=ps,i=e.contextType;return typeof i=="object"&&i!==null?i=nt(i):(a=Be(e)?Rs:Le.current,n=e.contextTypes,i=(n=n!=null)?br(t,a):ps),e=new e(s,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=yi,t.stateNode=e,e._reactInternals=t,n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=a,t.__reactInternalMemoizedMaskedChildContext=i),e}function Qd(t,e,s,n){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(s,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(s,n),e.state!==t&&yi.enqueueReplaceState(e,e.state,null)}function co(t,e,s,n){var a=t.stateNode;a.props=s,a.state=t.memoizedState,a.refs={},vc(t);var i=e.contextType;typeof i=="object"&&i!==null?a.context=nt(i):(i=Be(e)?Rs:Le.current,a.context=br(t,i)),a.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(oo(t,e,i,s),a.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(e=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),e!==a.state&&yi.enqueueReplaceState(a,a.state,null),Ja(t,s,a,n),a.state=t.memoizedState),typeof a.componentDidMount=="function"&&(t.flags|=4194308)}function _r(t,e){try{var s="",n=e;do s+=H0(n),n=n.return;while(n);var a=s}catch(i){a=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:a,digest:null}}function ll(t,e,s){return{value:t,source:null,stack:s??null,digest:e??null}}function uo(t,e){try{console.error(e.value)}catch(s){setTimeout(function(){throw s})}}var yx=typeof WeakMap=="function"?WeakMap:Map;function Om(t,e,s){s=zt(-1,s),s.tag=3,s.payload={element:null};var n=e.value;return s.callback=function(){ti||(ti=!0,bo=n),uo(t,e)},s}function Mm(t,e,s){s=zt(-1,s),s.tag=3;var n=t.type.getDerivedStateFromError;if(typeof n=="function"){var a=e.value;s.payload=function(){return n(a)},s.callback=function(){uo(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(s.callback=function(){uo(t,e),typeof n!="function"&&(us===null?us=new Set([this]):us.add(this));var l=e.stack;this.componentDidCatch(e.value,{componentStack:l!==null?l:""})}),s}function Gd(t,e,s){var n=t.pingCache;if(n===null){n=t.pingCache=new yx;var a=new Set;n.set(e,a)}else a=n.get(e),a===void 0&&(a=new Set,n.set(e,a));a.has(s)||(a.add(s),t=Lx.bind(null,t,e,s),e.then(t,t))}function Jd(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Yd(t,e,s,n,a){return t.mode&1?(t.flags|=65536,t.lanes=a,t):(t===e?t.flags|=65536:(t.flags|=128,s.flags|=131072,s.flags&=-52805,s.tag===1&&(s.alternate===null?s.tag=17:(e=zt(-1,1),e.tag=2,ds(s,e,1))),s.lanes|=1),t)}var wx=Kt.ReactCurrentOwner,Ue=!1;function Re(t,e,s,n){e.child=t===null?hm(e,null,s,n):Nr(e,t.child,s,n)}function Xd(t,e,s,n,a){s=s.render;var i=e.ref;return vr(e,a),n=Nc(t,e,s,n,i,a),s=kc(),t!==null&&!Ue?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~a,Wt(t,e,a)):(oe&&s&&uc(e),e.flags|=1,Re(t,e,n,a),e.child)}function Zd(t,e,s,n,a){if(t===null){var i=s.type;return typeof i=="function"&&!Dc(i)&&i.defaultProps===void 0&&s.compare===null&&s.defaultProps===void 0?(e.tag=15,e.type=i,$m(t,e,i,n,a)):(t=Ia(s.type,null,n,e,e.mode,a),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&a)){var l=i.memoizedProps;if(s=s.compare,s=s!==null?s:jn,s(l,n)&&t.ref===e.ref)return Wt(t,e,a)}return e.flags|=1,t=ms(i,n),t.ref=e.ref,t.return=e,e.child=t}function $m(t,e,s,n,a){if(t!==null){var i=t.memoizedProps;if(jn(i,n)&&t.ref===e.ref)if(Ue=!1,e.pendingProps=n=i,(t.lanes&a)!==0)t.flags&131072&&(Ue=!0);else return e.lanes=t.lanes,Wt(t,e,a)}return ho(t,e,s,n,a)}function zm(t,e,s){var n=e.pendingProps,a=n.children,i=t!==null?t.memoizedState:null;if(n.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},ae(ur,Ve),Ve|=s;else{if(!(s&1073741824))return t=i!==null?i.baseLanes|s:s,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,ae(ur,Ve),Ve|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=i!==null?i.baseLanes:s,ae(ur,Ve),Ve|=n}else i!==null?(n=i.baseLanes|s,e.memoizedState=null):n=s,ae(ur,Ve),Ve|=n;return Re(t,e,a,s),e.child}function Fm(t,e){var s=e.ref;(t===null&&s!==null||t!==null&&t.ref!==s)&&(e.flags|=512,e.flags|=2097152)}function ho(t,e,s,n,a){var i=Be(s)?Rs:Le.current;return i=br(e,i),vr(e,a),s=Nc(t,e,s,n,i,a),n=kc(),t!==null&&!Ue?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~a,Wt(t,e,a)):(oe&&n&&uc(e),e.flags|=1,Re(t,e,s,a),e.child)}function eu(t,e,s,n,a){if(Be(s)){var i=!0;Va(e)}else i=!1;if(vr(e,a),e.stateNode===null)Ca(t,e),Rm(e,s,n),co(e,s,n,a),n=!0;else if(t===null){var l=e.stateNode,o=e.memoizedProps;l.props=o;var c=l.context,d=s.contextType;typeof d=="object"&&d!==null?d=nt(d):(d=Be(s)?Rs:Le.current,d=br(e,d));var u=s.getDerivedStateFromProps,m=typeof u=="function"||typeof l.getSnapshotBeforeUpdate=="function";m||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(o!==n||c!==d)&&Qd(e,l,n,d),Zt=!1;var h=e.memoizedState;l.state=h,Ja(e,n,l,a),c=e.memoizedState,o!==n||h!==c||qe.current||Zt?(typeof u=="function"&&(oo(e,s,u,n),c=e.memoizedState),(o=Zt||Kd(e,s,o,n,h,c,d))?(m||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount()),typeof l.componentDidMount=="function"&&(e.flags|=4194308)):(typeof l.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=c),l.props=n,l.state=c,l.context=d,n=o):(typeof l.componentDidMount=="function"&&(e.flags|=4194308),n=!1)}else{l=e.stateNode,fm(t,e),o=e.memoizedProps,d=e.type===e.elementType?o:ht(e.type,o),l.props=d,m=e.pendingProps,h=l.context,c=s.contextType,typeof c=="object"&&c!==null?c=nt(c):(c=Be(s)?Rs:Le.current,c=br(e,c));var y=s.getDerivedStateFromProps;(u=typeof y=="function"||typeof l.getSnapshotBeforeUpdate=="function")||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(o!==m||h!==c)&&Qd(e,l,n,c),Zt=!1,h=e.memoizedState,l.state=h,Ja(e,n,l,a);var g=e.memoizedState;o!==m||h!==g||qe.current||Zt?(typeof y=="function"&&(oo(e,s,y,n),g=e.memoizedState),(d=Zt||Kd(e,s,d,n,h,g,c)||!1)?(u||typeof l.UNSAFE_componentWillUpdate!="function"&&typeof l.componentWillUpdate!="function"||(typeof l.componentWillUpdate=="function"&&l.componentWillUpdate(n,g,c),typeof l.UNSAFE_componentWillUpdate=="function"&&l.UNSAFE_componentWillUpdate(n,g,c)),typeof l.componentDidUpdate=="function"&&(e.flags|=4),typeof l.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof l.componentDidUpdate!="function"||o===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=g),l.props=n,l.state=g,l.context=c,n=d):(typeof l.componentDidUpdate!="function"||o===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),n=!1)}return mo(t,e,s,n,i,a)}function mo(t,e,s,n,a,i){Fm(t,e);var l=(e.flags&128)!==0;if(!n&&!l)return a&&zd(e,s,!1),Wt(t,e,i);n=e.stateNode,wx.current=e;var o=l&&typeof s.getDerivedStateFromError!="function"?null:n.render();return e.flags|=1,t!==null&&l?(e.child=Nr(e,t.child,null,i),e.child=Nr(e,null,o,i)):Re(t,e,o,i),e.memoizedState=n.state,a&&zd(e,s,!0),e.child}function Um(t){var e=t.stateNode;e.pendingContext?$d(t,e.pendingContext,e.pendingContext!==e.context):e.context&&$d(t,e.context,!1),yc(t,e.containerInfo)}function tu(t,e,s,n,a){return jr(),mc(a),e.flags|=256,Re(t,e,s,n),e.child}var fo={dehydrated:null,treeContext:null,retryLane:0};function po(t){return{baseLanes:t,cachePool:null,transitions:null}}function qm(t,e,s){var n=e.pendingProps,a=ue.current,i=!1,l=(e.flags&128)!==0,o;if((o=l)||(o=t!==null&&t.memoizedState===null?!1:(a&2)!==0),o?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(a|=1),ae(ue,a&1),t===null)return io(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(l=n.children,t=n.fallback,i?(n=e.mode,i=e.child,l={mode:"hidden",children:l},!(n&1)&&i!==null?(i.childLanes=0,i.pendingProps=l):i=ji(l,n,0,null),t=Ds(t,n,s,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=po(s),e.memoizedState=fo,t):Cc(e,l));if(a=t.memoizedState,a!==null&&(o=a.dehydrated,o!==null))return bx(t,e,l,n,o,a,s);if(i){i=n.fallback,l=e.mode,a=t.child,o=a.sibling;var c={mode:"hidden",children:n.children};return!(l&1)&&e.child!==a?(n=e.child,n.childLanes=0,n.pendingProps=c,e.deletions=null):(n=ms(a,c),n.subtreeFlags=a.subtreeFlags&14680064),o!==null?i=ms(o,i):(i=Ds(i,l,s,null),i.flags|=2),i.return=e,n.return=e,n.sibling=i,e.child=n,n=i,i=e.child,l=t.child.memoizedState,l=l===null?po(s):{baseLanes:l.baseLanes|s,cachePool:null,transitions:l.transitions},i.memoizedState=l,i.childLanes=t.childLanes&~s,e.memoizedState=fo,n}return i=t.child,t=i.sibling,n=ms(i,{mode:"visible",children:n.children}),!(e.mode&1)&&(n.lanes=s),n.return=e,n.sibling=null,t!==null&&(s=e.deletions,s===null?(e.deletions=[t],e.flags|=16):s.push(t)),e.child=n,e.memoizedState=null,n}function Cc(t,e){return e=ji({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function ca(t,e,s,n){return n!==null&&mc(n),Nr(e,t.child,null,s),t=Cc(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function bx(t,e,s,n,a,i,l){if(s)return e.flags&256?(e.flags&=-257,n=ll(Error(A(422))),ca(t,e,l,n)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=n.fallback,a=e.mode,n=ji({mode:"visible",children:n.children},a,0,null),i=Ds(i,a,l,null),i.flags|=2,n.return=e,i.return=e,n.sibling=i,e.child=n,e.mode&1&&Nr(e,t.child,null,l),e.child.memoizedState=po(l),e.memoizedState=fo,i);if(!(e.mode&1))return ca(t,e,l,null);if(a.data==="$!"){if(n=a.nextSibling&&a.nextSibling.dataset,n)var o=n.dgst;return n=o,i=Error(A(419)),n=ll(i,n,void 0),ca(t,e,l,n)}if(o=(l&t.childLanes)!==0,Ue||o){if(n=ke,n!==null){switch(l&-l){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(n.suspendedLanes|l)?0:a,a!==0&&a!==i.retryLane&&(i.retryLane=a,Bt(t,a),gt(n,t,a,-1))}return Lc(),n=ll(Error(A(421))),ca(t,e,l,n)}return a.data==="$?"?(e.flags|=128,e.child=t.child,e=Dx.bind(null,t),a._reactRetry=e,null):(t=i.treeContext,He=cs(a.nextSibling),Ke=e,oe=!0,pt=null,t!==null&&(Ze[et++]=Mt,Ze[et++]=$t,Ze[et++]=Os,Mt=t.id,$t=t.overflow,Os=e),e=Cc(e,n.children),e.flags|=4096,e)}function su(t,e,s){t.lanes|=e;var n=t.alternate;n!==null&&(n.lanes|=e),lo(t.return,e,s)}function ol(t,e,s,n,a){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:s,tailMode:a}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=n,i.tail=s,i.tailMode=a)}function Bm(t,e,s){var n=e.pendingProps,a=n.revealOrder,i=n.tail;if(Re(t,e,n.children,s),n=ue.current,n&2)n=n&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&su(t,s,e);else if(t.tag===19)su(t,s,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}n&=1}if(ae(ue,n),!(e.mode&1))e.memoizedState=null;else switch(a){case"forwards":for(s=e.child,a=null;s!==null;)t=s.alternate,t!==null&&Ya(t)===null&&(a=s),s=s.sibling;s=a,s===null?(a=e.child,e.child=null):(a=s.sibling,s.sibling=null),ol(e,!1,a,s,i);break;case"backwards":for(s=null,a=e.child,e.child=null;a!==null;){if(t=a.alternate,t!==null&&Ya(t)===null){e.child=a;break}t=a.sibling,a.sibling=s,s=a,a=t}ol(e,!0,s,null,i);break;case"together":ol(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Ca(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Wt(t,e,s){if(t!==null&&(e.dependencies=t.dependencies),$s|=e.lanes,!(s&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(A(153));if(e.child!==null){for(t=e.child,s=ms(t,t.pendingProps),e.child=s,s.return=e;t.sibling!==null;)t=t.sibling,s=s.sibling=ms(t,t.pendingProps),s.return=e;s.sibling=null}return e.child}function jx(t,e,s){switch(e.tag){case 3:Um(e),jr();break;case 5:pm(e);break;case 1:Be(e.type)&&Va(e);break;case 4:yc(e,e.stateNode.containerInfo);break;case 10:var n=e.type._context,a=e.memoizedProps.value;ae(Qa,n._currentValue),n._currentValue=a;break;case 13:if(n=e.memoizedState,n!==null)return n.dehydrated!==null?(ae(ue,ue.current&1),e.flags|=128,null):s&e.child.childLanes?qm(t,e,s):(ae(ue,ue.current&1),t=Wt(t,e,s),t!==null?t.sibling:null);ae(ue,ue.current&1);break;case 19:if(n=(s&e.childLanes)!==0,t.flags&128){if(n)return Bm(t,e,s);e.flags|=128}if(a=e.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),ae(ue,ue.current),n)break;return null;case 22:case 23:return e.lanes=0,zm(t,e,s)}return Wt(t,e,s)}var Wm,xo,Vm,Hm;Wm=function(t,e){for(var s=e.child;s!==null;){if(s.tag===5||s.tag===6)t.appendChild(s.stateNode);else if(s.tag!==4&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===e)break;for(;s.sibling===null;){if(s.return===null||s.return===e)return;s=s.return}s.sibling.return=s.return,s=s.sibling}};xo=function(){};Vm=function(t,e,s,n){var a=t.memoizedProps;if(a!==n){t=e.stateNode,As(Tt.current);var i=null;switch(s){case"input":a=Ml(t,a),n=Ml(t,n),i=[];break;case"select":a=me({},a,{value:void 0}),n=me({},n,{value:void 0}),i=[];break;case"textarea":a=Fl(t,a),n=Fl(t,n),i=[];break;default:typeof a.onClick!="function"&&typeof n.onClick=="function"&&(t.onclick=Ba)}ql(s,n);var l;s=null;for(d in a)if(!n.hasOwnProperty(d)&&a.hasOwnProperty(d)&&a[d]!=null)if(d==="style"){var o=a[d];for(l in o)o.hasOwnProperty(l)&&(s||(s={}),s[l]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(pn.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in n){var c=n[d];if(o=a!=null?a[d]:void 0,n.hasOwnProperty(d)&&c!==o&&(c!=null||o!=null))if(d==="style")if(o){for(l in o)!o.hasOwnProperty(l)||c&&c.hasOwnProperty(l)||(s||(s={}),s[l]="");for(l in c)c.hasOwnProperty(l)&&o[l]!==c[l]&&(s||(s={}),s[l]=c[l])}else s||(i||(i=[]),i.push(d,s)),s=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,o=o?o.__html:void 0,c!=null&&o!==c&&(i=i||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(pn.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&ie("scroll",t),i||o===c||(i=[])):(i=i||[]).push(d,c))}s&&(i=i||[]).push("style",s);var d=i;(e.updateQueue=d)&&(e.flags|=4)}};Hm=function(t,e,s,n){s!==n&&(e.flags|=4)};function Vr(t,e){if(!oe)switch(t.tailMode){case"hidden":e=t.tail;for(var s=null;e!==null;)e.alternate!==null&&(s=e),e=e.sibling;s===null?t.tail=null:s.sibling=null;break;case"collapsed":s=t.tail;for(var n=null;s!==null;)s.alternate!==null&&(n=s),s=s.sibling;n===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:n.sibling=null}}function Ie(t){var e=t.alternate!==null&&t.alternate.child===t.child,s=0,n=0;if(e)for(var a=t.child;a!==null;)s|=a.lanes|a.childLanes,n|=a.subtreeFlags&14680064,n|=a.flags&14680064,a.return=t,a=a.sibling;else for(a=t.child;a!==null;)s|=a.lanes|a.childLanes,n|=a.subtreeFlags,n|=a.flags,a.return=t,a=a.sibling;return t.subtreeFlags|=n,t.childLanes=s,e}function Nx(t,e,s){var n=e.pendingProps;switch(hc(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ie(e),null;case 1:return Be(e.type)&&Wa(),Ie(e),null;case 3:return n=e.stateNode,kr(),le(qe),le(Le),bc(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(la(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,pt!==null&&(ko(pt),pt=null))),xo(t,e),Ie(e),null;case 5:wc(e);var a=As(Cn.current);if(s=e.type,t!==null&&e.stateNode!=null)Vm(t,e,s,n,a),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!n){if(e.stateNode===null)throw Error(A(166));return Ie(e),null}if(t=As(Tt.current),la(e)){n=e.stateNode,s=e.type;var i=e.memoizedProps;switch(n[Ct]=e,n[_n]=i,t=(e.mode&1)!==0,s){case"dialog":ie("cancel",n),ie("close",n);break;case"iframe":case"object":case"embed":ie("load",n);break;case"video":case"audio":for(a=0;a<Xr.length;a++)ie(Xr[a],n);break;case"source":ie("error",n);break;case"img":case"image":case"link":ie("error",n),ie("load",n);break;case"details":ie("toggle",n);break;case"input":ud(n,i),ie("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!i.multiple},ie("invalid",n);break;case"textarea":md(n,i),ie("invalid",n)}ql(s,i),a=null;for(var l in i)if(i.hasOwnProperty(l)){var o=i[l];l==="children"?typeof o=="string"?n.textContent!==o&&(i.suppressHydrationWarning!==!0&&ia(n.textContent,o,t),a=["children",o]):typeof o=="number"&&n.textContent!==""+o&&(i.suppressHydrationWarning!==!0&&ia(n.textContent,o,t),a=["children",""+o]):pn.hasOwnProperty(l)&&o!=null&&l==="onScroll"&&ie("scroll",n)}switch(s){case"input":Xn(n),hd(n,i,!0);break;case"textarea":Xn(n),fd(n);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(n.onclick=Ba)}n=a,e.updateQueue=n,n!==null&&(e.flags|=4)}else{l=a.nodeType===9?a:a.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=wh(s)),t==="http://www.w3.org/1999/xhtml"?s==="script"?(t=l.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof n.is=="string"?t=l.createElement(s,{is:n.is}):(t=l.createElement(s),s==="select"&&(l=t,n.multiple?l.multiple=!0:n.size&&(l.size=n.size))):t=l.createElementNS(t,s),t[Ct]=e,t[_n]=n,Wm(t,e,!1,!1),e.stateNode=t;e:{switch(l=Bl(s,n),s){case"dialog":ie("cancel",t),ie("close",t),a=n;break;case"iframe":case"object":case"embed":ie("load",t),a=n;break;case"video":case"audio":for(a=0;a<Xr.length;a++)ie(Xr[a],t);a=n;break;case"source":ie("error",t),a=n;break;case"img":case"image":case"link":ie("error",t),ie("load",t),a=n;break;case"details":ie("toggle",t),a=n;break;case"input":ud(t,n),a=Ml(t,n),ie("invalid",t);break;case"option":a=n;break;case"select":t._wrapperState={wasMultiple:!!n.multiple},a=me({},n,{value:void 0}),ie("invalid",t);break;case"textarea":md(t,n),a=Fl(t,n),ie("invalid",t);break;default:a=n}ql(s,a),o=a;for(i in o)if(o.hasOwnProperty(i)){var c=o[i];i==="style"?Nh(t,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&bh(t,c)):i==="children"?typeof c=="string"?(s!=="textarea"||c!=="")&&xn(t,c):typeof c=="number"&&xn(t,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(pn.hasOwnProperty(i)?c!=null&&i==="onScroll"&&ie("scroll",t):c!=null&&Yo(t,i,c,l))}switch(s){case"input":Xn(t),hd(t,n,!1);break;case"textarea":Xn(t),fd(t);break;case"option":n.value!=null&&t.setAttribute("value",""+fs(n.value));break;case"select":t.multiple=!!n.multiple,i=n.value,i!=null?fr(t,!!n.multiple,i,!1):n.defaultValue!=null&&fr(t,!!n.multiple,n.defaultValue,!0);break;default:typeof a.onClick=="function"&&(t.onclick=Ba)}switch(s){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Ie(e),null;case 6:if(t&&e.stateNode!=null)Hm(t,e,t.memoizedProps,n);else{if(typeof n!="string"&&e.stateNode===null)throw Error(A(166));if(s=As(Cn.current),As(Tt.current),la(e)){if(n=e.stateNode,s=e.memoizedProps,n[Ct]=e,(i=n.nodeValue!==s)&&(t=Ke,t!==null))switch(t.tag){case 3:ia(n.nodeValue,s,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&ia(n.nodeValue,s,(t.mode&1)!==0)}i&&(e.flags|=4)}else n=(s.nodeType===9?s:s.ownerDocument).createTextNode(n),n[Ct]=e,e.stateNode=n}return Ie(e),null;case 13:if(le(ue),n=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(oe&&He!==null&&e.mode&1&&!(e.flags&128))dm(),jr(),e.flags|=98560,i=!1;else if(i=la(e),n!==null&&n.dehydrated!==null){if(t===null){if(!i)throw Error(A(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(A(317));i[Ct]=e}else jr(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Ie(e),i=!1}else pt!==null&&(ko(pt),pt=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=s,e):(n=n!==null,n!==(t!==null&&t.memoizedState!==null)&&n&&(e.child.flags|=8192,e.mode&1&&(t===null||ue.current&1?je===0&&(je=3):Lc())),e.updateQueue!==null&&(e.flags|=4),Ie(e),null);case 4:return kr(),xo(t,e),t===null&&Nn(e.stateNode.containerInfo),Ie(e),null;case 10:return xc(e.type._context),Ie(e),null;case 17:return Be(e.type)&&Wa(),Ie(e),null;case 19:if(le(ue),i=e.memoizedState,i===null)return Ie(e),null;if(n=(e.flags&128)!==0,l=i.rendering,l===null)if(n)Vr(i,!1);else{if(je!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(l=Ya(t),l!==null){for(e.flags|=128,Vr(i,!1),n=l.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),e.subtreeFlags=0,n=s,s=e.child;s!==null;)i=s,t=n,i.flags&=14680066,l=i.alternate,l===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=l.childLanes,i.lanes=l.lanes,i.child=l.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=l.memoizedProps,i.memoizedState=l.memoizedState,i.updateQueue=l.updateQueue,i.type=l.type,t=l.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),s=s.sibling;return ae(ue,ue.current&1|2),e.child}t=t.sibling}i.tail!==null&&xe()>Sr&&(e.flags|=128,n=!0,Vr(i,!1),e.lanes=4194304)}else{if(!n)if(t=Ya(l),t!==null){if(e.flags|=128,n=!0,s=t.updateQueue,s!==null&&(e.updateQueue=s,e.flags|=4),Vr(i,!0),i.tail===null&&i.tailMode==="hidden"&&!l.alternate&&!oe)return Ie(e),null}else 2*xe()-i.renderingStartTime>Sr&&s!==1073741824&&(e.flags|=128,n=!0,Vr(i,!1),e.lanes=4194304);i.isBackwards?(l.sibling=e.child,e.child=l):(s=i.last,s!==null?s.sibling=l:e.child=l,i.last=l)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=xe(),e.sibling=null,s=ue.current,ae(ue,n?s&1|2:s&1),e):(Ie(e),null);case 22:case 23:return Ac(),n=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==n&&(e.flags|=8192),n&&e.mode&1?Ve&1073741824&&(Ie(e),e.subtreeFlags&6&&(e.flags|=8192)):Ie(e),null;case 24:return null;case 25:return null}throw Error(A(156,e.tag))}function kx(t,e){switch(hc(e),e.tag){case 1:return Be(e.type)&&Wa(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return kr(),le(qe),le(Le),bc(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return wc(e),null;case 13:if(le(ue),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(A(340));jr()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return le(ue),null;case 4:return kr(),null;case 10:return xc(e.type._context),null;case 22:case 23:return Ac(),null;case 24:return null;default:return null}}var da=!1,Ae=!1,_x=typeof WeakSet=="function"?WeakSet:Set,$=null;function dr(t,e){var s=t.ref;if(s!==null)if(typeof s=="function")try{s(null)}catch(n){pe(t,e,n)}else s.current=null}function go(t,e,s){try{s()}catch(n){pe(t,e,n)}}var ru=!1;function Sx(t,e){if(Zl=Fa,t=Yh(),dc(t)){if("selectionStart"in t)var s={start:t.selectionStart,end:t.selectionEnd};else e:{s=(s=t.ownerDocument)&&s.defaultView||window;var n=s.getSelection&&s.getSelection();if(n&&n.rangeCount!==0){s=n.anchorNode;var a=n.anchorOffset,i=n.focusNode;n=n.focusOffset;try{s.nodeType,i.nodeType}catch{s=null;break e}var l=0,o=-1,c=-1,d=0,u=0,m=t,h=null;t:for(;;){for(var y;m!==s||a!==0&&m.nodeType!==3||(o=l+a),m!==i||n!==0&&m.nodeType!==3||(c=l+n),m.nodeType===3&&(l+=m.nodeValue.length),(y=m.firstChild)!==null;)h=m,m=y;for(;;){if(m===t)break t;if(h===s&&++d===a&&(o=l),h===i&&++u===n&&(c=l),(y=m.nextSibling)!==null)break;m=h,h=m.parentNode}m=y}s=o===-1||c===-1?null:{start:o,end:c}}else s=null}s=s||{start:0,end:0}}else s=null;for(eo={focusedElem:t,selectionRange:s},Fa=!1,$=e;$!==null;)if(e=$,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,$=t;else for(;$!==null;){e=$;try{var g=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var b=g.memoizedProps,x=g.memoizedState,p=e.stateNode,f=p.getSnapshotBeforeUpdate(e.elementType===e.type?b:ht(e.type,b),x);p.__reactInternalSnapshotBeforeUpdate=f}break;case 3:var w=e.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(A(163))}}catch(j){pe(e,e.return,j)}if(t=e.sibling,t!==null){t.return=e.return,$=t;break}$=e.return}return g=ru,ru=!1,g}function ln(t,e,s){var n=e.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var a=n=n.next;do{if((a.tag&t)===t){var i=a.destroy;a.destroy=void 0,i!==void 0&&go(e,s,i)}a=a.next}while(a!==n)}}function wi(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var s=e=e.next;do{if((s.tag&t)===t){var n=s.create;s.destroy=n()}s=s.next}while(s!==e)}}function vo(t){var e=t.ref;if(e!==null){var s=t.stateNode;switch(t.tag){case 5:t=s;break;default:t=s}typeof e=="function"?e(t):e.current=t}}function Km(t){var e=t.alternate;e!==null&&(t.alternate=null,Km(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Ct],delete e[_n],delete e[ro],delete e[ox],delete e[cx])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Qm(t){return t.tag===5||t.tag===3||t.tag===4}function nu(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Qm(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function yo(t,e,s){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?s.nodeType===8?s.parentNode.insertBefore(t,e):s.insertBefore(t,e):(s.nodeType===8?(e=s.parentNode,e.insertBefore(t,s)):(e=s,e.appendChild(t)),s=s._reactRootContainer,s!=null||e.onclick!==null||(e.onclick=Ba));else if(n!==4&&(t=t.child,t!==null))for(yo(t,e,s),t=t.sibling;t!==null;)yo(t,e,s),t=t.sibling}function wo(t,e,s){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?s.insertBefore(t,e):s.appendChild(t);else if(n!==4&&(t=t.child,t!==null))for(wo(t,e,s),t=t.sibling;t!==null;)wo(t,e,s),t=t.sibling}var _e=null,mt=!1;function Gt(t,e,s){for(s=s.child;s!==null;)Gm(t,e,s),s=s.sibling}function Gm(t,e,s){if(Et&&typeof Et.onCommitFiberUnmount=="function")try{Et.onCommitFiberUnmount(hi,s)}catch{}switch(s.tag){case 5:Ae||dr(s,e);case 6:var n=_e,a=mt;_e=null,Gt(t,e,s),_e=n,mt=a,_e!==null&&(mt?(t=_e,s=s.stateNode,t.nodeType===8?t.parentNode.removeChild(s):t.removeChild(s)):_e.removeChild(s.stateNode));break;case 18:_e!==null&&(mt?(t=_e,s=s.stateNode,t.nodeType===8?tl(t.parentNode,s):t.nodeType===1&&tl(t,s),wn(t)):tl(_e,s.stateNode));break;case 4:n=_e,a=mt,_e=s.stateNode.containerInfo,mt=!0,Gt(t,e,s),_e=n,mt=a;break;case 0:case 11:case 14:case 15:if(!Ae&&(n=s.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){a=n=n.next;do{var i=a,l=i.destroy;i=i.tag,l!==void 0&&(i&2||i&4)&&go(s,e,l),a=a.next}while(a!==n)}Gt(t,e,s);break;case 1:if(!Ae&&(dr(s,e),n=s.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=s.memoizedProps,n.state=s.memoizedState,n.componentWillUnmount()}catch(o){pe(s,e,o)}Gt(t,e,s);break;case 21:Gt(t,e,s);break;case 22:s.mode&1?(Ae=(n=Ae)||s.memoizedState!==null,Gt(t,e,s),Ae=n):Gt(t,e,s);break;default:Gt(t,e,s)}}function au(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var s=t.stateNode;s===null&&(s=t.stateNode=new _x),e.forEach(function(n){var a=Rx.bind(null,t,n);s.has(n)||(s.add(n),n.then(a,a))})}}function dt(t,e){var s=e.deletions;if(s!==null)for(var n=0;n<s.length;n++){var a=s[n];try{var i=t,l=e,o=l;e:for(;o!==null;){switch(o.tag){case 5:_e=o.stateNode,mt=!1;break e;case 3:_e=o.stateNode.containerInfo,mt=!0;break e;case 4:_e=o.stateNode.containerInfo,mt=!0;break e}o=o.return}if(_e===null)throw Error(A(160));Gm(i,l,a),_e=null,mt=!1;var c=a.alternate;c!==null&&(c.return=null),a.return=null}catch(d){pe(a,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Jm(e,t),e=e.sibling}function Jm(t,e){var s=t.alternate,n=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(dt(e,t),kt(t),n&4){try{ln(3,t,t.return),wi(3,t)}catch(b){pe(t,t.return,b)}try{ln(5,t,t.return)}catch(b){pe(t,t.return,b)}}break;case 1:dt(e,t),kt(t),n&512&&s!==null&&dr(s,s.return);break;case 5:if(dt(e,t),kt(t),n&512&&s!==null&&dr(s,s.return),t.flags&32){var a=t.stateNode;try{xn(a,"")}catch(b){pe(t,t.return,b)}}if(n&4&&(a=t.stateNode,a!=null)){var i=t.memoizedProps,l=s!==null?s.memoizedProps:i,o=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{o==="input"&&i.type==="radio"&&i.name!=null&&vh(a,i),Bl(o,l);var d=Bl(o,i);for(l=0;l<c.length;l+=2){var u=c[l],m=c[l+1];u==="style"?Nh(a,m):u==="dangerouslySetInnerHTML"?bh(a,m):u==="children"?xn(a,m):Yo(a,u,m,d)}switch(o){case"input":$l(a,i);break;case"textarea":yh(a,i);break;case"select":var h=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!i.multiple;var y=i.value;y!=null?fr(a,!!i.multiple,y,!1):h!==!!i.multiple&&(i.defaultValue!=null?fr(a,!!i.multiple,i.defaultValue,!0):fr(a,!!i.multiple,i.multiple?[]:"",!1))}a[_n]=i}catch(b){pe(t,t.return,b)}}break;case 6:if(dt(e,t),kt(t),n&4){if(t.stateNode===null)throw Error(A(162));a=t.stateNode,i=t.memoizedProps;try{a.nodeValue=i}catch(b){pe(t,t.return,b)}}break;case 3:if(dt(e,t),kt(t),n&4&&s!==null&&s.memoizedState.isDehydrated)try{wn(e.containerInfo)}catch(b){pe(t,t.return,b)}break;case 4:dt(e,t),kt(t);break;case 13:dt(e,t),kt(t),a=t.child,a.flags&8192&&(i=a.memoizedState!==null,a.stateNode.isHidden=i,!i||a.alternate!==null&&a.alternate.memoizedState!==null||(Ic=xe())),n&4&&au(t);break;case 22:if(u=s!==null&&s.memoizedState!==null,t.mode&1?(Ae=(d=Ae)||u,dt(e,t),Ae=d):dt(e,t),kt(t),n&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!u&&t.mode&1)for($=t,u=t.child;u!==null;){for(m=$=u;$!==null;){switch(h=$,y=h.child,h.tag){case 0:case 11:case 14:case 15:ln(4,h,h.return);break;case 1:dr(h,h.return);var g=h.stateNode;if(typeof g.componentWillUnmount=="function"){n=h,s=h.return;try{e=n,g.props=e.memoizedProps,g.state=e.memoizedState,g.componentWillUnmount()}catch(b){pe(n,s,b)}}break;case 5:dr(h,h.return);break;case 22:if(h.memoizedState!==null){lu(m);continue}}y!==null?(y.return=h,$=y):lu(m)}u=u.sibling}e:for(u=null,m=t;;){if(m.tag===5){if(u===null){u=m;try{a=m.stateNode,d?(i=a.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(o=m.stateNode,c=m.memoizedProps.style,l=c!=null&&c.hasOwnProperty("display")?c.display:null,o.style.display=jh("display",l))}catch(b){pe(t,t.return,b)}}}else if(m.tag===6){if(u===null)try{m.stateNode.nodeValue=d?"":m.memoizedProps}catch(b){pe(t,t.return,b)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===t)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===t)break e;for(;m.sibling===null;){if(m.return===null||m.return===t)break e;u===m&&(u=null),m=m.return}u===m&&(u=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:dt(e,t),kt(t),n&4&&au(t);break;case 21:break;default:dt(e,t),kt(t)}}function kt(t){var e=t.flags;if(e&2){try{e:{for(var s=t.return;s!==null;){if(Qm(s)){var n=s;break e}s=s.return}throw Error(A(160))}switch(n.tag){case 5:var a=n.stateNode;n.flags&32&&(xn(a,""),n.flags&=-33);var i=nu(t);wo(t,i,a);break;case 3:case 4:var l=n.stateNode.containerInfo,o=nu(t);yo(t,o,l);break;default:throw Error(A(161))}}catch(c){pe(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Cx(t,e,s){$=t,Ym(t)}function Ym(t,e,s){for(var n=(t.mode&1)!==0;$!==null;){var a=$,i=a.child;if(a.tag===22&&n){var l=a.memoizedState!==null||da;if(!l){var o=a.alternate,c=o!==null&&o.memoizedState!==null||Ae;o=da;var d=Ae;if(da=l,(Ae=c)&&!d)for($=a;$!==null;)l=$,c=l.child,l.tag===22&&l.memoizedState!==null?ou(a):c!==null?(c.return=l,$=c):ou(a);for(;i!==null;)$=i,Ym(i),i=i.sibling;$=a,da=o,Ae=d}iu(t)}else a.subtreeFlags&8772&&i!==null?(i.return=a,$=i):iu(t)}}function iu(t){for(;$!==null;){var e=$;if(e.flags&8772){var s=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Ae||wi(5,e);break;case 1:var n=e.stateNode;if(e.flags&4&&!Ae)if(s===null)n.componentDidMount();else{var a=e.elementType===e.type?s.memoizedProps:ht(e.type,s.memoizedProps);n.componentDidUpdate(a,s.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&Wd(e,i,n);break;case 3:var l=e.updateQueue;if(l!==null){if(s=null,e.child!==null)switch(e.child.tag){case 5:s=e.child.stateNode;break;case 1:s=e.child.stateNode}Wd(e,l,s)}break;case 5:var o=e.stateNode;if(s===null&&e.flags&4){s=o;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&s.focus();break;case"img":c.src&&(s.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var u=d.memoizedState;if(u!==null){var m=u.dehydrated;m!==null&&wn(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(A(163))}Ae||e.flags&512&&vo(e)}catch(h){pe(e,e.return,h)}}if(e===t){$=null;break}if(s=e.sibling,s!==null){s.return=e.return,$=s;break}$=e.return}}function lu(t){for(;$!==null;){var e=$;if(e===t){$=null;break}var s=e.sibling;if(s!==null){s.return=e.return,$=s;break}$=e.return}}function ou(t){for(;$!==null;){var e=$;try{switch(e.tag){case 0:case 11:case 15:var s=e.return;try{wi(4,e)}catch(c){pe(e,s,c)}break;case 1:var n=e.stateNode;if(typeof n.componentDidMount=="function"){var a=e.return;try{n.componentDidMount()}catch(c){pe(e,a,c)}}var i=e.return;try{vo(e)}catch(c){pe(e,i,c)}break;case 5:var l=e.return;try{vo(e)}catch(c){pe(e,l,c)}}}catch(c){pe(e,e.return,c)}if(e===t){$=null;break}var o=e.sibling;if(o!==null){o.return=e.return,$=o;break}$=e.return}}var Ex=Math.ceil,ei=Kt.ReactCurrentDispatcher,Ec=Kt.ReactCurrentOwner,st=Kt.ReactCurrentBatchConfig,J=0,ke=null,ge=null,Ce=0,Ve=0,ur=ys(0),je=0,Pn=null,$s=0,bi=0,Tc=0,on=null,ze=null,Ic=0,Sr=1/0,Dt=null,ti=!1,bo=null,us=null,ua=!1,ns=null,si=0,cn=0,jo=null,Ea=-1,Ta=0;function Oe(){return J&6?xe():Ea!==-1?Ea:Ea=xe()}function hs(t){return t.mode&1?J&2&&Ce!==0?Ce&-Ce:ux.transition!==null?(Ta===0&&(Ta=Rh()),Ta):(t=Z,t!==0||(t=window.event,t=t===void 0?16:qh(t.type)),t):1}function gt(t,e,s,n){if(50<cn)throw cn=0,jo=null,Error(A(185));$n(t,s,n),(!(J&2)||t!==ke)&&(t===ke&&(!(J&2)&&(bi|=s),je===4&&ts(t,Ce)),We(t,n),s===1&&J===0&&!(e.mode&1)&&(Sr=xe()+500,gi&&ws()))}function We(t,e){var s=t.callbackNode;up(t,e);var n=za(t,t===ke?Ce:0);if(n===0)s!==null&&gd(s),t.callbackNode=null,t.callbackPriority=0;else if(e=n&-n,t.callbackPriority!==e){if(s!=null&&gd(s),e===1)t.tag===0?dx(cu.bind(null,t)):lm(cu.bind(null,t)),ix(function(){!(J&6)&&ws()}),s=null;else{switch(Oh(n)){case 1:s=sc;break;case 4:s=Lh;break;case 16:s=$a;break;case 536870912:s=Dh;break;default:s=$a}s=af(s,Xm.bind(null,t))}t.callbackPriority=e,t.callbackNode=s}}function Xm(t,e){if(Ea=-1,Ta=0,J&6)throw Error(A(327));var s=t.callbackNode;if(yr()&&t.callbackNode!==s)return null;var n=za(t,t===ke?Ce:0);if(n===0)return null;if(n&30||n&t.expiredLanes||e)e=ri(t,n);else{e=n;var a=J;J|=2;var i=ef();(ke!==t||Ce!==e)&&(Dt=null,Sr=xe()+500,Ls(t,e));do try{Px();break}catch(o){Zm(t,o)}while(!0);pc(),ei.current=i,J=a,ge!==null?e=0:(ke=null,Ce=0,e=je)}if(e!==0){if(e===2&&(a=Ql(t),a!==0&&(n=a,e=No(t,a))),e===1)throw s=Pn,Ls(t,0),ts(t,n),We(t,xe()),s;if(e===6)ts(t,n);else{if(a=t.current.alternate,!(n&30)&&!Tx(a)&&(e=ri(t,n),e===2&&(i=Ql(t),i!==0&&(n=i,e=No(t,i))),e===1))throw s=Pn,Ls(t,0),ts(t,n),We(t,xe()),s;switch(t.finishedWork=a,t.finishedLanes=n,e){case 0:case 1:throw Error(A(345));case 2:Ss(t,ze,Dt);break;case 3:if(ts(t,n),(n&130023424)===n&&(e=Ic+500-xe(),10<e)){if(za(t,0)!==0)break;if(a=t.suspendedLanes,(a&n)!==n){Oe(),t.pingedLanes|=t.suspendedLanes&a;break}t.timeoutHandle=so(Ss.bind(null,t,ze,Dt),e);break}Ss(t,ze,Dt);break;case 4:if(ts(t,n),(n&4194240)===n)break;for(e=t.eventTimes,a=-1;0<n;){var l=31-xt(n);i=1<<l,l=e[l],l>a&&(a=l),n&=~i}if(n=a,n=xe()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*Ex(n/1960))-n,10<n){t.timeoutHandle=so(Ss.bind(null,t,ze,Dt),n);break}Ss(t,ze,Dt);break;case 5:Ss(t,ze,Dt);break;default:throw Error(A(329))}}}return We(t,xe()),t.callbackNode===s?Xm.bind(null,t):null}function No(t,e){var s=on;return t.current.memoizedState.isDehydrated&&(Ls(t,e).flags|=256),t=ri(t,e),t!==2&&(e=ze,ze=s,e!==null&&ko(e)),t}function ko(t){ze===null?ze=t:ze.push.apply(ze,t)}function Tx(t){for(var e=t;;){if(e.flags&16384){var s=e.updateQueue;if(s!==null&&(s=s.stores,s!==null))for(var n=0;n<s.length;n++){var a=s[n],i=a.getSnapshot;a=a.value;try{if(!vt(i(),a))return!1}catch{return!1}}}if(s=e.child,e.subtreeFlags&16384&&s!==null)s.return=e,e=s;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function ts(t,e){for(e&=~Tc,e&=~bi,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var s=31-xt(e),n=1<<s;t[s]=-1,e&=~n}}function cu(t){if(J&6)throw Error(A(327));yr();var e=za(t,0);if(!(e&1))return We(t,xe()),null;var s=ri(t,e);if(t.tag!==0&&s===2){var n=Ql(t);n!==0&&(e=n,s=No(t,n))}if(s===1)throw s=Pn,Ls(t,0),ts(t,e),We(t,xe()),s;if(s===6)throw Error(A(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Ss(t,ze,Dt),We(t,xe()),null}function Pc(t,e){var s=J;J|=1;try{return t(e)}finally{J=s,J===0&&(Sr=xe()+500,gi&&ws())}}function zs(t){ns!==null&&ns.tag===0&&!(J&6)&&yr();var e=J;J|=1;var s=st.transition,n=Z;try{if(st.transition=null,Z=1,t)return t()}finally{Z=n,st.transition=s,J=e,!(J&6)&&ws()}}function Ac(){Ve=ur.current,le(ur)}function Ls(t,e){t.finishedWork=null,t.finishedLanes=0;var s=t.timeoutHandle;if(s!==-1&&(t.timeoutHandle=-1,ax(s)),ge!==null)for(s=ge.return;s!==null;){var n=s;switch(hc(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&Wa();break;case 3:kr(),le(qe),le(Le),bc();break;case 5:wc(n);break;case 4:kr();break;case 13:le(ue);break;case 19:le(ue);break;case 10:xc(n.type._context);break;case 22:case 23:Ac()}s=s.return}if(ke=t,ge=t=ms(t.current,null),Ce=Ve=e,je=0,Pn=null,Tc=bi=$s=0,ze=on=null,Ps!==null){for(e=0;e<Ps.length;e++)if(s=Ps[e],n=s.interleaved,n!==null){s.interleaved=null;var a=n.next,i=s.pending;if(i!==null){var l=i.next;i.next=a,n.next=l}s.pending=n}Ps=null}return t}function Zm(t,e){do{var s=ge;try{if(pc(),_a.current=Za,Xa){for(var n=he.memoizedState;n!==null;){var a=n.queue;a!==null&&(a.pending=null),n=n.next}Xa=!1}if(Ms=0,Ne=be=he=null,an=!1,En=0,Ec.current=null,s===null||s.return===null){je=1,Pn=e,ge=null;break}e:{var i=t,l=s.return,o=s,c=e;if(e=Ce,o.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,u=o,m=u.tag;if(!(u.mode&1)&&(m===0||m===11||m===15)){var h=u.alternate;h?(u.updateQueue=h.updateQueue,u.memoizedState=h.memoizedState,u.lanes=h.lanes):(u.updateQueue=null,u.memoizedState=null)}var y=Jd(l);if(y!==null){y.flags&=-257,Yd(y,l,o,i,e),y.mode&1&&Gd(i,d,e),e=y,c=d;var g=e.updateQueue;if(g===null){var b=new Set;b.add(c),e.updateQueue=b}else g.add(c);break e}else{if(!(e&1)){Gd(i,d,e),Lc();break e}c=Error(A(426))}}else if(oe&&o.mode&1){var x=Jd(l);if(x!==null){!(x.flags&65536)&&(x.flags|=256),Yd(x,l,o,i,e),mc(_r(c,o));break e}}i=c=_r(c,o),je!==4&&(je=2),on===null?on=[i]:on.push(i),i=l;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var p=Om(i,c,e);Bd(i,p);break e;case 1:o=c;var f=i.type,w=i.stateNode;if(!(i.flags&128)&&(typeof f.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(us===null||!us.has(w)))){i.flags|=65536,e&=-e,i.lanes|=e;var j=Mm(i,o,e);Bd(i,j);break e}}i=i.return}while(i!==null)}sf(s)}catch(_){e=_,ge===s&&s!==null&&(ge=s=s.return);continue}break}while(!0)}function ef(){var t=ei.current;return ei.current=Za,t===null?Za:t}function Lc(){(je===0||je===3||je===2)&&(je=4),ke===null||!($s&268435455)&&!(bi&268435455)||ts(ke,Ce)}function ri(t,e){var s=J;J|=2;var n=ef();(ke!==t||Ce!==e)&&(Dt=null,Ls(t,e));do try{Ix();break}catch(a){Zm(t,a)}while(!0);if(pc(),J=s,ei.current=n,ge!==null)throw Error(A(261));return ke=null,Ce=0,je}function Ix(){for(;ge!==null;)tf(ge)}function Px(){for(;ge!==null&&!sp();)tf(ge)}function tf(t){var e=nf(t.alternate,t,Ve);t.memoizedProps=t.pendingProps,e===null?sf(t):ge=e,Ec.current=null}function sf(t){var e=t;do{var s=e.alternate;if(t=e.return,e.flags&32768){if(s=kx(s,e),s!==null){s.flags&=32767,ge=s;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{je=6,ge=null;return}}else if(s=Nx(s,e,Ve),s!==null){ge=s;return}if(e=e.sibling,e!==null){ge=e;return}ge=e=t}while(e!==null);je===0&&(je=5)}function Ss(t,e,s){var n=Z,a=st.transition;try{st.transition=null,Z=1,Ax(t,e,s,n)}finally{st.transition=a,Z=n}return null}function Ax(t,e,s,n){do yr();while(ns!==null);if(J&6)throw Error(A(327));s=t.finishedWork;var a=t.finishedLanes;if(s===null)return null;if(t.finishedWork=null,t.finishedLanes=0,s===t.current)throw Error(A(177));t.callbackNode=null,t.callbackPriority=0;var i=s.lanes|s.childLanes;if(hp(t,i),t===ke&&(ge=ke=null,Ce=0),!(s.subtreeFlags&2064)&&!(s.flags&2064)||ua||(ua=!0,af($a,function(){return yr(),null})),i=(s.flags&15990)!==0,s.subtreeFlags&15990||i){i=st.transition,st.transition=null;var l=Z;Z=1;var o=J;J|=4,Ec.current=null,Sx(t,s),Jm(s,t),Xp(eo),Fa=!!Zl,eo=Zl=null,t.current=s,Cx(s),rp(),J=o,Z=l,st.transition=i}else t.current=s;if(ua&&(ua=!1,ns=t,si=a),i=t.pendingLanes,i===0&&(us=null),ip(s.stateNode),We(t,xe()),e!==null)for(n=t.onRecoverableError,s=0;s<e.length;s++)a=e[s],n(a.value,{componentStack:a.stack,digest:a.digest});if(ti)throw ti=!1,t=bo,bo=null,t;return si&1&&t.tag!==0&&yr(),i=t.pendingLanes,i&1?t===jo?cn++:(cn=0,jo=t):cn=0,ws(),null}function yr(){if(ns!==null){var t=Oh(si),e=st.transition,s=Z;try{if(st.transition=null,Z=16>t?16:t,ns===null)var n=!1;else{if(t=ns,ns=null,si=0,J&6)throw Error(A(331));var a=J;for(J|=4,$=t.current;$!==null;){var i=$,l=i.child;if($.flags&16){var o=i.deletions;if(o!==null){for(var c=0;c<o.length;c++){var d=o[c];for($=d;$!==null;){var u=$;switch(u.tag){case 0:case 11:case 15:ln(8,u,i)}var m=u.child;if(m!==null)m.return=u,$=m;else for(;$!==null;){u=$;var h=u.sibling,y=u.return;if(Km(u),u===d){$=null;break}if(h!==null){h.return=y,$=h;break}$=y}}}var g=i.alternate;if(g!==null){var b=g.child;if(b!==null){g.child=null;do{var x=b.sibling;b.sibling=null,b=x}while(b!==null)}}$=i}}if(i.subtreeFlags&2064&&l!==null)l.return=i,$=l;else e:for(;$!==null;){if(i=$,i.flags&2048)switch(i.tag){case 0:case 11:case 15:ln(9,i,i.return)}var p=i.sibling;if(p!==null){p.return=i.return,$=p;break e}$=i.return}}var f=t.current;for($=f;$!==null;){l=$;var w=l.child;if(l.subtreeFlags&2064&&w!==null)w.return=l,$=w;else e:for(l=f;$!==null;){if(o=$,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:wi(9,o)}}catch(_){pe(o,o.return,_)}if(o===l){$=null;break e}var j=o.sibling;if(j!==null){j.return=o.return,$=j;break e}$=o.return}}if(J=a,ws(),Et&&typeof Et.onPostCommitFiberRoot=="function")try{Et.onPostCommitFiberRoot(hi,t)}catch{}n=!0}return n}finally{Z=s,st.transition=e}}return!1}function du(t,e,s){e=_r(s,e),e=Om(t,e,1),t=ds(t,e,1),e=Oe(),t!==null&&($n(t,1,e),We(t,e))}function pe(t,e,s){if(t.tag===3)du(t,t,s);else for(;e!==null;){if(e.tag===3){du(e,t,s);break}else if(e.tag===1){var n=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(us===null||!us.has(n))){t=_r(s,t),t=Mm(e,t,1),e=ds(e,t,1),t=Oe(),e!==null&&($n(e,1,t),We(e,t));break}}e=e.return}}function Lx(t,e,s){var n=t.pingCache;n!==null&&n.delete(e),e=Oe(),t.pingedLanes|=t.suspendedLanes&s,ke===t&&(Ce&s)===s&&(je===4||je===3&&(Ce&130023424)===Ce&&500>xe()-Ic?Ls(t,0):Tc|=s),We(t,e)}function rf(t,e){e===0&&(t.mode&1?(e=ta,ta<<=1,!(ta&130023424)&&(ta=4194304)):e=1);var s=Oe();t=Bt(t,e),t!==null&&($n(t,e,s),We(t,s))}function Dx(t){var e=t.memoizedState,s=0;e!==null&&(s=e.retryLane),rf(t,s)}function Rx(t,e){var s=0;switch(t.tag){case 13:var n=t.stateNode,a=t.memoizedState;a!==null&&(s=a.retryLane);break;case 19:n=t.stateNode;break;default:throw Error(A(314))}n!==null&&n.delete(e),rf(t,s)}var nf;nf=function(t,e,s){if(t!==null)if(t.memoizedProps!==e.pendingProps||qe.current)Ue=!0;else{if(!(t.lanes&s)&&!(e.flags&128))return Ue=!1,jx(t,e,s);Ue=!!(t.flags&131072)}else Ue=!1,oe&&e.flags&1048576&&om(e,Ka,e.index);switch(e.lanes=0,e.tag){case 2:var n=e.type;Ca(t,e),t=e.pendingProps;var a=br(e,Le.current);vr(e,s),a=Nc(null,e,n,t,a,s);var i=kc();return e.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Be(n)?(i=!0,Va(e)):i=!1,e.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,vc(e),a.updater=yi,e.stateNode=a,a._reactInternals=e,co(e,n,t,s),e=mo(null,e,n,!0,i,s)):(e.tag=0,oe&&i&&uc(e),Re(null,e,a,s),e=e.child),e;case 16:n=e.elementType;e:{switch(Ca(t,e),t=e.pendingProps,a=n._init,n=a(n._payload),e.type=n,a=e.tag=Mx(n),t=ht(n,t),a){case 0:e=ho(null,e,n,t,s);break e;case 1:e=eu(null,e,n,t,s);break e;case 11:e=Xd(null,e,n,t,s);break e;case 14:e=Zd(null,e,n,ht(n.type,t),s);break e}throw Error(A(306,n,""))}return e;case 0:return n=e.type,a=e.pendingProps,a=e.elementType===n?a:ht(n,a),ho(t,e,n,a,s);case 1:return n=e.type,a=e.pendingProps,a=e.elementType===n?a:ht(n,a),eu(t,e,n,a,s);case 3:e:{if(Um(e),t===null)throw Error(A(387));n=e.pendingProps,i=e.memoizedState,a=i.element,fm(t,e),Ja(e,n,null,s);var l=e.memoizedState;if(n=l.element,i.isDehydrated)if(i={element:n,isDehydrated:!1,cache:l.cache,pendingSuspenseBoundaries:l.pendingSuspenseBoundaries,transitions:l.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){a=_r(Error(A(423)),e),e=tu(t,e,n,s,a);break e}else if(n!==a){a=_r(Error(A(424)),e),e=tu(t,e,n,s,a);break e}else for(He=cs(e.stateNode.containerInfo.firstChild),Ke=e,oe=!0,pt=null,s=hm(e,null,n,s),e.child=s;s;)s.flags=s.flags&-3|4096,s=s.sibling;else{if(jr(),n===a){e=Wt(t,e,s);break e}Re(t,e,n,s)}e=e.child}return e;case 5:return pm(e),t===null&&io(e),n=e.type,a=e.pendingProps,i=t!==null?t.memoizedProps:null,l=a.children,to(n,a)?l=null:i!==null&&to(n,i)&&(e.flags|=32),Fm(t,e),Re(t,e,l,s),e.child;case 6:return t===null&&io(e),null;case 13:return qm(t,e,s);case 4:return yc(e,e.stateNode.containerInfo),n=e.pendingProps,t===null?e.child=Nr(e,null,n,s):Re(t,e,n,s),e.child;case 11:return n=e.type,a=e.pendingProps,a=e.elementType===n?a:ht(n,a),Xd(t,e,n,a,s);case 7:return Re(t,e,e.pendingProps,s),e.child;case 8:return Re(t,e,e.pendingProps.children,s),e.child;case 12:return Re(t,e,e.pendingProps.children,s),e.child;case 10:e:{if(n=e.type._context,a=e.pendingProps,i=e.memoizedProps,l=a.value,ae(Qa,n._currentValue),n._currentValue=l,i!==null)if(vt(i.value,l)){if(i.children===a.children&&!qe.current){e=Wt(t,e,s);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var o=i.dependencies;if(o!==null){l=i.child;for(var c=o.firstContext;c!==null;){if(c.context===n){if(i.tag===1){c=zt(-1,s&-s),c.tag=2;var d=i.updateQueue;if(d!==null){d=d.shared;var u=d.pending;u===null?c.next=c:(c.next=u.next,u.next=c),d.pending=c}}i.lanes|=s,c=i.alternate,c!==null&&(c.lanes|=s),lo(i.return,s,e),o.lanes|=s;break}c=c.next}}else if(i.tag===10)l=i.type===e.type?null:i.child;else if(i.tag===18){if(l=i.return,l===null)throw Error(A(341));l.lanes|=s,o=l.alternate,o!==null&&(o.lanes|=s),lo(l,s,e),l=i.sibling}else l=i.child;if(l!==null)l.return=i;else for(l=i;l!==null;){if(l===e){l=null;break}if(i=l.sibling,i!==null){i.return=l.return,l=i;break}l=l.return}i=l}Re(t,e,a.children,s),e=e.child}return e;case 9:return a=e.type,n=e.pendingProps.children,vr(e,s),a=nt(a),n=n(a),e.flags|=1,Re(t,e,n,s),e.child;case 14:return n=e.type,a=ht(n,e.pendingProps),a=ht(n.type,a),Zd(t,e,n,a,s);case 15:return $m(t,e,e.type,e.pendingProps,s);case 17:return n=e.type,a=e.pendingProps,a=e.elementType===n?a:ht(n,a),Ca(t,e),e.tag=1,Be(n)?(t=!0,Va(e)):t=!1,vr(e,s),Rm(e,n,a),co(e,n,a,s),mo(null,e,n,!0,t,s);case 19:return Bm(t,e,s);case 22:return zm(t,e,s)}throw Error(A(156,e.tag))};function af(t,e){return Ah(t,e)}function Ox(t,e,s,n){this.tag=t,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function tt(t,e,s,n){return new Ox(t,e,s,n)}function Dc(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Mx(t){if(typeof t=="function")return Dc(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Zo)return 11;if(t===ec)return 14}return 2}function ms(t,e){var s=t.alternate;return s===null?(s=tt(t.tag,e,t.key,t.mode),s.elementType=t.elementType,s.type=t.type,s.stateNode=t.stateNode,s.alternate=t,t.alternate=s):(s.pendingProps=e,s.type=t.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=t.flags&14680064,s.childLanes=t.childLanes,s.lanes=t.lanes,s.child=t.child,s.memoizedProps=t.memoizedProps,s.memoizedState=t.memoizedState,s.updateQueue=t.updateQueue,e=t.dependencies,s.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},s.sibling=t.sibling,s.index=t.index,s.ref=t.ref,s}function Ia(t,e,s,n,a,i){var l=2;if(n=t,typeof t=="function")Dc(t)&&(l=1);else if(typeof t=="string")l=5;else e:switch(t){case tr:return Ds(s.children,a,i,e);case Xo:l=8,a|=8;break;case Ll:return t=tt(12,s,e,a|2),t.elementType=Ll,t.lanes=i,t;case Dl:return t=tt(13,s,e,a),t.elementType=Dl,t.lanes=i,t;case Rl:return t=tt(19,s,e,a),t.elementType=Rl,t.lanes=i,t;case ph:return ji(s,a,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case mh:l=10;break e;case fh:l=9;break e;case Zo:l=11;break e;case ec:l=14;break e;case Xt:l=16,n=null;break e}throw Error(A(130,t==null?t:typeof t,""))}return e=tt(l,s,e,a),e.elementType=t,e.type=n,e.lanes=i,e}function Ds(t,e,s,n){return t=tt(7,t,n,e),t.lanes=s,t}function ji(t,e,s,n){return t=tt(22,t,n,e),t.elementType=ph,t.lanes=s,t.stateNode={isHidden:!1},t}function cl(t,e,s){return t=tt(6,t,null,e),t.lanes=s,t}function dl(t,e,s){return e=tt(4,t.children!==null?t.children:[],t.key,e),e.lanes=s,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function $x(t,e,s,n,a){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Wi(0),this.expirationTimes=Wi(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Wi(0),this.identifierPrefix=n,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function Rc(t,e,s,n,a,i,l,o,c){return t=new $x(t,e,s,o,c),e===1?(e=1,i===!0&&(e|=8)):e=0,i=tt(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:n,isDehydrated:s,cache:null,transitions:null,pendingSuspenseBoundaries:null},vc(i),t}function zx(t,e,s){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:er,key:n==null?null:""+n,children:t,containerInfo:e,implementation:s}}function lf(t){if(!t)return ps;t=t._reactInternals;e:{if(Bs(t)!==t||t.tag!==1)throw Error(A(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Be(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(A(171))}if(t.tag===1){var s=t.type;if(Be(s))return im(t,s,e)}return e}function of(t,e,s,n,a,i,l,o,c){return t=Rc(s,n,!0,t,a,i,l,o,c),t.context=lf(null),s=t.current,n=Oe(),a=hs(s),i=zt(n,a),i.callback=e??null,ds(s,i,a),t.current.lanes=a,$n(t,a,n),We(t,n),t}function Ni(t,e,s,n){var a=e.current,i=Oe(),l=hs(a);return s=lf(s),e.context===null?e.context=s:e.pendingContext=s,e=zt(i,l),e.payload={element:t},n=n===void 0?null:n,n!==null&&(e.callback=n),t=ds(a,e,l),t!==null&&(gt(t,a,l,i),ka(t,a,l)),l}function ni(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function uu(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var s=t.retryLane;t.retryLane=s!==0&&s<e?s:e}}function Oc(t,e){uu(t,e),(t=t.alternate)&&uu(t,e)}function Fx(){return null}var cf=typeof reportError=="function"?reportError:function(t){console.error(t)};function Mc(t){this._internalRoot=t}ki.prototype.render=Mc.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(A(409));Ni(t,e,null,null)};ki.prototype.unmount=Mc.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;zs(function(){Ni(null,t,null,null)}),e[qt]=null}};function ki(t){this._internalRoot=t}ki.prototype.unstable_scheduleHydration=function(t){if(t){var e=zh();t={blockedOn:null,target:t,priority:e};for(var s=0;s<es.length&&e!==0&&e<es[s].priority;s++);es.splice(s,0,t),s===0&&Uh(t)}};function $c(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function _i(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function hu(){}function Ux(t,e,s,n,a){if(a){if(typeof n=="function"){var i=n;n=function(){var d=ni(l);i.call(d)}}var l=of(e,n,t,0,null,!1,!1,"",hu);return t._reactRootContainer=l,t[qt]=l.current,Nn(t.nodeType===8?t.parentNode:t),zs(),l}for(;a=t.lastChild;)t.removeChild(a);if(typeof n=="function"){var o=n;n=function(){var d=ni(c);o.call(d)}}var c=Rc(t,0,!1,null,null,!1,!1,"",hu);return t._reactRootContainer=c,t[qt]=c.current,Nn(t.nodeType===8?t.parentNode:t),zs(function(){Ni(e,c,s,n)}),c}function Si(t,e,s,n,a){var i=s._reactRootContainer;if(i){var l=i;if(typeof a=="function"){var o=a;a=function(){var c=ni(l);o.call(c)}}Ni(e,l,t,a)}else l=Ux(s,e,t,a,n);return ni(l)}Mh=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var s=Yr(e.pendingLanes);s!==0&&(rc(e,s|1),We(e,xe()),!(J&6)&&(Sr=xe()+500,ws()))}break;case 13:zs(function(){var n=Bt(t,1);if(n!==null){var a=Oe();gt(n,t,1,a)}}),Oc(t,1)}};nc=function(t){if(t.tag===13){var e=Bt(t,134217728);if(e!==null){var s=Oe();gt(e,t,134217728,s)}Oc(t,134217728)}};$h=function(t){if(t.tag===13){var e=hs(t),s=Bt(t,e);if(s!==null){var n=Oe();gt(s,t,e,n)}Oc(t,e)}};zh=function(){return Z};Fh=function(t,e){var s=Z;try{return Z=t,e()}finally{Z=s}};Vl=function(t,e,s){switch(e){case"input":if($l(t,s),e=s.name,s.type==="radio"&&e!=null){for(s=t;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<s.length;e++){var n=s[e];if(n!==t&&n.form===t.form){var a=xi(n);if(!a)throw Error(A(90));gh(n),$l(n,a)}}}break;case"textarea":yh(t,s);break;case"select":e=s.value,e!=null&&fr(t,!!s.multiple,e,!1)}};Sh=Pc;Ch=zs;var qx={usingClientEntryPoint:!1,Events:[Fn,ar,xi,kh,_h,Pc]},Hr={findFiberByHostInstance:Is,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Bx={bundleType:Hr.bundleType,version:Hr.version,rendererPackageName:Hr.rendererPackageName,rendererConfig:Hr.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Kt.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Ih(t),t===null?null:t.stateNode},findFiberByHostInstance:Hr.findFiberByHostInstance||Fx,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ha=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ha.isDisabled&&ha.supportsFiber)try{hi=ha.inject(Bx),Et=ha}catch{}}Ge.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=qx;Ge.createPortal=function(t,e){var s=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!$c(e))throw Error(A(200));return zx(t,e,null,s)};Ge.createRoot=function(t,e){if(!$c(t))throw Error(A(299));var s=!1,n="",a=cf;return e!=null&&(e.unstable_strictMode===!0&&(s=!0),e.identifierPrefix!==void 0&&(n=e.identifierPrefix),e.onRecoverableError!==void 0&&(a=e.onRecoverableError)),e=Rc(t,1,!1,null,null,s,!1,n,a),t[qt]=e.current,Nn(t.nodeType===8?t.parentNode:t),new Mc(e)};Ge.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(A(188)):(t=Object.keys(t).join(","),Error(A(268,t)));return t=Ih(e),t=t===null?null:t.stateNode,t};Ge.flushSync=function(t){return zs(t)};Ge.hydrate=function(t,e,s){if(!_i(e))throw Error(A(200));return Si(null,t,e,!0,s)};Ge.hydrateRoot=function(t,e,s){if(!$c(t))throw Error(A(405));var n=s!=null&&s.hydratedSources||null,a=!1,i="",l=cf;if(s!=null&&(s.unstable_strictMode===!0&&(a=!0),s.identifierPrefix!==void 0&&(i=s.identifierPrefix),s.onRecoverableError!==void 0&&(l=s.onRecoverableError)),e=of(e,null,t,1,s??null,a,!1,i,l),t[qt]=e.current,Nn(t),n)for(t=0;t<n.length;t++)s=n[t],a=s._getVersion,a=a(s._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[s,a]:e.mutableSourceEagerHydrationData.push(s,a);return new ki(e)};Ge.render=function(t,e,s){if(!_i(e))throw Error(A(200));return Si(null,t,e,!1,s)};Ge.unmountComponentAtNode=function(t){if(!_i(t))throw Error(A(40));return t._reactRootContainer?(zs(function(){Si(null,null,t,!1,function(){t._reactRootContainer=null,t[qt]=null})}),!0):!1};Ge.unstable_batchedUpdates=Pc;Ge.unstable_renderSubtreeIntoContainer=function(t,e,s,n){if(!_i(s))throw Error(A(200));if(t==null||t._reactInternals===void 0)throw Error(A(38));return Si(t,e,s,!1,n)};Ge.version="18.3.1-next-f1338f8080-20240426";function df(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(df)}catch(t){console.error(t)}}df(),ch.exports=Ge;var Wx=ch.exports,uf,mu=Wx;uf=mu.createRoot,mu.hydrateRoot;/**
 * react-router v7.8.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var fu="popstate";function Vx(t={}){function e(n,a){let{pathname:i,search:l,hash:o}=n.location;return _o("",{pathname:i,search:l,hash:o},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function s(n,a){return typeof a=="string"?a:An(a)}return Kx(e,s,null,t)}function ce(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function yt(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function Hx(){return Math.random().toString(36).substring(2,10)}function pu(t,e){return{usr:t.state,key:t.key,idx:e}}function _o(t,e,s=null,n){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?Ar(e):e,state:s,key:e&&e.key||n||Hx()}}function An({pathname:t="/",search:e="",hash:s=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),s&&s!=="#"&&(t+=s.charAt(0)==="#"?s:"#"+s),t}function Ar(t){let e={};if(t){let s=t.indexOf("#");s>=0&&(e.hash=t.substring(s),t=t.substring(0,s));let n=t.indexOf("?");n>=0&&(e.search=t.substring(n),t=t.substring(0,n)),t&&(e.pathname=t)}return e}function Kx(t,e,s,n={}){let{window:a=document.defaultView,v5Compat:i=!1}=n,l=a.history,o="POP",c=null,d=u();d==null&&(d=0,l.replaceState({...l.state,idx:d},""));function u(){return(l.state||{idx:null}).idx}function m(){o="POP";let x=u(),p=x==null?null:x-d;d=x,c&&c({action:o,location:b.location,delta:p})}function h(x,p){o="PUSH";let f=_o(b.location,x,p);d=u()+1;let w=pu(f,d),j=b.createHref(f);try{l.pushState(w,"",j)}catch(_){if(_ instanceof DOMException&&_.name==="DataCloneError")throw _;a.location.assign(j)}i&&c&&c({action:o,location:b.location,delta:1})}function y(x,p){o="REPLACE";let f=_o(b.location,x,p);d=u();let w=pu(f,d),j=b.createHref(f);l.replaceState(w,"",j),i&&c&&c({action:o,location:b.location,delta:0})}function g(x){return Qx(x)}let b={get action(){return o},get location(){return t(a,l)},listen(x){if(c)throw new Error("A history only accepts one active listener");return a.addEventListener(fu,m),c=x,()=>{a.removeEventListener(fu,m),c=null}},createHref(x){return e(a,x)},createURL:g,encodeLocation(x){let p=g(x);return{pathname:p.pathname,search:p.search,hash:p.hash}},push:h,replace:y,go(x){return l.go(x)}};return b}function Qx(t,e=!1){let s="http://localhost";typeof window<"u"&&(s=window.location.origin!=="null"?window.location.origin:window.location.href),ce(s,"No window.location.(origin|href) available to create URL");let n=typeof t=="string"?t:An(t);return n=n.replace(/ $/,"%20"),!e&&n.startsWith("//")&&(n=s+n),new URL(n,s)}function hf(t,e,s="/"){return Gx(t,e,s,!1)}function Gx(t,e,s,n){let a=typeof e=="string"?Ar(e):e,i=Vt(a.pathname||"/",s);if(i==null)return null;let l=mf(t);Jx(l);let o=null;for(let c=0;o==null&&c<l.length;++c){let d=lg(i);o=ag(l[c],d,n)}return o}function mf(t,e=[],s=[],n="",a=!1){let i=(l,o,c=a,d)=>{let u={relativePath:d===void 0?l.path||"":d,caseSensitive:l.caseSensitive===!0,childrenIndex:o,route:l};if(u.relativePath.startsWith("/")){if(!u.relativePath.startsWith(n)&&c)return;ce(u.relativePath.startsWith(n),`Absolute route path "${u.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),u.relativePath=u.relativePath.slice(n.length)}let m=Ft([n,u.relativePath]),h=s.concat(u);l.children&&l.children.length>0&&(ce(l.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${m}".`),mf(l.children,e,h,m,c)),!(l.path==null&&!l.index)&&e.push({path:m,score:rg(m,l.index),routesMeta:h})};return t.forEach((l,o)=>{var c;if(l.path===""||!((c=l.path)!=null&&c.includes("?")))i(l,o);else for(let d of ff(l.path))i(l,o,!0,d)}),e}function ff(t){let e=t.split("/");if(e.length===0)return[];let[s,...n]=e,a=s.endsWith("?"),i=s.replace(/\?$/,"");if(n.length===0)return a?[i,""]:[i];let l=ff(n.join("/")),o=[];return o.push(...l.map(c=>c===""?i:[i,c].join("/"))),a&&o.push(...l),o.map(c=>t.startsWith("/")&&c===""?"/":c)}function Jx(t){t.sort((e,s)=>e.score!==s.score?s.score-e.score:ng(e.routesMeta.map(n=>n.childrenIndex),s.routesMeta.map(n=>n.childrenIndex)))}var Yx=/^:[\w-]+$/,Xx=3,Zx=2,eg=1,tg=10,sg=-2,xu=t=>t==="*";function rg(t,e){let s=t.split("/"),n=s.length;return s.some(xu)&&(n+=sg),e&&(n+=Zx),s.filter(a=>!xu(a)).reduce((a,i)=>a+(Yx.test(i)?Xx:i===""?eg:tg),n)}function ng(t,e){return t.length===e.length&&t.slice(0,-1).every((n,a)=>n===e[a])?t[t.length-1]-e[e.length-1]:0}function ag(t,e,s=!1){let{routesMeta:n}=t,a={},i="/",l=[];for(let o=0;o<n.length;++o){let c=n[o],d=o===n.length-1,u=i==="/"?e:e.slice(i.length)||"/",m=ai({path:c.relativePath,caseSensitive:c.caseSensitive,end:d},u),h=c.route;if(!m&&d&&s&&!n[n.length-1].route.index&&(m=ai({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},u)),!m)return null;Object.assign(a,m.params),l.push({params:a,pathname:Ft([i,m.pathname]),pathnameBase:ug(Ft([i,m.pathnameBase])),route:h}),m.pathnameBase!=="/"&&(i=Ft([i,m.pathnameBase]))}return l}function ai(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[s,n]=ig(t.path,t.caseSensitive,t.end),a=e.match(s);if(!a)return null;let i=a[0],l=i.replace(/(.)\/+$/,"$1"),o=a.slice(1);return{params:n.reduce((d,{paramName:u,isOptional:m},h)=>{if(u==="*"){let g=o[h]||"";l=i.slice(0,i.length-g.length).replace(/(.)\/+$/,"$1")}const y=o[h];return m&&!y?d[u]=void 0:d[u]=(y||"").replace(/%2F/g,"/"),d},{}),pathname:i,pathnameBase:l,pattern:t}}function ig(t,e=!1,s=!0){yt(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let n=[],a="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,o,c)=>(n.push({paramName:o,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return t.endsWith("*")?(n.push({paramName:"*"}),a+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):s?a+="\\/*$":t!==""&&t!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,e?void 0:"i"),n]}function lg(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return yt(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function Vt(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let s=e.endsWith("/")?e.length-1:e.length,n=t.charAt(s);return n&&n!=="/"?null:t.slice(s)||"/"}function og(t,e="/"){let{pathname:s,search:n="",hash:a=""}=typeof t=="string"?Ar(t):t;return{pathname:s?s.startsWith("/")?s:cg(s,e):e,search:hg(n),hash:mg(a)}}function cg(t,e){let s=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(a=>{a===".."?s.length>1&&s.pop():a!=="."&&s.push(a)}),s.length>1?s.join("/"):"/"}function ul(t,e,s,n){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${s}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function dg(t){return t.filter((e,s)=>s===0||e.route.path&&e.route.path.length>0)}function zc(t){let e=dg(t);return e.map((s,n)=>n===e.length-1?s.pathname:s.pathnameBase)}function Fc(t,e,s,n=!1){let a;typeof t=="string"?a=Ar(t):(a={...t},ce(!a.pathname||!a.pathname.includes("?"),ul("?","pathname","search",a)),ce(!a.pathname||!a.pathname.includes("#"),ul("#","pathname","hash",a)),ce(!a.search||!a.search.includes("#"),ul("#","search","hash",a)));let i=t===""||a.pathname==="",l=i?"/":a.pathname,o;if(l==null)o=s;else{let m=e.length-1;if(!n&&l.startsWith("..")){let h=l.split("/");for(;h[0]==="..";)h.shift(),m-=1;a.pathname=h.join("/")}o=m>=0?e[m]:"/"}let c=og(a,o),d=l&&l!=="/"&&l.endsWith("/"),u=(i||l===".")&&s.endsWith("/");return!c.pathname.endsWith("/")&&(d||u)&&(c.pathname+="/"),c}var Ft=t=>t.join("/").replace(/\/\/+/g,"/"),ug=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),hg=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,mg=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function fg(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}var pf=["POST","PUT","PATCH","DELETE"];new Set(pf);var pg=["GET",...pf];new Set(pg);var Lr=v.createContext(null);Lr.displayName="DataRouter";var Ci=v.createContext(null);Ci.displayName="DataRouterState";v.createContext(!1);var xf=v.createContext({isTransitioning:!1});xf.displayName="ViewTransition";var xg=v.createContext(new Map);xg.displayName="Fetchers";var gg=v.createContext(null);gg.displayName="Await";var wt=v.createContext(null);wt.displayName="Navigation";var qn=v.createContext(null);qn.displayName="Location";var bt=v.createContext({outlet:null,matches:[],isDataRoute:!1});bt.displayName="Route";var Uc=v.createContext(null);Uc.displayName="RouteError";function vg(t,{relative:e}={}){ce(Dr(),"useHref() may be used only in the context of a <Router> component.");let{basename:s,navigator:n}=v.useContext(wt),{hash:a,pathname:i,search:l}=Bn(t,{relative:e}),o=i;return s!=="/"&&(o=i==="/"?s:Ft([s,i])),n.createHref({pathname:o,search:l,hash:a})}function Dr(){return v.useContext(qn)!=null}function At(){return ce(Dr(),"useLocation() may be used only in the context of a <Router> component."),v.useContext(qn).location}var gf="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function vf(t){v.useContext(wt).static||v.useLayoutEffect(t)}function jt(){let{isDataRoute:t}=v.useContext(bt);return t?Ag():yg()}function yg(){ce(Dr(),"useNavigate() may be used only in the context of a <Router> component.");let t=v.useContext(Lr),{basename:e,navigator:s}=v.useContext(wt),{matches:n}=v.useContext(bt),{pathname:a}=At(),i=JSON.stringify(zc(n)),l=v.useRef(!1);return vf(()=>{l.current=!0}),v.useCallback((c,d={})=>{if(yt(l.current,gf),!l.current)return;if(typeof c=="number"){s.go(c);return}let u=Fc(c,JSON.parse(i),a,d.relative==="path");t==null&&e!=="/"&&(u.pathname=u.pathname==="/"?e:Ft([e,u.pathname])),(d.replace?s.replace:s.push)(u,d.state,d)},[e,s,i,a,t])}v.createContext(null);function wg(){let{matches:t}=v.useContext(bt),e=t[t.length-1];return e?e.params:{}}function Bn(t,{relative:e}={}){let{matches:s}=v.useContext(bt),{pathname:n}=At(),a=JSON.stringify(zc(s));return v.useMemo(()=>Fc(t,JSON.parse(a),n,e==="path"),[t,a,n,e])}function bg(t,e){return yf(t,e)}function yf(t,e,s,n){var p;ce(Dr(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:a}=v.useContext(wt),{matches:i}=v.useContext(bt),l=i[i.length-1],o=l?l.params:{},c=l?l.pathname:"/",d=l?l.pathnameBase:"/",u=l&&l.route;{let f=u&&u.path||"";wf(c,!u||f.endsWith("*")||f.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${c}" (under <Route path="${f}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${f}"> to <Route path="${f==="/"?"*":`${f}/*`}">.`)}let m=At(),h;if(e){let f=typeof e=="string"?Ar(e):e;ce(d==="/"||((p=f.pathname)==null?void 0:p.startsWith(d)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${d}" but pathname "${f.pathname}" was given in the \`location\` prop.`),h=f}else h=m;let y=h.pathname||"/",g=y;if(d!=="/"){let f=d.replace(/^\//,"").split("/");g="/"+y.replace(/^\//,"").split("/").slice(f.length).join("/")}let b=hf(t,{pathname:g});yt(u||b!=null,`No routes matched location "${h.pathname}${h.search}${h.hash}" `),yt(b==null||b[b.length-1].route.element!==void 0||b[b.length-1].route.Component!==void 0||b[b.length-1].route.lazy!==void 0,`Matched leaf route at location "${h.pathname}${h.search}${h.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let x=Sg(b&&b.map(f=>Object.assign({},f,{params:Object.assign({},o,f.params),pathname:Ft([d,a.encodeLocation?a.encodeLocation(f.pathname).pathname:f.pathname]),pathnameBase:f.pathnameBase==="/"?d:Ft([d,a.encodeLocation?a.encodeLocation(f.pathnameBase).pathname:f.pathnameBase])})),i,s,n);return e&&x?v.createElement(qn.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...h},navigationType:"POP"}},x):x}function jg(){let t=Pg(),e=fg(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),s=t instanceof Error?t.stack:null,n="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:n},i={padding:"2px 4px",backgroundColor:n},l=null;return console.error("Error handled by React Router default ErrorBoundary:",t),l=v.createElement(v.Fragment,null,v.createElement("p",null,"💿 Hey developer 👋"),v.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",v.createElement("code",{style:i},"ErrorBoundary")," or"," ",v.createElement("code",{style:i},"errorElement")," prop on your route.")),v.createElement(v.Fragment,null,v.createElement("h2",null,"Unexpected Application Error!"),v.createElement("h3",{style:{fontStyle:"italic"}},e),s?v.createElement("pre",{style:a},s):null,l)}var Ng=v.createElement(jg,null),kg=class extends v.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){console.error("React Router caught the following error during render",t,e)}render(){return this.state.error!==void 0?v.createElement(bt.Provider,{value:this.props.routeContext},v.createElement(Uc.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function _g({routeContext:t,match:e,children:s}){let n=v.useContext(Lr);return n&&n.static&&n.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=e.route.id),v.createElement(bt.Provider,{value:t},s)}function Sg(t,e=[],s=null,n=null){if(t==null){if(!s)return null;if(s.errors)t=s.matches;else if(e.length===0&&!s.initialized&&s.matches.length>0)t=s.matches;else return null}let a=t,i=s==null?void 0:s.errors;if(i!=null){let c=a.findIndex(d=>d.route.id&&(i==null?void 0:i[d.route.id])!==void 0);ce(c>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(i).join(",")}`),a=a.slice(0,Math.min(a.length,c+1))}let l=!1,o=-1;if(s)for(let c=0;c<a.length;c++){let d=a[c];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(o=c),d.route.id){let{loaderData:u,errors:m}=s,h=d.route.loader&&!u.hasOwnProperty(d.route.id)&&(!m||m[d.route.id]===void 0);if(d.route.lazy||h){l=!0,o>=0?a=a.slice(0,o+1):a=[a[0]];break}}}return a.reduceRight((c,d,u)=>{let m,h=!1,y=null,g=null;s&&(m=i&&d.route.id?i[d.route.id]:void 0,y=d.route.errorElement||Ng,l&&(o<0&&u===0?(wf("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),h=!0,g=null):o===u&&(h=!0,g=d.route.hydrateFallbackElement||null)));let b=e.concat(a.slice(0,u+1)),x=()=>{let p;return m?p=y:h?p=g:d.route.Component?p=v.createElement(d.route.Component,null):d.route.element?p=d.route.element:p=c,v.createElement(_g,{match:d,routeContext:{outlet:c,matches:b,isDataRoute:s!=null},children:p})};return s&&(d.route.ErrorBoundary||d.route.errorElement||u===0)?v.createElement(kg,{location:s.location,revalidation:s.revalidation,component:y,error:m,children:x(),routeContext:{outlet:null,matches:b,isDataRoute:!0}}):x()},null)}function qc(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Cg(t){let e=v.useContext(Lr);return ce(e,qc(t)),e}function Eg(t){let e=v.useContext(Ci);return ce(e,qc(t)),e}function Tg(t){let e=v.useContext(bt);return ce(e,qc(t)),e}function Bc(t){let e=Tg(t),s=e.matches[e.matches.length-1];return ce(s.route.id,`${t} can only be used on routes that contain a unique "id"`),s.route.id}function Ig(){return Bc("useRouteId")}function Pg(){var n;let t=v.useContext(Uc),e=Eg("useRouteError"),s=Bc("useRouteError");return t!==void 0?t:(n=e.errors)==null?void 0:n[s]}function Ag(){let{router:t}=Cg("useNavigate"),e=Bc("useNavigate"),s=v.useRef(!1);return vf(()=>{s.current=!0}),v.useCallback(async(a,i={})=>{yt(s.current,gf),s.current&&(typeof a=="number"?t.navigate(a):await t.navigate(a,{fromRouteId:e,...i}))},[t,e])}var gu={};function wf(t,e,s){!e&&!gu[t]&&(gu[t]=!0,yt(!1,s))}v.memo(Lg);function Lg({routes:t,future:e,state:s}){return yf(t,void 0,s,e)}function vu({to:t,replace:e,state:s,relative:n}){ce(Dr(),"<Navigate> may be used only in the context of a <Router> component.");let{static:a}=v.useContext(wt);yt(!a,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:i}=v.useContext(bt),{pathname:l}=At(),o=jt(),c=Fc(t,zc(i),l,n==="path"),d=JSON.stringify(c);return v.useEffect(()=>{o(JSON.parse(d),{replace:e,state:s,relative:n})},[o,d,n,e,s]),null}function fe(t){ce(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Dg({basename:t="/",children:e=null,location:s,navigationType:n="POP",navigator:a,static:i=!1}){ce(!Dr(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let l=t.replace(/^\/*/,"/"),o=v.useMemo(()=>({basename:l,navigator:a,static:i,future:{}}),[l,a,i]);typeof s=="string"&&(s=Ar(s));let{pathname:c="/",search:d="",hash:u="",state:m=null,key:h="default"}=s,y=v.useMemo(()=>{let g=Vt(c,l);return g==null?null:{location:{pathname:g,search:d,hash:u,state:m,key:h},navigationType:n}},[l,c,d,u,m,h,n]);return yt(y!=null,`<Router basename="${l}"> is not able to match the URL "${c}${d}${u}" because it does not start with the basename, so the <Router> won't render anything.`),y==null?null:v.createElement(wt.Provider,{value:o},v.createElement(qn.Provider,{children:e,value:y}))}function Rg({children:t,location:e}){return bg(So(t),e)}function So(t,e=[]){let s=[];return v.Children.forEach(t,(n,a)=>{if(!v.isValidElement(n))return;let i=[...e,a];if(n.type===v.Fragment){s.push.apply(s,So(n.props.children,i));return}ce(n.type===fe,`[${typeof n.type=="string"?n.type:n.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),ce(!n.props.index||!n.props.children,"An index route cannot have child routes.");let l={id:n.props.id||i.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,hydrateFallbackElement:n.props.hydrateFallbackElement,HydrateFallback:n.props.HydrateFallback,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.hasErrorBoundary===!0||n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(l.children=So(n.props.children,i)),s.push(l)}),s}var Pa="get",Aa="application/x-www-form-urlencoded";function Ei(t){return t!=null&&typeof t.tagName=="string"}function Og(t){return Ei(t)&&t.tagName.toLowerCase()==="button"}function Mg(t){return Ei(t)&&t.tagName.toLowerCase()==="form"}function $g(t){return Ei(t)&&t.tagName.toLowerCase()==="input"}function zg(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function Fg(t,e){return t.button===0&&(!e||e==="_self")&&!zg(t)}var ma=null;function Ug(){if(ma===null)try{new FormData(document.createElement("form"),0),ma=!1}catch{ma=!0}return ma}var qg=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function hl(t){return t!=null&&!qg.has(t)?(yt(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Aa}"`),null):t}function Bg(t,e){let s,n,a,i,l;if(Mg(t)){let o=t.getAttribute("action");n=o?Vt(o,e):null,s=t.getAttribute("method")||Pa,a=hl(t.getAttribute("enctype"))||Aa,i=new FormData(t)}else if(Og(t)||$g(t)&&(t.type==="submit"||t.type==="image")){let o=t.form;if(o==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let c=t.getAttribute("formaction")||o.getAttribute("action");if(n=c?Vt(c,e):null,s=t.getAttribute("formmethod")||o.getAttribute("method")||Pa,a=hl(t.getAttribute("formenctype"))||hl(o.getAttribute("enctype"))||Aa,i=new FormData(o,t),!Ug()){let{name:d,type:u,value:m}=t;if(u==="image"){let h=d?`${d}.`:"";i.append(`${h}x`,"0"),i.append(`${h}y`,"0")}else d&&i.append(d,m)}}else{if(Ei(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');s=Pa,n=null,a=Aa,l=t}return i&&a==="text/plain"&&(l=i,i=void 0),{action:n,method:s.toLowerCase(),encType:a,formData:i,body:l}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Wc(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Wg(t,e,s){let n=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return n.pathname==="/"?n.pathname=`_root.${s}`:e&&Vt(n.pathname,e)==="/"?n.pathname=`${e.replace(/\/$/,"")}/_root.${s}`:n.pathname=`${n.pathname.replace(/\/$/,"")}.${s}`,n}async function Vg(t,e){if(t.id in e)return e[t.id];try{let s=await import(t.module);return e[t.id]=s,s}catch(s){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(s),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Hg(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function Kg(t,e,s){let n=await Promise.all(t.map(async a=>{let i=e.routes[a.route.id];if(i){let l=await Vg(i,s);return l.links?l.links():[]}return[]}));return Yg(n.flat(1).filter(Hg).filter(a=>a.rel==="stylesheet"||a.rel==="preload").map(a=>a.rel==="stylesheet"?{...a,rel:"prefetch",as:"style"}:{...a,rel:"prefetch"}))}function yu(t,e,s,n,a,i){let l=(c,d)=>s[d]?c.route.id!==s[d].route.id:!0,o=(c,d)=>{var u;return s[d].pathname!==c.pathname||((u=s[d].route.path)==null?void 0:u.endsWith("*"))&&s[d].params["*"]!==c.params["*"]};return i==="assets"?e.filter((c,d)=>l(c,d)||o(c,d)):i==="data"?e.filter((c,d)=>{var m;let u=n.routes[c.route.id];if(!u||!u.hasLoader)return!1;if(l(c,d)||o(c,d))return!0;if(c.route.shouldRevalidate){let h=c.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:((m=s[0])==null?void 0:m.params)||{},nextUrl:new URL(t,window.origin),nextParams:c.params,defaultShouldRevalidate:!0});if(typeof h=="boolean")return h}return!0}):[]}function Qg(t,e,{includeHydrateFallback:s}={}){return Gg(t.map(n=>{let a=e.routes[n.route.id];if(!a)return[];let i=[a.module];return a.clientActionModule&&(i=i.concat(a.clientActionModule)),a.clientLoaderModule&&(i=i.concat(a.clientLoaderModule)),s&&a.hydrateFallbackModule&&(i=i.concat(a.hydrateFallbackModule)),a.imports&&(i=i.concat(a.imports)),i}).flat(1))}function Gg(t){return[...new Set(t)]}function Jg(t){let e={},s=Object.keys(t).sort();for(let n of s)e[n]=t[n];return e}function Yg(t,e){let s=new Set;return new Set(e),t.reduce((n,a)=>{let i=JSON.stringify(Jg(a));return s.has(i)||(s.add(i),n.push({key:i,link:a})),n},[])}function bf(){let t=v.useContext(Lr);return Wc(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function Xg(){let t=v.useContext(Ci);return Wc(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var Vc=v.createContext(void 0);Vc.displayName="FrameworkContext";function jf(){let t=v.useContext(Vc);return Wc(t,"You must render this element inside a <HydratedRouter> element"),t}function Zg(t,e){let s=v.useContext(Vc),[n,a]=v.useState(!1),[i,l]=v.useState(!1),{onFocus:o,onBlur:c,onMouseEnter:d,onMouseLeave:u,onTouchStart:m}=e,h=v.useRef(null);v.useEffect(()=>{if(t==="render"&&l(!0),t==="viewport"){let b=p=>{p.forEach(f=>{l(f.isIntersecting)})},x=new IntersectionObserver(b,{threshold:.5});return h.current&&x.observe(h.current),()=>{x.disconnect()}}},[t]),v.useEffect(()=>{if(n){let b=setTimeout(()=>{l(!0)},100);return()=>{clearTimeout(b)}}},[n]);let y=()=>{a(!0)},g=()=>{a(!1),l(!1)};return s?t!=="intent"?[i,h,{}]:[i,h,{onFocus:Kr(o,y),onBlur:Kr(c,g),onMouseEnter:Kr(d,y),onMouseLeave:Kr(u,g),onTouchStart:Kr(m,y)}]:[!1,h,{}]}function Kr(t,e){return s=>{t&&t(s),s.defaultPrevented||e(s)}}function ev({page:t,...e}){let{router:s}=bf(),n=v.useMemo(()=>hf(s.routes,t,s.basename),[s.routes,t,s.basename]);return n?v.createElement(sv,{page:t,matches:n,...e}):null}function tv(t){let{manifest:e,routeModules:s}=jf(),[n,a]=v.useState([]);return v.useEffect(()=>{let i=!1;return Kg(t,e,s).then(l=>{i||a(l)}),()=>{i=!0}},[t,e,s]),n}function sv({page:t,matches:e,...s}){let n=At(),{manifest:a,routeModules:i}=jf(),{basename:l}=bf(),{loaderData:o,matches:c}=Xg(),d=v.useMemo(()=>yu(t,e,c,a,n,"data"),[t,e,c,a,n]),u=v.useMemo(()=>yu(t,e,c,a,n,"assets"),[t,e,c,a,n]),m=v.useMemo(()=>{if(t===n.pathname+n.search+n.hash)return[];let g=new Set,b=!1;if(e.forEach(p=>{var w;let f=a.routes[p.route.id];!f||!f.hasLoader||(!d.some(j=>j.route.id===p.route.id)&&p.route.id in o&&((w=i[p.route.id])!=null&&w.shouldRevalidate)||f.hasClientLoader?b=!0:g.add(p.route.id))}),g.size===0)return[];let x=Wg(t,l,"data");return b&&g.size>0&&x.searchParams.set("_routes",e.filter(p=>g.has(p.route.id)).map(p=>p.route.id).join(",")),[x.pathname+x.search]},[l,o,n,a,d,e,t,i]),h=v.useMemo(()=>Qg(u,a),[u,a]),y=tv(u);return v.createElement(v.Fragment,null,m.map(g=>v.createElement("link",{key:g,rel:"prefetch",as:"fetch",href:g,...s})),h.map(g=>v.createElement("link",{key:g,rel:"modulepreload",href:g,...s})),y.map(({key:g,link:b})=>v.createElement("link",{key:g,nonce:s.nonce,...b})))}function rv(...t){return e=>{t.forEach(s=>{typeof s=="function"?s(e):s!=null&&(s.current=e)})}}var Nf=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Nf&&(window.__reactRouterVersion="7.8.1")}catch{}function nv({basename:t,children:e,window:s}){let n=v.useRef();n.current==null&&(n.current=Vx({window:s,v5Compat:!0}));let a=n.current,[i,l]=v.useState({action:a.action,location:a.location}),o=v.useCallback(c=>{v.startTransition(()=>l(c))},[l]);return v.useLayoutEffect(()=>a.listen(o),[a,o]),v.createElement(Dg,{basename:t,children:e,location:i.location,navigationType:i.action,navigator:a})}var kf=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Wn=v.forwardRef(function({onClick:e,discover:s="render",prefetch:n="none",relative:a,reloadDocument:i,replace:l,state:o,target:c,to:d,preventScrollReset:u,viewTransition:m,...h},y){let{basename:g}=v.useContext(wt),b=typeof d=="string"&&kf.test(d),x,p=!1;if(typeof d=="string"&&b&&(x=d,Nf))try{let O=new URL(window.location.href),L=d.startsWith("//")?new URL(O.protocol+d):new URL(d),E=Vt(L.pathname,g);L.origin===O.origin&&E!=null?d=E+L.search+L.hash:p=!0}catch{yt(!1,`<Link to="${d}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let f=vg(d,{relative:a}),[w,j,_]=Zg(n,h),N=ov(d,{replace:l,state:o,target:c,preventScrollReset:u,relative:a,viewTransition:m});function k(O){e&&e(O),O.defaultPrevented||N(O)}let S=v.createElement("a",{...h,..._,href:x||f,onClick:p||i?e:k,ref:rv(y,j),target:c,"data-discover":!b&&s==="render"?"true":void 0});return w&&!b?v.createElement(v.Fragment,null,S,v.createElement(ev,{page:f})):S});Wn.displayName="Link";var av=v.forwardRef(function({"aria-current":e="page",caseSensitive:s=!1,className:n="",end:a=!1,style:i,to:l,viewTransition:o,children:c,...d},u){let m=Bn(l,{relative:d.relative}),h=At(),y=v.useContext(Ci),{navigator:g,basename:b}=v.useContext(wt),x=y!=null&&mv(m)&&o===!0,p=g.encodeLocation?g.encodeLocation(m).pathname:m.pathname,f=h.pathname,w=y&&y.navigation&&y.navigation.location?y.navigation.location.pathname:null;s||(f=f.toLowerCase(),w=w?w.toLowerCase():null,p=p.toLowerCase()),w&&b&&(w=Vt(w,b)||w);const j=p!=="/"&&p.endsWith("/")?p.length-1:p.length;let _=f===p||!a&&f.startsWith(p)&&f.charAt(j)==="/",N=w!=null&&(w===p||!a&&w.startsWith(p)&&w.charAt(p.length)==="/"),k={isActive:_,isPending:N,isTransitioning:x},S=_?e:void 0,O;typeof n=="function"?O=n(k):O=[n,_?"active":null,N?"pending":null,x?"transitioning":null].filter(Boolean).join(" ");let L=typeof i=="function"?i(k):i;return v.createElement(Wn,{...d,"aria-current":S,className:O,ref:u,style:L,to:l,viewTransition:o},typeof c=="function"?c(k):c)});av.displayName="NavLink";var iv=v.forwardRef(({discover:t="render",fetcherKey:e,navigate:s,reloadDocument:n,replace:a,state:i,method:l=Pa,action:o,onSubmit:c,relative:d,preventScrollReset:u,viewTransition:m,...h},y)=>{let g=uv(),b=hv(o,{relative:d}),x=l.toLowerCase()==="get"?"get":"post",p=typeof o=="string"&&kf.test(o),f=w=>{if(c&&c(w),w.defaultPrevented)return;w.preventDefault();let j=w.nativeEvent.submitter,_=(j==null?void 0:j.getAttribute("formmethod"))||l;g(j||w.currentTarget,{fetcherKey:e,method:_,navigate:s,replace:a,state:i,relative:d,preventScrollReset:u,viewTransition:m})};return v.createElement("form",{ref:y,method:x,action:b,onSubmit:n?c:f,...h,"data-discover":!p&&t==="render"?"true":void 0})});iv.displayName="Form";function lv(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function _f(t){let e=v.useContext(Lr);return ce(e,lv(t)),e}function ov(t,{target:e,replace:s,state:n,preventScrollReset:a,relative:i,viewTransition:l}={}){let o=jt(),c=At(),d=Bn(t,{relative:i});return v.useCallback(u=>{if(Fg(u,e)){u.preventDefault();let m=s!==void 0?s:An(c)===An(d);o(t,{replace:m,state:n,preventScrollReset:a,relative:i,viewTransition:l})}},[c,o,d,s,n,e,t,a,i,l])}var cv=0,dv=()=>`__${String(++cv)}__`;function uv(){let{router:t}=_f("useSubmit"),{basename:e}=v.useContext(wt),s=Ig();return v.useCallback(async(n,a={})=>{let{action:i,method:l,encType:o,formData:c,body:d}=Bg(n,e);if(a.navigate===!1){let u=a.fetcherKey||dv();await t.fetch(u,s,a.action||i,{preventScrollReset:a.preventScrollReset,formData:c,body:d,formMethod:a.method||l,formEncType:a.encType||o,flushSync:a.flushSync})}else await t.navigate(a.action||i,{preventScrollReset:a.preventScrollReset,formData:c,body:d,formMethod:a.method||l,formEncType:a.encType||o,replace:a.replace,state:a.state,fromRouteId:s,flushSync:a.flushSync,viewTransition:a.viewTransition})},[t,e,s])}function hv(t,{relative:e}={}){let{basename:s}=v.useContext(wt),n=v.useContext(bt);ce(n,"useFormAction must be used inside a RouteContext");let[a]=n.matches.slice(-1),i={...Bn(t||".",{relative:e})},l=At();if(t==null){i.search=l.search;let o=new URLSearchParams(i.search),c=o.getAll("index");if(c.some(u=>u==="")){o.delete("index"),c.filter(m=>m).forEach(m=>o.append("index",m));let u=o.toString();i.search=u?`?${u}`:""}}return(!t||t===".")&&a.route.index&&(i.search=i.search?i.search.replace(/^\?/,"?index&"):"?index"),s!=="/"&&(i.pathname=i.pathname==="/"?s:Ft([s,i.pathname])),An(i)}function mv(t,{relative:e}={}){let s=v.useContext(xf);ce(s!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=_f("useViewTransitionState"),a=Bn(t,{relative:e});if(!s.isTransitioning)return!1;let i=Vt(s.currentLocation.pathname,n)||s.currentLocation.pathname,l=Vt(s.nextLocation.pathname,n)||s.nextLocation.pathname;return ai(a.pathname,l)!=null||ai(a.pathname,i)!=null}/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var fv={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pv=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),U=(t,e)=>{const s=v.forwardRef(({color:n="currentColor",size:a=24,strokeWidth:i=2,absoluteStrokeWidth:l,className:o="",children:c,...d},u)=>v.createElement("svg",{ref:u,...fv,width:a,height:a,stroke:n,strokeWidth:l?Number(i)*24/Number(a):i,className:["lucide",`lucide-${pv(t)}`,o].join(" "),...d},[...e.map(([m,h])=>v.createElement(m,h)),...Array.isArray(c)?c:[c]]));return s.displayName=`${t}`,s};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hc=U("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ml=U("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ht=U("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sf=U("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xv=U("ArrowUpRight",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cf=U("Banknote",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M6 12h.01M18 12h.01",key:"113zkx"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gv=U("BarChart2",[["line",{x1:"18",x2:"18",y1:"20",y2:"10",key:"1xfpm4"}],["line",{x1:"12",x2:"12",y1:"20",y2:"4",key:"be30l9"}],["line",{x1:"6",x2:"6",y1:"20",y2:"14",key:"1r4le6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const La=U("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ef=U("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kc=U("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ln=U("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vv=U("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Co=U("ClipboardList",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pt=U("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yv=U("Cog",[["path",{d:"M12 20a8 8 0 1 0 0-16 8 8 0 0 0 0 16Z",key:"sobvz5"}],["path",{d:"M12 14a2 2 0 1 0 0-4 2 2 0 0 0 0 4Z",key:"11i496"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 22v-2",key:"1osdcq"}],["path",{d:"m17 20.66-1-1.73",key:"eq3orb"}],["path",{d:"M11 10.27 7 3.34",key:"16pf9h"}],["path",{d:"m20.66 17-1.73-1",key:"sg0v6f"}],["path",{d:"m3.34 7 1.73 1",key:"1ulond"}],["path",{d:"M14 12h8",key:"4f43i9"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"m20.66 7-1.73 1",key:"1ow05n"}],["path",{d:"m3.34 17 1.73-1",key:"nuk764"}],["path",{d:"m17 3.34-1 1.73",key:"2wel8s"}],["path",{d:"m11 13.73-4 6.93",key:"794ttg"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const as=U("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ti=U("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fs=U("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wv=U("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bv=U("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wu=U("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dn=U("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hr=U("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bu=U("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jv=U("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nv=U("HardDrive",[["line",{x1:"22",x2:"2",y1:"12",y2:"12",key:"1y58io"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}],["line",{x1:"6",x2:"6.01",y1:"16",y2:"16",key:"sgf278"}],["line",{x1:"10",x2:"10.01",y1:"16",y2:"16",key:"1l4acy"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kv=U("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ju=U("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _v=U("Key",[["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["path",{d:"m15.5 7.5 3 3L22 7l-3-3",key:"1rn1fs"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qc=U("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tf=U("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sv=U("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cv=U("PackageCheck",[["path",{d:"m16 16 2 2 4-4",key:"gfu2re"}],["path",{d:"M21 10V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l2-1.14",key:"e7tb2h"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["line",{x1:"12",x2:"12",y1:"22",y2:"12",key:"a4e8g8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Eo=U("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ev=U("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gc=U("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tv=U("PieChart",[["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}],["path",{d:"M22 12A10 10 0 0 0 12 2v10z",key:"1rfc4y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Iv=U("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cr=U("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ii=U("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const If=U("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ii=U("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pv=U("Server",[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Av=U("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lv=U("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xs=U("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gs=U("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nu=U("Trash",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const li=U("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dn=U("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pf=U("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const To=U("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Af=U("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dv=U("Wallet",[["path",{d:"M21 12V7H5a2 2 0 0 1 0-4h14v4",key:"195gfw"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h16v-5",key:"195n9w"}],["path",{d:"M18 12a2 2 0 0 0 0 4h4v-4Z",key:"vllfpd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rv=U("WifiOff",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lf=U("Wifi",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fl=U("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Us=U("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),Ov=({icon:t,label:e,view:s,active:n})=>r.jsxs(Wn,{to:`/${s==="dashboard"?"":s}`,className:`flex items-center gap-3 px-4 py-3 rounded-lg cursor-pointer transition-colors ${n?"bg-blue-50 text-blue-700":"text-gray-600 hover:bg-gray-100"}`,children:[r.jsx("span",{className:`${n?"text-blue-600":"text-gray-500"}`,children:t}),r.jsx("span",{className:"font-medium",children:e})]}),Mv=()=>{const t=[{icon:r.jsx(kv,{size:20}),label:"Tableau de bord",view:"dashboard"},{icon:r.jsx(Af,{size:20}),label:"Clients",view:"customers"},{icon:r.jsx(Co,{size:20}),label:"Commandes",view:"orders"},{icon:r.jsx(Lv,{size:20}),label:"Inventaire",view:"inventory"},{icon:r.jsx(Pf,{size:20}),label:"Employés",view:"employees"},{icon:r.jsx(Fs,{size:20}),label:"Paiements",view:"payments"},{icon:r.jsx(hr,{size:20}),label:"Factures",view:"invoices"},{icon:r.jsx(gv,{size:20}),label:"Rapports",view:"reports"},{icon:r.jsx(_v,{size:20}),label:"Accès Clients",view:"client-access"},{icon:r.jsx(Eo,{size:20}),label:"Gestion des Packs",view:"pack-management"},{icon:r.jsx(yv,{size:20}),label:"Services & Produits",view:"simple-service-config"},{icon:r.jsx(Hc,{size:20}),label:"Monitoring",view:"monitoring"},{icon:r.jsx(Ti,{size:20}),label:"Supabase Monitor",view:"supabase-monitoring"},{icon:r.jsx(Av,{size:20}),label:"Paramètres",view:"settings"}],s=At().pathname.split("/")[1]||"dashboard";return r.jsxs("div",{className:"w-64 h-full bg-white p-4 flex flex-col",children:[r.jsx("div",{className:"flex-shrink-0 mb-6",children:r.jsxs(Wn,{to:"/",className:"flex items-center gap-3 px-4",children:[r.jsx("div",{className:"w-8 h-8 bg-blue-600 rounded-md flex items-center justify-center",children:r.jsx(Co,{size:20,className:"text-white"})}),r.jsx("h1",{className:"text-xl font-bold text-gray-900",children:"BlanchPro"})]})}),r.jsx("div",{className:"flex-1 overflow-y-auto flex flex-col gap-1 pb-4",children:t.map(n=>{const a=s===n.view||s===""&&n.view==="dashboard";return r.jsx(Ov,{icon:n.icon,label:n.label,view:n.view,active:a},n.view)})}),r.jsxs("div",{className:"flex-shrink-0 pt-4 border-t border-gray-200 bg-white",children:[r.jsx("div",{className:"mb-4",children:r.jsxs("a",{href:"/client-login",target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-3 px-4 py-2 text-sm text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",children:[r.jsx(jv,{size:16}),r.jsx("span",{children:"Portail Client"}),r.jsx("svg",{className:"w-3 h-3 ml-auto",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})})]})}),r.jsxs("div",{className:"flex items-center gap-3 px-4",children:[r.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center",children:r.jsx("span",{className:"text-blue-700 font-medium",children:"DW"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-900",children:"David Wilson"}),r.jsx("p",{className:"text-xs text-gray-500",children:"Gérant"})]})]})]})]})},$v=({isRefreshing:t=!1,lastRefresh:e,interval:s=3e4,className:n=""})=>{const[a,i]=v.useState(0),[l,o]=v.useState(navigator.onLine);v.useEffect(()=>{if(!e)return;const d=()=>{const m=Date.now(),h=e.getTime()+s,y=Math.max(0,h-m);i(y)};d();const u=setInterval(d,1e3);return()=>clearInterval(u)},[e,s]),v.useEffect(()=>{const d=()=>o(!0),u=()=>o(!1);return window.addEventListener("online",d),window.addEventListener("offline",u),()=>{window.removeEventListener("online",d),window.removeEventListener("offline",u)}},[]);const c=d=>{const u=Math.floor(d/1e3);if(u<60)return`${u}s`;const m=Math.floor(u/60),h=u%60;return`${m}m ${h}s`};return r.jsxs("div",{className:`flex items-center gap-2 text-sm ${n}`,children:[r.jsxs("div",{className:"flex items-center gap-1",children:[l?r.jsx(Lf,{className:"w-4 h-4 text-green-500"}):r.jsx(Rv,{className:"w-4 h-4 text-red-500"}),r.jsx("span",{className:`text-xs ${l?"text-green-600":"text-red-600"}`,children:l?"En ligne":"Hors ligne"})]}),r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(ii,{className:`w-4 h-4 ${t?"animate-spin text-blue-500":"text-gray-400"}`}),r.jsx("span",{className:"text-xs text-gray-600",children:t?"Actualisation...":a>0?`Prochaine: ${c(a)}`:e?`Mis à jour: ${e.toLocaleTimeString()}`:"En attente..."})]})]})},pl=[{id:"1",name:"Jean Dupont",email:"jean@exemple.fr",phone:"01-23-45-67-89",address:"123 Rue Principale",city:"Paris",postalCode:"75001",notes:"Préfère les détergents écologiques",createdAt:new Date("2025-01-15")},{id:"2",name:"Marie Martin",email:"marie@exemple.fr",phone:"01-23-45-67-90",address:"456 Avenue des Fleurs",city:"Lyon",postalCode:"69001",notes:"Allergique à certains adoucissants",createdAt:new Date("2025-02-20")},{id:"3",name:"Robert Bernard",email:"robert@exemple.fr",phone:"01-23-45-67-91",address:"789 Boulevard du Parc",city:"Marseille",postalCode:"13001",notes:"Client VIP",createdAt:new Date("2025-03-10")},{id:"4",name:"Sophie Petit",email:"sophie@exemple.fr",phone:"01-23-45-67-92",address:"321 Rue des Lilas",city:"Toulouse",postalCode:"31000",notes:"",createdAt:new Date("2025-04-05")},{id:"5",name:"Michel Durand",email:"michel@exemple.fr",phone:"01-23-45-67-93",address:"654 Avenue de la République",city:"Bordeaux",postalCode:"33000",notes:"Paie généralement par carte",createdAt:new Date("2025-05-12")}],ye=[{id:"1",name:"Lavage & Pliage",price:2.5,description:"Par kilo, linge normal",estimatedTime:24},{id:"2",name:"Nettoyage à sec",price:6,description:"Par pièce, vêtements standards",estimatedTime:48},{id:"3",name:"Lavage Express",price:3.5,description:"Par kilo, service le jour même",estimatedTime:8},{id:"4",name:"Literie",price:15,description:"Par pièce, couettes et couvertures",estimatedTime:48},{id:"5",name:"Repassage",price:3,description:"Par pièce, chemises et pantalons",estimatedTime:24}],xl=[{id:"1",customerId:"1",services:[{...ye[0],quantity:10},{...ye[4],quantity:5}],items:[{id:"item_1_1",productName:"Lavage & Pliage",quantity:10,unitPrice:2.5,total:25},{id:"item_1_2",productName:"Repassage",quantity:5,unitPrice:3,total:15}],status:"pret",totalAmount:35.5,paid:!0,paymentMethod:"card",notes:"10 kilos de linge + 5 chemises à repasser",createdAt:new Date("2025-08-15T10:30:00"),updatedAt:new Date("2025-08-16T14:15:00"),dueDate:new Date("2025-08-17T17:00:00")},{id:"2",customerId:"2",services:[{...ye[1],quantity:7}],items:[{id:"item_2_1",productName:"Nettoyage à sec",quantity:7,unitPrice:6,total:42}],status:"en_traitement",totalAmount:42,paid:!1,paymentMethod:"cash",notes:"7 articles pour nettoyage à sec",createdAt:new Date("2025-08-16T09:15:00"),updatedAt:new Date("2025-08-16T11:30:00"),dueDate:new Date("2025-08-18T17:00:00")},{id:"3",customerId:"3",services:[{...ye[0],quantity:5},{...ye[2],quantity:6}],items:[{id:"item_3_1",productName:"Lavage & Pliage",quantity:5,unitPrice:2.5,total:12.5},{id:"item_3_2",productName:"Lavage Express",quantity:6,unitPrice:3.5,total:21}],status:"lavage",totalAmount:28.75,paid:!0,paymentMethod:"transfer",notes:"Réparti entre normal et express",createdAt:new Date("2025-08-14T14:45:00"),updatedAt:new Date("2025-08-15T15:30:00"),dueDate:new Date("2025-08-16T14:00:00")},{id:"4",customerId:"4",services:[{...ye[3],quantity:2}],items:[{id:"item_4_1",productName:"Literie",quantity:2,unitPrice:15,total:30}],status:"en_attente",totalAmount:30,paid:!1,paymentMethod:"check",notes:"2 couettes",createdAt:new Date("2025-08-13T16:20:00"),updatedAt:new Date("2025-08-13T16:20:00"),dueDate:new Date("2025-08-19T17:00:00")},{id:"5",customerId:"5",services:[{...ye[0],quantity:15},{...ye[4],quantity:2}],items:[{id:"item_5_1",productName:"Lavage & Pliage",quantity:15,unitPrice:2.5,total:37.5},{id:"item_5_2",productName:"Repassage",quantity:2,unitPrice:3,total:6}],status:"pliage",totalAmount:40.25,paid:!0,paymentMethod:"card",notes:"15 kilos de linge + 2 chemises à repasser",createdAt:new Date("2025-08-12T11:15:00"),updatedAt:new Date("2025-08-14T13:45:00"),dueDate:new Date("2025-08-15T12:00:00")},{id:"6",customerId:"1",services:[{...ye[2],quantity:6}],items:[{id:"item_6_1",productName:"Lavage Express",quantity:6,unitPrice:3.5,total:21}],status:"livre",totalAmount:21,paid:!0,paymentMethod:"cash",notes:"6 kilos express",createdAt:new Date("2025-08-10T08:30:00"),updatedAt:new Date("2025-08-10T18:15:00"),dueDate:new Date("2025-08-10T18:00:00")},{id:"7",customerId:"3",services:[{...ye[1],quantity:9},{...ye[4],quantity:0}],items:[{id:"item_7_1",productName:"Nettoyage à sec",quantity:9,unitPrice:6,total:54}],status:"pret",totalAmount:54,paid:!1,paymentMethod:"transfer",notes:"9 articles nettoyage à sec + repassage",createdAt:new Date("2025-08-08T14:20:00"),updatedAt:new Date("2025-08-11T16:30:00"),dueDate:new Date("2025-08-12T17:00:00")},{id:"8",customerId:"2",services:[{...ye[0],quantity:7}],items:[{id:"item_8_1",productName:"Lavage & Pliage",quantity:7,unitPrice:2.5,total:17.5}],status:"livre",totalAmount:17.5,paid:!0,paymentMethod:"card",notes:"7 kilos de linge standard",createdAt:new Date("2025-07-28T10:45:00"),updatedAt:new Date("2025-07-30T14:20:00"),dueDate:new Date("2025-07-30T17:00:00")},{id:"9",customerId:"4",services:[{...ye[3],quantity:1},{...ye[0],quantity:7}],items:[{id:"item_9_1",productName:"Literie",quantity:1,unitPrice:15,total:15},{id:"item_9_2",productName:"Lavage & Pliage",quantity:7,unitPrice:2.5,total:17.5}],status:"livre",totalAmount:32.5,paid:!0,paymentMethod:"cash",notes:"1 couette + 7 kilos linge",createdAt:new Date("2025-07-25T16:10:00"),updatedAt:new Date("2025-07-27T12:45:00"),dueDate:new Date("2025-07-27T17:00:00")},{id:"10",customerId:"5",services:[{...ye[4],quantity:8}],items:[{id:"item_10_1",productName:"Repassage",quantity:8,unitPrice:3,total:24}],status:"livre",totalAmount:24,paid:!0,paymentMethod:"check",notes:"8 chemises à repasser",createdAt:new Date("2025-07-20T09:30:00"),updatedAt:new Date("2025-07-21T15:15:00"),dueDate:new Date("2025-07-21T17:00:00")}],gl=[{id:"inv_1",invoiceNumber:"INV-2025-001",orderId:"1",customerId:"1",issueDate:new Date("2025-08-16T14:15:00"),dueDate:new Date("2025-09-15T23:59:59"),items:[{id:"inv_item_1_1",description:"Lavage & Pliage - 10kg",quantity:10,unitPrice:2.5,total:25},{id:"inv_item_1_2",description:"Repassage - 5 pièces",quantity:5,unitPrice:3,total:15}],subtotal:40,tax:8,discount:0,total:48,notes:"Paiement par carte bancaire",status:"paid",createdAt:new Date("2025-08-16T14:15:00"),updatedAt:new Date("2025-08-16T14:15:00")},{id:"inv_2",invoiceNumber:"INV-2025-002",orderId:"6",customerId:"1",issueDate:new Date("2025-08-10T18:15:00"),dueDate:new Date("2025-09-09T23:59:59"),items:[{id:"inv_item_2_1",description:"Lavage Express - 6kg",quantity:6,unitPrice:3.5,total:21}],subtotal:21,tax:4.2,discount:0,total:25.2,notes:"Paiement en espèces",status:"paid",createdAt:new Date("2025-08-10T18:15:00"),updatedAt:new Date("2025-08-10T18:15:00")},{id:"inv_3",invoiceNumber:"INV-2025-003",orderId:"7",customerId:"3",issueDate:new Date("2025-08-11T16:30:00"),dueDate:new Date("2025-09-10T23:59:59"),items:[{id:"inv_item_3_1",description:"Nettoyage à sec - 9 articles",quantity:9,unitPrice:6,total:54}],subtotal:54,tax:10.8,discount:0,total:64.8,notes:"En attente de paiement par virement",status:"sent",createdAt:new Date("2025-08-11T16:30:00"),updatedAt:new Date("2025-08-11T16:30:00")}],vl=[{id:"1",name:"David Martin",role:"gerant",email:"david@blanchpro.fr",phone:"01-23-45-67-94"},{id:"2",name:"Lisa Garcia",role:"operateur",email:"lisa@blanchpro.fr",phone:"01-23-45-67-95"},{id:"3",name:"Thomas Leroy",role:"comptoir",email:"thomas@blanchpro.fr",phone:"01-23-45-67-96"},{id:"4",name:"Maria Rodriguez",role:"livreur",email:"maria@blanchpro.fr",phone:"01-23-45-67-97"}],Da=[{id:"1",name:"Lessive Standard",quantity:25,unit:"litres",reorderLevel:10},{id:"2",name:"Lessive Écologique",quantity:8,unit:"litres",reorderLevel:5},{id:"3",name:"Adoucissant",quantity:15,unit:"litres",reorderLevel:7},{id:"4",name:"Eau de Javel",quantity:12,unit:"litres",reorderLevel:6},{id:"5",name:"Détachant",quantity:4,unit:"bouteilles",reorderLevel:5},{id:"6",name:"Feuilles Assouplissantes",quantity:300,unit:"feuilles",reorderLevel:100},{id:"7",name:"Sacs à Linge",quantity:85,unit:"sacs",reorderLevel:50}],yl=[{id:"access_1",customerId:"1",accessCode:"JEAN2025",isActive:!0,createdAt:new Date("2025-01-15"),lastLogin:new Date("2025-08-25")},{id:"access_2",customerId:"2",accessCode:"MARIE789",isActive:!0,createdAt:new Date("2025-02-20"),lastLogin:new Date("2025-08-20")},{id:"access_3",customerId:"3",accessCode:"ROBERT456",isActive:!0,createdAt:new Date("2025-03-10"),lastLogin:new Date("2025-08-15")},{id:"access_4",customerId:"4",accessCode:"SOPHIE123",isActive:!0,createdAt:new Date("2025-04-05")},{id:"access_5",customerId:"5",accessCode:"MICHEL999",isActive:!0,createdAt:new Date("2025-05-12"),lastLogin:new Date("2025-08-10")}],wl=[{id:"pack_1",name:"Pack Familial Standard",description:"Idéal pour une famille de 4 personnes - Lavage et pliage de 15kg de linge",services:[{serviceId:"1",serviceName:"Lavage & Pliage",quantity:15,unitPrice:2.5}],totalPrice:37.5,estimatedTime:24,isActive:!0,category:"standard"},{id:"pack_2",name:"Pack Express Professionnel",description:"Service rapide pour professionnels - Lavage express + repassage de chemises",services:[{serviceId:"3",serviceName:"Lavage Express",quantity:8,unitPrice:3.5},{serviceId:"5",serviceName:"Repassage",quantity:10,unitPrice:3}],totalPrice:58,estimatedTime:8,isActive:!0,category:"express"},{id:"pack_3",name:"Pack Premium Complet",description:"Service haut de gamme - Nettoyage à sec + repassage premium",services:[{serviceId:"2",serviceName:"Nettoyage à sec",quantity:5,unitPrice:6},{serviceId:"5",serviceName:"Repassage",quantity:5,unitPrice:3}],totalPrice:45,estimatedTime:48,isActive:!0,category:"premium"},{id:"pack_4",name:"Pack Literie Confort",description:"Spécialisé literie - Couettes, oreillers et couvertures",services:[{serviceId:"4",serviceName:"Literie",quantity:3,unitPrice:15}],totalPrice:45,estimatedTime:48,isActive:!0,category:"literie"},{id:"pack_5",name:"Pack Économique",description:"Solution économique - Lavage simple 10kg",services:[{serviceId:"1",serviceName:"Lavage & Pliage",quantity:10,unitPrice:2.5}],totalPrice:25,estimatedTime:24,isActive:!0,category:"standard"},{id:"pack_6",name:"Pack Professionnel Grande Capacité",description:"Pour entreprises - Lavage et repassage en grande quantité",services:[{serviceId:"1",serviceName:"Lavage & Pliage",quantity:25,unitPrice:2.5},{serviceId:"5",serviceName:"Repassage",quantity:15,unitPrice:3}],totalPrice:107.5,estimatedTime:48,isActive:!0,category:"professionnel"}],bl=[{id:"client_order_1",clientAccessId:"access_1",customerId:"1",packs:[{packId:"pack_1",packName:"Pack Familial Standard",quantity:1,unitPrice:37.5,total:37.5}],totalAmount:37.5,status:"en_traitement",notes:"Commande passée via le portail client",pickupDate:new Date("2025-08-28"),deliveryDate:new Date("2025-08-29"),createdAt:new Date("2025-08-26"),updatedAt:new Date("2025-08-26")},{id:"client_order_2",clientAccessId:"access_2",customerId:"2",packs:[{packId:"pack_2",packName:"Pack Express Professionnel",quantity:1,unitPrice:58,total:58}],totalAmount:58,status:"pret",notes:"Urgent - commande express",pickupDate:new Date("2025-08-26"),deliveryDate:new Date("2025-08-27"),createdAt:new Date("2025-08-25"),updatedAt:new Date("2025-08-26")}];var ku={};const fa={SUPABASE:{URL:"https://zmtotombhpklllxjuirb.supabase.co",ANON_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InptdG90b21iaHBrbGxseGp1aXJiIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTg2OTQwMjcsImV4cCI6MjA3NDI3MDAyN30.VMNxE-Tw-YGCsHzWhnx11xqVYsHMzgg4dfhtxKbocJg"},JSONBIN:{BASE_URL:"https://api.jsonbin.io/v3/b",API_KEY:"$2a$10$9vKvO8rjYoN3qF5mP2sL4eH6tG8wR1xZ3cV7bN9mQ4kJ6fD2aS8pL",BIN_ID:"673f2a1bad19ca34f8c8e5d2"},CACHE_DURATION:5*60*1e3,USE_SUPABASE:!0,USE_REMOTE_DB:!1,FALLBACK_TO_LOCAL:!0},zv=()=>({...fa,SUPABASE:{URL:"https://zmtotombhpklllxjuirb.supabase.co",ANON_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InptdG90b21iaHBrbGxseGp1aXJiIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTg2OTQwMjcsImV4cCI6MjA3NDI3MDAyN30.VMNxE-Tw-YGCsHzWhnx11xqVYsHMzgg4dfhtxKbocJg"},JSONBIN:{...fa.JSONBIN,API_KEY:ku.REACT_APP_JSONBIN_API_KEY||fa.JSONBIN.API_KEY,BIN_ID:ku.REACT_APP_JSONBIN_BIN_ID||fa.JSONBIN.BIN_ID}}),Fv="modulepreload",Uv=function(t){return"/"+t},_u={},Vn=function(e,s,n){let a=Promise.resolve();if(s&&s.length>0){document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),o=(l==null?void 0:l.nonce)||(l==null?void 0:l.getAttribute("nonce"));a=Promise.allSettled(s.map(c=>{if(c=Uv(c),c in _u)return;_u[c]=!0;const d=c.endsWith(".css"),u=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${u}`))return;const m=document.createElement("link");if(m.rel=d?"stylesheet":Fv,d||(m.as="script"),m.crossOrigin="",m.href=c,o&&m.setAttribute("nonce",o),document.head.appendChild(m),d)return new Promise((h,y)=>{m.addEventListener("load",h),m.addEventListener("error",()=>y(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(l){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=l,window.dispatchEvent(o),!o.defaultPrevented)throw l}return a.then(l=>{for(const o of l||[])o.status==="rejected"&&i(o.reason);return e().catch(i)})},qv=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...s)=>Vn(async()=>{const{default:n}=await Promise.resolve().then(()=>Rr);return{default:n}},[]).then(({default:n})=>n(...s)):e=fetch,(...s)=>e(...s)};class Jc extends Error{constructor(e,s="FunctionsError",n){super(e),this.name=s,this.context=n}}class Bv extends Jc{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class Su extends Jc{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class Cu extends Jc{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Io;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(Io||(Io={}));var Wv=function(t,e,s,n){function a(i){return i instanceof s?i:new s(function(l){l(i)})}return new(s||(s=Promise))(function(i,l){function o(u){try{d(n.next(u))}catch(m){l(m)}}function c(u){try{d(n.throw(u))}catch(m){l(m)}}function d(u){u.done?i(u.value):a(u.value).then(o,c)}d((n=n.apply(t,e||[])).next())})};class Vv{constructor(e,{headers:s={},customFetch:n,region:a=Io.Any}={}){this.url=e,this.headers=s,this.region=a,this.fetch=qv(n)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,s={}){var n;return Wv(this,void 0,void 0,function*(){try{const{headers:a,method:i,body:l}=s;let o={},{region:c}=s;c||(c=this.region);const d=new URL(`${this.url}/${e}`);c&&c!=="any"&&(o["x-region"]=c,d.searchParams.set("forceFunctionRegion",c));let u;l&&(a&&!Object.prototype.hasOwnProperty.call(a,"Content-Type")||!a)&&(typeof Blob<"u"&&l instanceof Blob||l instanceof ArrayBuffer?(o["Content-Type"]="application/octet-stream",u=l):typeof l=="string"?(o["Content-Type"]="text/plain",u=l):typeof FormData<"u"&&l instanceof FormData?u=l:(o["Content-Type"]="application/json",u=JSON.stringify(l)));const m=yield this.fetch(d.toString(),{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},o),this.headers),a),body:u}).catch(b=>{throw new Bv(b)}),h=m.headers.get("x-relay-error");if(h&&h==="true")throw new Su(m);if(!m.ok)throw new Cu(m);let y=((n=m.headers.get("Content-Type"))!==null&&n!==void 0?n:"text/plain").split(";")[0].trim(),g;return y==="application/json"?g=yield m.json():y==="application/octet-stream"?g=yield m.blob():y==="text/event-stream"?g=m:y==="multipart/form-data"?g=yield m.formData():g=yield m.text(),{data:g,error:null,response:m}}catch(a){return{data:null,error:a,response:a instanceof Cu||a instanceof Su?a.context:void 0}}})}}var Fe={},Yc={},Pi={},Hn={},Ai={},Li={},Hv=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Er=Hv();const Kv=Er.fetch,Df=Er.fetch.bind(Er),Rf=Er.Headers,Qv=Er.Request,Gv=Er.Response,Rr=Object.freeze(Object.defineProperty({__proto__:null,Headers:Rf,Request:Qv,Response:Gv,default:Df,fetch:Kv},Symbol.toStringTag,{value:"Module"})),Jv=v0(Rr);var Di={};Object.defineProperty(Di,"__esModule",{value:!0});let Yv=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};Di.default=Yv;var Of=rt&&rt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Li,"__esModule",{value:!0});const Xv=Of(Jv),Zv=Of(Di);let ey=class{constructor(e){var s,n;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=(s=e.shouldThrowOnError)!==null&&s!==void 0?s:!1,this.signal=e.signal,this.isMaybeSingle=(n=e.isMaybeSingle)!==null&&n!==void 0?n:!1,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=Xv.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,s){return this.headers=new Headers(this.headers),this.headers.set(e,s),this}then(e,s){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const n=this.fetch;let a=n(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{var l,o,c,d;let u=null,m=null,h=null,y=i.status,g=i.statusText;if(i.ok){if(this.method!=="HEAD"){const f=await i.text();f===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((l=this.headers.get("Accept"))===null||l===void 0)&&l.includes("application/vnd.pgrst.plan+text"))?m=f:m=JSON.parse(f))}const x=(o=this.headers.get("Prefer"))===null||o===void 0?void 0:o.match(/count=(exact|planned|estimated)/),p=(c=i.headers.get("content-range"))===null||c===void 0?void 0:c.split("/");x&&p&&p.length>1&&(h=parseInt(p[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(m)&&(m.length>1?(u={code:"PGRST116",details:`Results contain ${m.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},m=null,h=null,y=406,g="Not Acceptable"):m.length===1?m=m[0]:m=null)}else{const x=await i.text();try{u=JSON.parse(x),Array.isArray(u)&&i.status===404&&(m=[],u=null,y=200,g="OK")}catch{i.status===404&&x===""?(y=204,g="No Content"):u={message:x}}if(u&&this.isMaybeSingle&&(!((d=u==null?void 0:u.details)===null||d===void 0)&&d.includes("0 rows"))&&(u=null,y=200,g="OK"),u&&this.shouldThrowOnError)throw new Zv.default(u)}return{error:u,data:m,count:h,status:y,statusText:g}});return this.shouldThrowOnError||(a=a.catch(i=>{var l,o,c;return{error:{message:`${(l=i==null?void 0:i.name)!==null&&l!==void 0?l:"FetchError"}: ${i==null?void 0:i.message}`,details:`${(o=i==null?void 0:i.stack)!==null&&o!==void 0?o:""}`,hint:"",code:`${(c=i==null?void 0:i.code)!==null&&c!==void 0?c:""}`},data:null,count:null,status:0,statusText:""}})),a.then(e,s)}returns(){return this}overrideTypes(){return this}};Li.default=ey;var ty=rt&&rt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Ai,"__esModule",{value:!0});const sy=ty(Li);let ry=class extends sy.default{select(e){let s=!1;const n=(e??"*").split("").map(a=>/\s/.test(a)&&!s?"":(a==='"'&&(s=!s),a)).join("");return this.url.searchParams.set("select",n),this.headers.append("Prefer","return=representation"),this}order(e,{ascending:s=!0,nullsFirst:n,foreignTable:a,referencedTable:i=a}={}){const l=i?`${i}.order`:"order",o=this.url.searchParams.get(l);return this.url.searchParams.set(l,`${o?`${o},`:""}${e}.${s?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:s,referencedTable:n=s}={}){const a=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(a,`${e}`),this}range(e,s,{foreignTable:n,referencedTable:a=n}={}){const i=typeof a>"u"?"offset":`${a}.offset`,l=typeof a>"u"?"limit":`${a}.limit`;return this.url.searchParams.set(i,`${e}`),this.url.searchParams.set(l,`${s-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:e=!1,verbose:s=!1,settings:n=!1,buffers:a=!1,wal:i=!1,format:l="text"}={}){var o;const c=[e?"analyze":null,s?"verbose":null,n?"settings":null,a?"buffers":null,i?"wal":null].filter(Boolean).join("|"),d=(o=this.headers.get("Accept"))!==null&&o!==void 0?o:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${l}; for="${d}"; options=${c};`),l==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${e}`),this}};Ai.default=ry;var ny=rt&&rt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Hn,"__esModule",{value:!0});const ay=ny(Ai);let iy=class extends ay.default{eq(e,s){return this.url.searchParams.append(e,`eq.${s}`),this}neq(e,s){return this.url.searchParams.append(e,`neq.${s}`),this}gt(e,s){return this.url.searchParams.append(e,`gt.${s}`),this}gte(e,s){return this.url.searchParams.append(e,`gte.${s}`),this}lt(e,s){return this.url.searchParams.append(e,`lt.${s}`),this}lte(e,s){return this.url.searchParams.append(e,`lte.${s}`),this}like(e,s){return this.url.searchParams.append(e,`like.${s}`),this}likeAllOf(e,s){return this.url.searchParams.append(e,`like(all).{${s.join(",")}}`),this}likeAnyOf(e,s){return this.url.searchParams.append(e,`like(any).{${s.join(",")}}`),this}ilike(e,s){return this.url.searchParams.append(e,`ilike.${s}`),this}ilikeAllOf(e,s){return this.url.searchParams.append(e,`ilike(all).{${s.join(",")}}`),this}ilikeAnyOf(e,s){return this.url.searchParams.append(e,`ilike(any).{${s.join(",")}}`),this}is(e,s){return this.url.searchParams.append(e,`is.${s}`),this}in(e,s){const n=Array.from(new Set(s)).map(a=>typeof a=="string"&&new RegExp("[,()]").test(a)?`"${a}"`:`${a}`).join(",");return this.url.searchParams.append(e,`in.(${n})`),this}contains(e,s){return typeof s=="string"?this.url.searchParams.append(e,`cs.${s}`):Array.isArray(s)?this.url.searchParams.append(e,`cs.{${s.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(s)}`),this}containedBy(e,s){return typeof s=="string"?this.url.searchParams.append(e,`cd.${s}`):Array.isArray(s)?this.url.searchParams.append(e,`cd.{${s.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(s)}`),this}rangeGt(e,s){return this.url.searchParams.append(e,`sr.${s}`),this}rangeGte(e,s){return this.url.searchParams.append(e,`nxl.${s}`),this}rangeLt(e,s){return this.url.searchParams.append(e,`sl.${s}`),this}rangeLte(e,s){return this.url.searchParams.append(e,`nxr.${s}`),this}rangeAdjacent(e,s){return this.url.searchParams.append(e,`adj.${s}`),this}overlaps(e,s){return typeof s=="string"?this.url.searchParams.append(e,`ov.${s}`):this.url.searchParams.append(e,`ov.{${s.join(",")}}`),this}textSearch(e,s,{config:n,type:a}={}){let i="";a==="plain"?i="pl":a==="phrase"?i="ph":a==="websearch"&&(i="w");const l=n===void 0?"":`(${n})`;return this.url.searchParams.append(e,`${i}fts${l}.${s}`),this}match(e){return Object.entries(e).forEach(([s,n])=>{this.url.searchParams.append(s,`eq.${n}`)}),this}not(e,s,n){return this.url.searchParams.append(e,`not.${s}.${n}`),this}or(e,{foreignTable:s,referencedTable:n=s}={}){const a=n?`${n}.or`:"or";return this.url.searchParams.append(a,`(${e})`),this}filter(e,s,n){return this.url.searchParams.append(e,`${s}.${n}`),this}};Hn.default=iy;var ly=rt&&rt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Pi,"__esModule",{value:!0});const Qr=ly(Hn);let oy=class{constructor(e,{headers:s={},schema:n,fetch:a}){this.url=e,this.headers=new Headers(s),this.schema=n,this.fetch=a}select(e,{head:s=!1,count:n}={}){const a=s?"HEAD":"GET";let i=!1;const l=(e??"*").split("").map(o=>/\s/.test(o)&&!i?"":(o==='"'&&(i=!i),o)).join("");return this.url.searchParams.set("select",l),n&&this.headers.append("Prefer",`count=${n}`),new Qr.default({method:a,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(e,{count:s,defaultToNull:n=!0}={}){var a;const i="POST";if(s&&this.headers.append("Prefer",`count=${s}`),n||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const l=e.reduce((o,c)=>o.concat(Object.keys(c)),[]);if(l.length>0){const o=[...new Set(l)].map(c=>`"${c}"`);this.url.searchParams.set("columns",o.join(","))}}return new Qr.default({method:i,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}upsert(e,{onConflict:s,ignoreDuplicates:n=!1,count:a,defaultToNull:i=!0}={}){var l;const o="POST";if(this.headers.append("Prefer",`resolution=${n?"ignore":"merge"}-duplicates`),s!==void 0&&this.url.searchParams.set("on_conflict",s),a&&this.headers.append("Prefer",`count=${a}`),i||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const c=e.reduce((d,u)=>d.concat(Object.keys(u)),[]);if(c.length>0){const d=[...new Set(c)].map(u=>`"${u}"`);this.url.searchParams.set("columns",d.join(","))}}return new Qr.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch})}update(e,{count:s}={}){var n;const a="PATCH";return s&&this.headers.append("Prefer",`count=${s}`),new Qr.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}delete({count:e}={}){var s;const n="DELETE";return e&&this.headers.append("Prefer",`count=${e}`),new Qr.default({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}};Pi.default=oy;var Mf=rt&&rt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Yc,"__esModule",{value:!0});const cy=Mf(Pi),dy=Mf(Hn);let uy=class $f{constructor(e,{headers:s={},schema:n,fetch:a}={}){this.url=e,this.headers=new Headers(s),this.schemaName=n,this.fetch=a}from(e){const s=new URL(`${this.url}/${e}`);return new cy.default(s,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new $f(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,s={},{head:n=!1,get:a=!1,count:i}={}){var l;let o;const c=new URL(`${this.url}/rpc/${e}`);let d;n||a?(o=n?"HEAD":"GET",Object.entries(s).filter(([m,h])=>h!==void 0).map(([m,h])=>[m,Array.isArray(h)?`{${h.join(",")}}`:`${h}`]).forEach(([m,h])=>{c.searchParams.append(m,h)})):(o="POST",d=s);const u=new Headers(this.headers);return i&&u.set("Prefer",`count=${i}`),new dy.default({method:o,url:c,headers:u,schema:this.schemaName,body:d,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch})}};Yc.default=uy;var Or=rt&&rt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Fe,"__esModule",{value:!0});Fe.PostgrestError=Fe.PostgrestBuilder=Fe.PostgrestTransformBuilder=Fe.PostgrestFilterBuilder=Fe.PostgrestQueryBuilder=Fe.PostgrestClient=void 0;const zf=Or(Yc);Fe.PostgrestClient=zf.default;const Ff=Or(Pi);Fe.PostgrestQueryBuilder=Ff.default;const Uf=Or(Hn);Fe.PostgrestFilterBuilder=Uf.default;const qf=Or(Ai);Fe.PostgrestTransformBuilder=qf.default;const Bf=Or(Li);Fe.PostgrestBuilder=Bf.default;const Wf=Or(Di);Fe.PostgrestError=Wf.default;var hy=Fe.default={PostgrestClient:zf.default,PostgrestQueryBuilder:Ff.default,PostgrestFilterBuilder:Uf.default,PostgrestTransformBuilder:qf.default,PostgrestBuilder:Bf.default,PostgrestError:Wf.default};const{PostgrestClient:my,PostgrestQueryBuilder:yj,PostgrestFilterBuilder:wj,PostgrestTransformBuilder:bj,PostgrestBuilder:jj,PostgrestError:Nj}=hy;class fy{static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const s=process.versions;if(s&&s.node){const n=s.node,a=parseInt(n.replace(/^v/,"").split(".")[0]);return a>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${a} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${a} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let s=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(s+=`

Suggested solution: ${e.workaround}`),new Error(s)}static createWebSocket(e,s){const n=this.getWebSocketConstructor();return new n(e,s)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const py="2.15.5",xy=`realtime-js/${py}`,gy="1.0.0",Po=1e4,vy=1e3,yy=100;var un;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(un||(un={}));var ve;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(ve||(ve={}));var ft;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(ft||(ft={}));var Ao;(function(t){t.websocket="websocket"})(Ao||(Ao={}));var Es;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(Es||(Es={}));class wy{constructor(){this.HEADER_LENGTH=1}decode(e,s){return e.constructor===ArrayBuffer?s(this._binaryDecode(e)):s(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const s=new DataView(e),n=new TextDecoder;return this._decodeBroadcast(e,s,n)}_decodeBroadcast(e,s,n){const a=s.getUint8(1),i=s.getUint8(2);let l=this.HEADER_LENGTH+2;const o=n.decode(e.slice(l,l+a));l=l+a;const c=n.decode(e.slice(l,l+i));l=l+i;const d=JSON.parse(n.decode(e.slice(l,e.byteLength)));return{ref:null,topic:o,event:c,payload:d}}}class Vf{constructor(e,s){this.callback=e,this.timerCalc=s,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=s}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var ne;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(ne||(ne={}));const Eu=(t,e,s={})=>{var n;const a=(n=s.skipTypes)!==null&&n!==void 0?n:[];return Object.keys(e).reduce((i,l)=>(i[l]=by(l,t,e,a),i),{})},by=(t,e,s,n)=>{const a=e.find(o=>o.name===t),i=a==null?void 0:a.type,l=s[t];return i&&!n.includes(i)?Hf(i,l):Lo(l)},Hf=(t,e)=>{if(t.charAt(0)==="_"){const s=t.slice(1,t.length);return _y(e,s)}switch(t){case ne.bool:return jy(e);case ne.float4:case ne.float8:case ne.int2:case ne.int4:case ne.int8:case ne.numeric:case ne.oid:return Ny(e);case ne.json:case ne.jsonb:return ky(e);case ne.timestamp:return Sy(e);case ne.abstime:case ne.date:case ne.daterange:case ne.int4range:case ne.int8range:case ne.money:case ne.reltime:case ne.text:case ne.time:case ne.timestamptz:case ne.timetz:case ne.tsrange:case ne.tstzrange:return Lo(e);default:return Lo(e)}},Lo=t=>t,jy=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},Ny=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},ky=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},_y=(t,e)=>{if(typeof t!="string")return t;const s=t.length-1,n=t[s];if(t[0]==="{"&&n==="}"){let i;const l=t.slice(1,s);try{i=JSON.parse("["+l+"]")}catch{i=l?l.split(","):[]}return i.map(o=>Hf(e,o))}return t},Sy=t=>typeof t=="string"?t.replace(" ","T"):t,Kf=t=>{let e=t;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")+"/api/broadcast"};class jl{constructor(e,s,n={},a=Po){this.channel=e,this.event=s,this.payload=n,this.timeout=a,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,s){var n;return this._hasReceived(e)&&s((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:e,callback:s}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=s=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=s,this._matchReceive(s)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,s){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:s})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:s}){this.recHooks.filter(n=>n.status===e).forEach(n=>n.callback(s))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var Tu;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(Tu||(Tu={}));class hn{constructor(e,s){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(s==null?void 0:s.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},a=>{const{onJoin:i,onLeave:l,onSync:o}=this.caller;this.joinRef=this.channel._joinRef(),this.state=hn.syncState(this.state,a,i,l),this.pendingDiffs.forEach(c=>{this.state=hn.syncDiff(this.state,c,i,l)}),this.pendingDiffs=[],o()}),this.channel._on(n.diff,{},a=>{const{onJoin:i,onLeave:l,onSync:o}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(a):(this.state=hn.syncDiff(this.state,a,i,l),o())}),this.onJoin((a,i,l)=>{this.channel._trigger("presence",{event:"join",key:a,currentPresences:i,newPresences:l})}),this.onLeave((a,i,l)=>{this.channel._trigger("presence",{event:"leave",key:a,currentPresences:i,leftPresences:l})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,s,n,a){const i=this.cloneDeep(e),l=this.transformState(s),o={},c={};return this.map(i,(d,u)=>{l[d]||(c[d]=u)}),this.map(l,(d,u)=>{const m=i[d];if(m){const h=u.map(x=>x.presence_ref),y=m.map(x=>x.presence_ref),g=u.filter(x=>y.indexOf(x.presence_ref)<0),b=m.filter(x=>h.indexOf(x.presence_ref)<0);g.length>0&&(o[d]=g),b.length>0&&(c[d]=b)}else o[d]=u}),this.syncDiff(i,{joins:o,leaves:c},n,a)}static syncDiff(e,s,n,a){const{joins:i,leaves:l}={joins:this.transformState(s.joins),leaves:this.transformState(s.leaves)};return n||(n=()=>{}),a||(a=()=>{}),this.map(i,(o,c)=>{var d;const u=(d=e[o])!==null&&d!==void 0?d:[];if(e[o]=this.cloneDeep(c),u.length>0){const m=e[o].map(y=>y.presence_ref),h=u.filter(y=>m.indexOf(y.presence_ref)<0);e[o].unshift(...h)}n(o,u,c)}),this.map(l,(o,c)=>{let d=e[o];if(!d)return;const u=c.map(m=>m.presence_ref);d=d.filter(m=>u.indexOf(m.presence_ref)<0),e[o]=d,a(o,d,c),d.length===0&&delete e[o]}),e}static map(e,s){return Object.getOwnPropertyNames(e).map(n=>s(n,e[n]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((s,n)=>{const a=e[n];return"metas"in a?s[n]=a.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):s[n]=a,s},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Iu;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(Iu||(Iu={}));var mn;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(mn||(mn={}));var Rt;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(Rt||(Rt={}));class Xc{constructor(e,s={config:{}},n){this.topic=e,this.params=s,this.socket=n,this.bindings={},this.state=ve.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},s.config),this.timeout=this.socket.timeout,this.joinPush=new jl(this,ft.join,this.params,this.timeout),this.rejoinTimer=new Vf(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=ve.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(a=>a.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=ve.closed,this.socket._remove(this)}),this._onError(a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=ve.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=ve.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=ve.errored,this.rejoinTimer.scheduleTimeout())}),this._on(ft.reply,{},(a,i)=>{this._trigger(this._replyEventName(i),a)}),this.presence=new hn(this),this.broadcastEndpointURL=Kf(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(e,s=this.timeout){var n,a,i;if(this.socket.isConnected()||this.socket.connect(),this.state==ve.closed){const{config:{broadcast:l,presence:o,private:c}}=this.params,d=(a=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(y=>y.filter))!==null&&a!==void 0?a:[],u=!!this.bindings[mn.PRESENCE]&&this.bindings[mn.PRESENCE].length>0||((i=this.params.config.presence)===null||i===void 0?void 0:i.enabled)===!0,m={},h={broadcast:l,presence:Object.assign(Object.assign({},o),{enabled:u}),postgres_changes:d,private:c};this.socket.accessTokenValue&&(m.access_token=this.socket.accessTokenValue),this._onError(y=>e==null?void 0:e(Rt.CHANNEL_ERROR,y)),this._onClose(()=>e==null?void 0:e(Rt.CLOSED)),this.updateJoinPayload(Object.assign({config:h},m)),this.joinedOnce=!0,this._rejoin(s),this.joinPush.receive("ok",async({postgres_changes:y})=>{var g;if(this.socket.setAuth(),y===void 0){e==null||e(Rt.SUBSCRIBED);return}else{const b=this.bindings.postgres_changes,x=(g=b==null?void 0:b.length)!==null&&g!==void 0?g:0,p=[];for(let f=0;f<x;f++){const w=b[f],{filter:{event:j,schema:_,table:N,filter:k}}=w,S=y&&y[f];if(S&&S.event===j&&S.schema===_&&S.table===N&&S.filter===k)p.push(Object.assign(Object.assign({},w),{id:S.id}));else{this.unsubscribe(),this.state=ve.errored,e==null||e(Rt.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=p,e&&e(Rt.SUBSCRIBED);return}}).receive("error",y=>{this.state=ve.errored,e==null||e(Rt.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(y).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(Rt.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,s={}){return await this.send({type:"presence",event:"track",payload:e},s.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,s,n){return this.state===ve.joined&&e===mn.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,s,n)}async send(e,s={}){var n,a;if(!this._canPush()&&e.type==="broadcast"){const{event:i,payload:l}=e,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:l,private:this.private}]})};try{const d=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(n=s.timeout)!==null&&n!==void 0?n:this.timeout);return await((a=d.body)===null||a===void 0?void 0:a.cancel()),d.ok?"ok":"error"}catch(d){return d.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var l,o,c;const d=this._push(e.type,e,s.timeout||this.timeout);e.type==="broadcast"&&!(!((c=(o=(l=this.params)===null||l===void 0?void 0:l.config)===null||o===void 0?void 0:o.broadcast)===null||c===void 0)&&c.ack)&&i("ok"),d.receive("ok",()=>i("ok")),d.receive("error",()=>i("error")),d.receive("timeout",()=>i("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=ve.leaving;const s=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(ft.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(a=>{n=new jl(this,ft.leave,{},e),n.receive("ok",()=>{s(),a("ok")}).receive("timeout",()=>{s(),a("timed out")}).receive("error",()=>{a("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n==null||n.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=ve.closed,this.bindings={}}async _fetchWithTimeout(e,s,n){const a=new AbortController,i=setTimeout(()=>a.abort(),n),l=await this.socket.fetch(e,Object.assign(Object.assign({},s),{signal:a.signal}));return clearTimeout(i),l}_push(e,s,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let a=new jl(this,e,s,n);return this._canPush()?a.send():this._addToPushBuffer(a),a}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>yy){const s=this.pushBuffer.shift();s&&(s.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${s.event}`,s.payload))}}_onMessage(e,s,n){return s}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,s,n){var a,i;const l=e.toLocaleLowerCase(),{close:o,error:c,leave:d,join:u}=ft;if(n&&[o,c,d,u].indexOf(l)>=0&&n!==this._joinRef())return;let h=this._onMessage(l,s,n);if(s&&!h)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(l)?(a=this.bindings.postgres_changes)===null||a===void 0||a.filter(y=>{var g,b,x;return((g=y.filter)===null||g===void 0?void 0:g.event)==="*"||((x=(b=y.filter)===null||b===void 0?void 0:b.event)===null||x===void 0?void 0:x.toLocaleLowerCase())===l}).map(y=>y.callback(h,n)):(i=this.bindings[l])===null||i===void 0||i.filter(y=>{var g,b,x,p,f,w;if(["broadcast","presence","postgres_changes"].includes(l))if("id"in y){const j=y.id,_=(g=y.filter)===null||g===void 0?void 0:g.event;return j&&((b=s.ids)===null||b===void 0?void 0:b.includes(j))&&(_==="*"||(_==null?void 0:_.toLocaleLowerCase())===((x=s.data)===null||x===void 0?void 0:x.type.toLocaleLowerCase()))}else{const j=(f=(p=y==null?void 0:y.filter)===null||p===void 0?void 0:p.event)===null||f===void 0?void 0:f.toLocaleLowerCase();return j==="*"||j===((w=s==null?void 0:s.event)===null||w===void 0?void 0:w.toLocaleLowerCase())}else return y.type.toLocaleLowerCase()===l}).map(y=>{if(typeof h=="object"&&"ids"in h){const g=h.data,{schema:b,table:x,commit_timestamp:p,type:f,errors:w}=g;h=Object.assign(Object.assign({},{schema:b,table:x,commit_timestamp:p,eventType:f,new:{},old:{},errors:w}),this._getPayloadRecords(g))}y.callback(h,n)})}_isClosed(){return this.state===ve.closed}_isJoined(){return this.state===ve.joined}_isJoining(){return this.state===ve.joining}_isLeaving(){return this.state===ve.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,s,n){const a=e.toLocaleLowerCase(),i={type:a,filter:s,callback:n};return this.bindings[a]?this.bindings[a].push(i):this.bindings[a]=[i],this}_off(e,s){const n=e.toLocaleLowerCase();return this.bindings[n]&&(this.bindings[n]=this.bindings[n].filter(a=>{var i;return!(((i=a.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===n&&Xc.isEqual(a.filter,s))})),this}static isEqual(e,s){if(Object.keys(e).length!==Object.keys(s).length)return!1;for(const n in e)if(e[n]!==s[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(ft.close,{},e)}_onError(e){this._on(ft.error,{},s=>e(s))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=ve.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const s={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(s.new=Eu(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(s.old=Eu(e.columns,e.old_record)),s}}const Nl=()=>{},pa={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},Cy=[1e3,2e3,5e3,1e4],Ey=1e4,Ty=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class Iy{constructor(e,s){var n;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Po,this.transport=null,this.heartbeatIntervalMs=pa.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Nl,this.ref=0,this.reconnectTimer=null,this.logger=Nl,this.conn=null,this.sendBuffer=[],this.serializer=new wy,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=a=>{let i;return a?i=a:typeof fetch>"u"?i=(...l)=>Vn(async()=>{const{default:o}=await Promise.resolve().then(()=>Rr);return{default:o}},void 0).then(({default:o})=>o(...l)).catch(o=>{throw new Error(`Failed to load @supabase/node-fetch: ${o.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):i=fetch,(...l)=>i(...l)},!(!((n=s==null?void 0:s.params)===null||n===void 0)&&n.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=s.params.apikey,this.endPoint=`${e}/${Ao.websocket}`,this.httpEndpoint=Kf(e),this._initializeOptions(s),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(s==null?void 0:s.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=fy.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const s=e.message;throw s.includes("Node.js")?new Error(`${s}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${s}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:gy}))}disconnect(e,s){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const n=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(n),this._setConnectionState("disconnected")},e?this.conn.close(e,s??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const s=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),s}async removeAllChannels(){const e=await Promise.all(this.channels.map(s=>s.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,s,n){this.logger(e,s,n)}connectionState(){switch(this.conn&&this.conn.readyState){case un.connecting:return Es.Connecting;case un.open:return Es.Open;case un.closing:return Es.Closing;default:return Es.Closed}}isConnected(){return this.connectionState()===Es.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,s={config:{}}){const n=`realtime:${e}`,a=this.getChannels().find(i=>i.topic===n);if(a)return a;{const i=new Xc(`realtime:${e}`,s,this);return this.channels.push(i),i}}push(e){const{topic:s,event:n,payload:a,ref:i}=e,l=()=>{this.encode(e,o=>{var c;(c=this.conn)===null||c===void 0||c.send(o)})};this.log("push",`${s} ${n} (${i})`,a),this.isConnected()?l():this.sendBuffer.push(l)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(s){this.log("error","error in heartbeat callback",s)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(s){this.log("error","error in heartbeat callback",s)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(vy,"heartbeat timeout"),setTimeout(()=>{var s;this.isConnected()||(s=this.reconnectTimer)===null||s===void 0||s.scheduleTimeout()},pa.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(s){this.log("error","error in heartbeat callback",s)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let s=this.channels.find(n=>n.topic===e&&(n._isJoined()||n._isJoining()));s&&(this.log("transport",`leaving duplicate topic "${e}"`),s.unsubscribe())}_remove(e){this.channels=this.channels.filter(s=>s.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,s=>{if(s.topic==="phoenix"&&s.event==="phx_reply")try{this.heartbeatCallback(s.payload.status==="ok"?"ok":"error")}catch(d){this.log("error","error in heartbeat callback",d)}s.ref&&s.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:n,event:a,payload:i,ref:l}=s,o=l?`(${l})`:"",c=i.status||"";this.log("receive",`${c} ${n} ${a} ${o}`.trim(),i),this.channels.filter(d=>d._isMember(n)).forEach(d=>d._trigger(a,i,l)),this._triggerStateCallbacks("message",s)})}_clearTimer(e){var s;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((s=this.reconnectTimer)===null||s===void 0||s.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=s=>{this.log("worker","worker error",s.message),this.workerRef.terminate()},this.workerRef.onmessage=s=>{s.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var s;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(s=this.reconnectTimer)===null||s===void 0||s.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(ft.error))}_appendParams(e,s){if(Object.keys(s).length===0)return e;const n=e.match(/\?/)?"&":"?",a=new URLSearchParams(s);return`${e}${n}${a}`}_workerObjectUrl(e){let s;if(e)s=e;else{const n=new Blob([Ty],{type:"application/javascript"});s=URL.createObjectURL(n)}return s}_setConnectionState(e,s=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=s)}async _performAuth(e=null){let s;e?s=e:this.accessToken?s=await this.accessToken():s=this.accessTokenValue,this.accessTokenValue!=s&&(this.accessTokenValue=s,this.channels.forEach(n=>{const a={access_token:s,version:xy};s&&n.updateJoinPayload(a),n.joinedOnce&&n._isJoined()&&n._push(ft.access_token,{access_token:s})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(s=>{this.log("error",`error setting auth in ${e}`,s)})}_triggerStateCallbacks(e,s){try{this.stateChangeCallbacks[e].forEach(n=>{try{n(s)}catch(a){this.log("error",`error in ${e} callback`,a)}})}catch(n){this.log("error",`error triggering ${e} callbacks`,n)}}_setupReconnectionTimer(){this.reconnectTimer=new Vf(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},pa.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var s,n,a,i,l,o,c,d,u;if(this.transport=(s=e==null?void 0:e.transport)!==null&&s!==void 0?s:null,this.timeout=(n=e==null?void 0:e.timeout)!==null&&n!==void 0?n:Po,this.heartbeatIntervalMs=(a=e==null?void 0:e.heartbeatIntervalMs)!==null&&a!==void 0?a:pa.HEARTBEAT_INTERVAL,this.worker=(i=e==null?void 0:e.worker)!==null&&i!==void 0?i:!1,this.accessToken=(l=e==null?void 0:e.accessToken)!==null&&l!==void 0?l:null,this.heartbeatCallback=(o=e==null?void 0:e.heartbeatCallback)!==null&&o!==void 0?o:Nl,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(c=e==null?void 0:e.reconnectAfterMs)!==null&&c!==void 0?c:m=>Cy[m-1]||Ey,this.encode=(d=e==null?void 0:e.encode)!==null&&d!==void 0?d:(m,h)=>h(JSON.stringify(m)),this.decode=(u=e==null?void 0:e.decode)!==null&&u!==void 0?u:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}class Zc extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function we(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class Py extends Zc{constructor(e,s,n){super(e),this.name="StorageApiError",this.status=s,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Do extends Zc{constructor(e,s){super(e),this.name="StorageUnknownError",this.originalError=s}}var Ay=function(t,e,s,n){function a(i){return i instanceof s?i:new s(function(l){l(i)})}return new(s||(s=Promise))(function(i,l){function o(u){try{d(n.next(u))}catch(m){l(m)}}function c(u){try{d(n.throw(u))}catch(m){l(m)}}function d(u){u.done?i(u.value):a(u.value).then(o,c)}d((n=n.apply(t,e||[])).next())})};const Qf=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...s)=>Vn(async()=>{const{default:n}=await Promise.resolve().then(()=>Rr);return{default:n}},void 0).then(({default:n})=>n(...s)):e=fetch,(...s)=>e(...s)},Ly=()=>Ay(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Vn(()=>Promise.resolve().then(()=>Rr),void 0)).Response:Response}),Ro=t=>{if(Array.isArray(t))return t.map(s=>Ro(s));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([s,n])=>{const a=s.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));e[a]=Ro(n)}),e},Dy=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)};var Ws=function(t,e,s,n){function a(i){return i instanceof s?i:new s(function(l){l(i)})}return new(s||(s=Promise))(function(i,l){function o(u){try{d(n.next(u))}catch(m){l(m)}}function c(u){try{d(n.throw(u))}catch(m){l(m)}}function d(u){u.done?i(u.value):a(u.value).then(o,c)}d((n=n.apply(t,e||[])).next())})};const kl=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),Ry=(t,e,s)=>Ws(void 0,void 0,void 0,function*(){const n=yield Ly();t instanceof n&&!(s!=null&&s.noResolveJson)?t.json().then(a=>{const i=t.status||500,l=(a==null?void 0:a.statusCode)||i+"";e(new Py(kl(a),i,l))}).catch(a=>{e(new Do(kl(a),a))}):e(new Do(kl(t),t))}),Oy=(t,e,s,n)=>{const a={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"||!n?a:(Dy(n)?(a.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),a.body=JSON.stringify(n)):a.body=n,e!=null&&e.duplex&&(a.duplex=e.duplex),Object.assign(Object.assign({},a),s))};function Kn(t,e,s,n,a,i){return Ws(this,void 0,void 0,function*(){return new Promise((l,o)=>{t(s,Oy(e,n,a,i)).then(c=>{if(!c.ok)throw c;return n!=null&&n.noResolveJson?c:c.json()}).then(c=>l(c)).catch(c=>Ry(c,o,n))})})}function oi(t,e,s,n){return Ws(this,void 0,void 0,function*(){return Kn(t,"GET",e,s,n)})}function St(t,e,s,n,a){return Ws(this,void 0,void 0,function*(){return Kn(t,"POST",e,n,a,s)})}function Oo(t,e,s,n,a){return Ws(this,void 0,void 0,function*(){return Kn(t,"PUT",e,n,a,s)})}function My(t,e,s,n){return Ws(this,void 0,void 0,function*(){return Kn(t,"HEAD",e,Object.assign(Object.assign({},s),{noResolveJson:!0}),n)})}function Gf(t,e,s,n,a){return Ws(this,void 0,void 0,function*(){return Kn(t,"DELETE",e,n,a,s)})}var De=function(t,e,s,n){function a(i){return i instanceof s?i:new s(function(l){l(i)})}return new(s||(s=Promise))(function(i,l){function o(u){try{d(n.next(u))}catch(m){l(m)}}function c(u){try{d(n.throw(u))}catch(m){l(m)}}function d(u){u.done?i(u.value):a(u.value).then(o,c)}d((n=n.apply(t,e||[])).next())})};const $y={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Pu={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class zy{constructor(e,s={},n,a){this.shouldThrowOnError=!1,this.url=e,this.headers=s,this.bucketId=n,this.fetch=Qf(a)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(e,s,n,a){return De(this,void 0,void 0,function*(){try{let i;const l=Object.assign(Object.assign({},Pu),a);let o=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(l.upsert)});const c=l.metadata;typeof Blob<"u"&&n instanceof Blob?(i=new FormData,i.append("cacheControl",l.cacheControl),c&&i.append("metadata",this.encodeMetadata(c)),i.append("",n)):typeof FormData<"u"&&n instanceof FormData?(i=n,i.append("cacheControl",l.cacheControl),c&&i.append("metadata",this.encodeMetadata(c))):(i=n,o["cache-control"]=`max-age=${l.cacheControl}`,o["content-type"]=l.contentType,c&&(o["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),a!=null&&a.headers&&(o=Object.assign(Object.assign({},o),a.headers));const d=this._removeEmptyFolders(s),u=this._getFinalPath(d),m=yield(e=="PUT"?Oo:St)(this.fetch,`${this.url}/object/${u}`,i,Object.assign({headers:o},l!=null&&l.duplex?{duplex:l.duplex}:{}));return{data:{path:d,id:m.Id,fullPath:m.Key},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(we(i))return{data:null,error:i};throw i}})}upload(e,s,n){return De(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,s,n)})}uploadToSignedUrl(e,s,n,a){return De(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(e),l=this._getFinalPath(i),o=new URL(this.url+`/object/upload/sign/${l}`);o.searchParams.set("token",s);try{let c;const d=Object.assign({upsert:Pu.upsert},a),u=Object.assign(Object.assign({},this.headers),{"x-upsert":String(d.upsert)});typeof Blob<"u"&&n instanceof Blob?(c=new FormData,c.append("cacheControl",d.cacheControl),c.append("",n)):typeof FormData<"u"&&n instanceof FormData?(c=n,c.append("cacheControl",d.cacheControl)):(c=n,u["cache-control"]=`max-age=${d.cacheControl}`,u["content-type"]=d.contentType);const m=yield Oo(this.fetch,o.toString(),c,{headers:u});return{data:{path:i,fullPath:m.Key},error:null}}catch(c){if(this.shouldThrowOnError)throw c;if(we(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(e,s){return De(this,void 0,void 0,function*(){try{let n=this._getFinalPath(e);const a=Object.assign({},this.headers);s!=null&&s.upsert&&(a["x-upsert"]="true");const i=yield St(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:a}),l=new URL(this.url+i.url),o=l.searchParams.get("token");if(!o)throw new Zc("No token returned by API");return{data:{signedUrl:l.toString(),path:e,token:o},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(we(n))return{data:null,error:n};throw n}})}update(e,s,n){return De(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,s,n)})}move(e,s,n){return De(this,void 0,void 0,function*(){try{return{data:yield St(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:s,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(we(a))return{data:null,error:a};throw a}})}copy(e,s,n){return De(this,void 0,void 0,function*(){try{return{data:{path:(yield St(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:s,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(we(a))return{data:null,error:a};throw a}})}createSignedUrl(e,s,n){return De(this,void 0,void 0,function*(){try{let a=this._getFinalPath(e),i=yield St(this.fetch,`${this.url}/object/sign/${a}`,Object.assign({expiresIn:s},n!=null&&n.transform?{transform:n.transform}:{}),{headers:this.headers});const l=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${l}`)},{data:i,error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(we(a))return{data:null,error:a};throw a}})}createSignedUrls(e,s,n){return De(this,void 0,void 0,function*(){try{const a=yield St(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:s,paths:e},{headers:this.headers}),i=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:a.map(l=>Object.assign(Object.assign({},l),{signedUrl:l.signedURL?encodeURI(`${this.url}${l.signedURL}${i}`):null})),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(we(a))return{data:null,error:a};throw a}})}download(e,s){return De(this,void 0,void 0,function*(){const a=typeof(s==null?void 0:s.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((s==null?void 0:s.transform)||{}),l=i?`?${i}`:"";try{const o=this._getFinalPath(e);return{data:yield(yield oi(this.fetch,`${this.url}/${a}/${o}${l}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(we(o))return{data:null,error:o};throw o}})}info(e){return De(this,void 0,void 0,function*(){const s=this._getFinalPath(e);try{const n=yield oi(this.fetch,`${this.url}/object/info/${s}`,{headers:this.headers});return{data:Ro(n),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(we(n))return{data:null,error:n};throw n}})}exists(e){return De(this,void 0,void 0,function*(){const s=this._getFinalPath(e);try{return yield My(this.fetch,`${this.url}/object/${s}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(we(n)&&n instanceof Do){const a=n.originalError;if([400,404].includes(a==null?void 0:a.status))return{data:!1,error:n}}throw n}})}getPublicUrl(e,s){const n=this._getFinalPath(e),a=[],i=s!=null&&s.download?`download=${s.download===!0?"":s.download}`:"";i!==""&&a.push(i);const o=typeof(s==null?void 0:s.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((s==null?void 0:s.transform)||{});c!==""&&a.push(c);let d=a.join("&");return d!==""&&(d=`?${d}`),{data:{publicUrl:encodeURI(`${this.url}/${o}/public/${n}${d}`)}}}remove(e){return De(this,void 0,void 0,function*(){try{return{data:yield Gf(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(we(s))return{data:null,error:s};throw s}})}list(e,s,n){return De(this,void 0,void 0,function*(){try{const a=Object.assign(Object.assign(Object.assign({},$y),s),{prefix:e||""});return{data:yield St(this.fetch,`${this.url}/object/list/${this.bucketId}`,a,{headers:this.headers},n),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(we(a))return{data:null,error:a};throw a}})}listV2(e,s){return De(this,void 0,void 0,function*(){try{const n=Object.assign({},e);return{data:yield St(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,n,{headers:this.headers},s),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(we(n))return{data:null,error:n};throw n}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const s=[];return e.width&&s.push(`width=${e.width}`),e.height&&s.push(`height=${e.height}`),e.resize&&s.push(`resize=${e.resize}`),e.format&&s.push(`format=${e.format}`),e.quality&&s.push(`quality=${e.quality}`),s.join("&")}}const Fy="2.12.1",Uy={"X-Client-Info":`storage-js/${Fy}`};var Hs=function(t,e,s,n){function a(i){return i instanceof s?i:new s(function(l){l(i)})}return new(s||(s=Promise))(function(i,l){function o(u){try{d(n.next(u))}catch(m){l(m)}}function c(u){try{d(n.throw(u))}catch(m){l(m)}}function d(u){u.done?i(u.value):a(u.value).then(o,c)}d((n=n.apply(t,e||[])).next())})};class qy{constructor(e,s={},n,a){this.shouldThrowOnError=!1;const i=new URL(e);a!=null&&a.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase.")),this.url=i.href,this.headers=Object.assign(Object.assign({},Uy),s),this.fetch=Qf(n)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(){return Hs(this,void 0,void 0,function*(){try{return{data:yield oi(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(we(e))return{data:null,error:e};throw e}})}getBucket(e){return Hs(this,void 0,void 0,function*(){try{return{data:yield oi(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(we(s))return{data:null,error:s};throw s}})}createBucket(e,s={public:!1}){return Hs(this,void 0,void 0,function*(){try{return{data:yield St(this.fetch,`${this.url}/bucket`,{id:e,name:e,type:s.type,public:s.public,file_size_limit:s.fileSizeLimit,allowed_mime_types:s.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(we(n))return{data:null,error:n};throw n}})}updateBucket(e,s){return Hs(this,void 0,void 0,function*(){try{return{data:yield Oo(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:s.public,file_size_limit:s.fileSizeLimit,allowed_mime_types:s.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(we(n))return{data:null,error:n};throw n}})}emptyBucket(e){return Hs(this,void 0,void 0,function*(){try{return{data:yield St(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(we(s))return{data:null,error:s};throw s}})}deleteBucket(e){return Hs(this,void 0,void 0,function*(){try{return{data:yield Gf(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(we(s))return{data:null,error:s};throw s}})}}class By extends qy{constructor(e,s={},n,a){super(e,s,n,a)}from(e){return new zy(this.url,this.headers,e,this.fetch)}}const Wy="2.57.4";let Zr="";typeof Deno<"u"?Zr="deno":typeof document<"u"?Zr="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Zr="react-native":Zr="node";const Vy={"X-Client-Info":`supabase-js-${Zr}/${Wy}`},Hy={headers:Vy},Ky={schema:"public"},Qy={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Gy={};var Jy=function(t,e,s,n){function a(i){return i instanceof s?i:new s(function(l){l(i)})}return new(s||(s=Promise))(function(i,l){function o(u){try{d(n.next(u))}catch(m){l(m)}}function c(u){try{d(n.throw(u))}catch(m){l(m)}}function d(u){u.done?i(u.value):a(u.value).then(o,c)}d((n=n.apply(t,e||[])).next())})};const Yy=t=>{let e;return t?e=t:typeof fetch>"u"?e=Df:e=fetch,(...s)=>e(...s)},Xy=()=>typeof Headers>"u"?Rf:Headers,Zy=(t,e,s)=>{const n=Yy(s),a=Xy();return(i,l)=>Jy(void 0,void 0,void 0,function*(){var o;const c=(o=yield e())!==null&&o!==void 0?o:t;let d=new a(l==null?void 0:l.headers);return d.has("apikey")||d.set("apikey",t),d.has("Authorization")||d.set("Authorization",`Bearer ${c}`),n(i,Object.assign(Object.assign({},l),{headers:d}))})};var ew=function(t,e,s,n){function a(i){return i instanceof s?i:new s(function(l){l(i)})}return new(s||(s=Promise))(function(i,l){function o(u){try{d(n.next(u))}catch(m){l(m)}}function c(u){try{d(n.throw(u))}catch(m){l(m)}}function d(u){u.done?i(u.value):a(u.value).then(o,c)}d((n=n.apply(t,e||[])).next())})};function tw(t){return t.endsWith("/")?t:t+"/"}function sw(t,e){var s,n;const{db:a,auth:i,realtime:l,global:o}=t,{db:c,auth:d,realtime:u,global:m}=e,h={db:Object.assign(Object.assign({},c),a),auth:Object.assign(Object.assign({},d),i),realtime:Object.assign(Object.assign({},u),l),storage:{},global:Object.assign(Object.assign(Object.assign({},m),o),{headers:Object.assign(Object.assign({},(s=m==null?void 0:m.headers)!==null&&s!==void 0?s:{}),(n=o==null?void 0:o.headers)!==null&&n!==void 0?n:{})}),accessToken:()=>ew(this,void 0,void 0,function*(){return""})};return t.accessToken?h.accessToken=t.accessToken:delete h.accessToken,h}function rw(t){const e=t==null?void 0:t.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(tw(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const Jf="2.71.1",Xs=30*1e3,Mo=3,_l=Mo*Xs,nw="http://localhost:9999",aw="supabase.auth.token",iw={"X-Client-Info":`gotrue-js/${Jf}`},$o="X-Supabase-Api-Version",Yf={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},lw=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,ow=10*60*1e3;class ed extends Error{constructor(e,s,n){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=s,this.code=n}}function K(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class cw extends ed{constructor(e,s,n){super(e,s,n),this.name="AuthApiError",this.status=s,this.code=n}}function dw(t){return K(t)&&t.name==="AuthApiError"}class Xf extends ed{constructor(e,s){super(e),this.name="AuthUnknownError",this.originalError=s}}class bs extends ed{constructor(e,s,n,a){super(e,n,a),this.name=s,this.status=n}}class Yt extends bs{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function uw(t){return K(t)&&t.name==="AuthSessionMissingError"}class xa extends bs{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class ga extends bs{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class va extends bs{constructor(e,s=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=s}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function hw(t){return K(t)&&t.name==="AuthImplicitGrantRedirectError"}class Au extends bs{constructor(e,s=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=s}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class zo extends bs{constructor(e,s){super(e,"AuthRetryableFetchError",s,void 0)}}function Sl(t){return K(t)&&t.name==="AuthRetryableFetchError"}class Lu extends bs{constructor(e,s,n){super(e,"AuthWeakPasswordError",s,"weak_password"),this.reasons=n}}class Fo extends bs{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const ci="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Du=` 	
\r=`.split(""),mw=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<Du.length;e+=1)t[Du[e].charCodeAt(0)]=-2;for(let e=0;e<ci.length;e+=1)t[ci[e].charCodeAt(0)]=e;return t})();function Ru(t,e,s){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const n=e.queue>>e.queuedBits-6&63;s(ci[n]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const n=e.queue>>e.queuedBits-6&63;s(ci[n]),e.queuedBits-=6}}function Zf(t,e,s){const n=mw[t];if(n>-1)for(e.queue=e.queue<<6|n,e.queuedBits+=6;e.queuedBits>=8;)s(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function Ou(t){const e=[],s=l=>{e.push(String.fromCodePoint(l))},n={utf8seq:0,codepoint:0},a={queue:0,queuedBits:0},i=l=>{xw(l,n,s)};for(let l=0;l<t.length;l+=1)Zf(t.charCodeAt(l),a,i);return e.join("")}function fw(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function pw(t,e){for(let s=0;s<t.length;s+=1){let n=t.charCodeAt(s);if(n>55295&&n<=56319){const a=(n-55296)*1024&65535;n=(t.charCodeAt(s+1)-56320&65535|a)+65536,s+=1}fw(n,e)}}function xw(t,e,s){if(e.utf8seq===0){if(t<=127){s(t);return}for(let n=1;n<6;n+=1)if(!(t>>7-n&1)){e.utf8seq=n;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&s(e.codepoint)}}function gw(t){const e=[],s={queue:0,queuedBits:0},n=a=>{e.push(a)};for(let a=0;a<t.length;a+=1)Zf(t.charCodeAt(a),s,n);return new Uint8Array(e)}function vw(t){const e=[];return pw(t,s=>e.push(s)),new Uint8Array(e)}function yw(t){const e=[],s={queue:0,queuedBits:0},n=a=>{e.push(a)};return t.forEach(a=>Ru(a,s,n)),Ru(null,s,n),e.join("")}function ww(t){return Math.round(Date.now()/1e3)+t}function bw(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}const ut=()=>typeof window<"u"&&typeof document<"u",Ns={tested:!1,writable:!1},e0=()=>{if(!ut())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Ns.tested)return Ns.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),Ns.tested=!0,Ns.writable=!0}catch{Ns.tested=!0,Ns.writable=!1}return Ns.writable};function jw(t){const e={},s=new URL(t);if(s.hash&&s.hash[0]==="#")try{new URLSearchParams(s.hash.substring(1)).forEach((a,i)=>{e[i]=a})}catch{}return s.searchParams.forEach((n,a)=>{e[a]=n}),e}const t0=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...s)=>Vn(async()=>{const{default:n}=await Promise.resolve().then(()=>Rr);return{default:n}},void 0).then(({default:n})=>n(...s)):e=fetch,(...s)=>e(...s)},Nw=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",Zs=async(t,e,s)=>{await t.setItem(e,JSON.stringify(s))},ks=async(t,e)=>{const s=await t.getItem(e);if(!s)return null;try{return JSON.parse(s)}catch{return s}},Jt=async(t,e)=>{await t.removeItem(e)};class Ri{constructor(){this.promise=new Ri.promiseConstructor((e,s)=>{this.resolve=e,this.reject=s})}}Ri.promiseConstructor=Promise;function Cl(t){const e=t.split(".");if(e.length!==3)throw new Fo("Invalid JWT structure");for(let n=0;n<e.length;n++)if(!lw.test(e[n]))throw new Fo("JWT not in base64url format");return{header:JSON.parse(Ou(e[0])),payload:JSON.parse(Ou(e[1])),signature:gw(e[2]),raw:{header:e[0],payload:e[1]}}}async function kw(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function _w(t,e){return new Promise((n,a)=>{(async()=>{for(let i=0;i<1/0;i++)try{const l=await t(i);if(!e(i,null,l)){n(l);return}}catch(l){if(!e(i,l)){a(l);return}}})()})}function Sw(t){return("0"+t.toString(16)).substr(-2)}function Cw(){const e=new Uint32Array(56);if(typeof crypto>"u"){const s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=s.length;let a="";for(let i=0;i<56;i++)a+=s.charAt(Math.floor(Math.random()*n));return a}return crypto.getRandomValues(e),Array.from(e,Sw).join("")}async function Ew(t){const s=new TextEncoder().encode(t),n=await crypto.subtle.digest("SHA-256",s),a=new Uint8Array(n);return Array.from(a).map(i=>String.fromCharCode(i)).join("")}async function Tw(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const s=await Ew(t);return btoa(s).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Ks(t,e,s=!1){const n=Cw();let a=n;s&&(a+="/PASSWORD_RECOVERY"),await Zs(t,`${e}-code-verifier`,a);const i=await Tw(n);return[i,n===i?"plain":"s256"]}const Iw=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function Pw(t){const e=t.headers.get($o);if(!e||!e.match(Iw))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function Aw(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function Lw(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const Dw=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Qs(t){if(!Dw.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function El(){const t={};return new Proxy(t,{get:(e,s)=>{if(s==="__isUserNotAvailableProxy")return!0;if(typeof s=="symbol"){const n=s.toString();if(n==="Symbol(Symbol.toPrimitive)"||n==="Symbol(Symbol.toStringTag)"||n==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${s}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,s)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${s}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,s)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${s}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Mu(t){return JSON.parse(JSON.stringify(t))}var Rw=function(t,e){var s={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(s[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(t);a<n.length;a++)e.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(t,n[a])&&(s[n[a]]=t[n[a]]);return s};const Cs=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),Ow=[502,503,504];async function $u(t){var e;if(!Nw(t))throw new zo(Cs(t),0);if(Ow.includes(t.status))throw new zo(Cs(t),t.status);let s;try{s=await t.json()}catch(i){throw new Xf(Cs(i),i)}let n;const a=Pw(t);if(a&&a.getTime()>=Yf["2024-01-01"].timestamp&&typeof s=="object"&&s&&typeof s.code=="string"?n=s.code:typeof s=="object"&&s&&typeof s.error_code=="string"&&(n=s.error_code),n){if(n==="weak_password")throw new Lu(Cs(s),t.status,((e=s.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(n==="session_not_found")throw new Yt}else if(typeof s=="object"&&s&&typeof s.weak_password=="object"&&s.weak_password&&Array.isArray(s.weak_password.reasons)&&s.weak_password.reasons.length&&s.weak_password.reasons.reduce((i,l)=>i&&typeof l=="string",!0))throw new Lu(Cs(s),t.status,s.weak_password.reasons);throw new cw(Cs(s),t.status||500,n)}const Mw=(t,e,s,n)=>{const a={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?a:(a.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),a.body=JSON.stringify(n),Object.assign(Object.assign({},a),s))};async function Q(t,e,s,n){var a;const i=Object.assign({},n==null?void 0:n.headers);i[$o]||(i[$o]=Yf["2024-01-01"].name),n!=null&&n.jwt&&(i.Authorization=`Bearer ${n.jwt}`);const l=(a=n==null?void 0:n.query)!==null&&a!==void 0?a:{};n!=null&&n.redirectTo&&(l.redirect_to=n.redirectTo);const o=Object.keys(l).length?"?"+new URLSearchParams(l).toString():"",c=await $w(t,e,s+o,{headers:i,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(c):{data:Object.assign({},c),error:null}}async function $w(t,e,s,n,a,i){const l=Mw(e,n,a,i);let o;try{o=await t(s,Object.assign({},l))}catch(c){throw console.error(c),new zo(Cs(c),0)}if(o.ok||await $u(o),n!=null&&n.noResolveJson)return o;try{return await o.json()}catch(c){await $u(c)}}function Lt(t){var e;let s=null;qw(t)&&(s=Object.assign({},t),t.expires_at||(s.expires_at=ww(t.expires_in)));const n=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:s,user:n},error:null}}function zu(t){const e=Lt(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((s,n)=>s&&typeof n=="string",!0)&&(e.data.weak_password=t.weak_password),e}function ss(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function zw(t){return{data:t,error:null}}function Fw(t){const{action_link:e,email_otp:s,hashed_token:n,redirect_to:a,verification_type:i}=t,l=Rw(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),o={action_link:e,email_otp:s,hashed_token:n,redirect_to:a,verification_type:i},c=Object.assign({},l);return{data:{properties:o,user:c},error:null}}function Uw(t){return t}function qw(t){return t.access_token&&t.refresh_token&&t.expires_in}const Tl=["global","local","others"];var Bw=function(t,e){var s={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(s[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(t);a<n.length;a++)e.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(t,n[a])&&(s[n[a]]=t[n[a]]);return s};class Ww{constructor({url:e="",headers:s={},fetch:n}){this.url=e,this.headers=s,this.fetch=t0(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,s=Tl[0]){if(Tl.indexOf(s)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Tl.join(", ")}`);try{return await Q(this.fetch,"POST",`${this.url}/logout?scope=${s}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(n){if(K(n))return{data:null,error:n};throw n}}async inviteUserByEmail(e,s={}){try{return await Q(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:s.data},headers:this.headers,redirectTo:s.redirectTo,xform:ss})}catch(n){if(K(n))return{data:{user:null},error:n};throw n}}async generateLink(e){try{const{options:s}=e,n=Bw(e,["options"]),a=Object.assign(Object.assign({},n),s);return"newEmail"in n&&(a.new_email=n==null?void 0:n.newEmail,delete a.newEmail),await Q(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:a,headers:this.headers,xform:Fw,redirectTo:s==null?void 0:s.redirectTo})}catch(s){if(K(s))return{data:{properties:null,user:null},error:s};throw s}}async createUser(e){try{return await Q(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:ss})}catch(s){if(K(s))return{data:{user:null},error:s};throw s}}async listUsers(e){var s,n,a,i,l,o,c;try{const d={nextPage:null,lastPage:0,total:0},u=await Q(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(s=e==null?void 0:e.page)===null||s===void 0?void 0:s.toString())!==null&&n!==void 0?n:"",per_page:(i=(a=e==null?void 0:e.perPage)===null||a===void 0?void 0:a.toString())!==null&&i!==void 0?i:""},xform:Uw});if(u.error)throw u.error;const m=await u.json(),h=(l=u.headers.get("x-total-count"))!==null&&l!==void 0?l:0,y=(c=(o=u.headers.get("link"))===null||o===void 0?void 0:o.split(","))!==null&&c!==void 0?c:[];return y.length>0&&(y.forEach(g=>{const b=parseInt(g.split(";")[0].split("=")[1].substring(0,1)),x=JSON.parse(g.split(";")[1].split("=")[1]);d[`${x}Page`]=b}),d.total=parseInt(h)),{data:Object.assign(Object.assign({},m),d),error:null}}catch(d){if(K(d))return{data:{users:[]},error:d};throw d}}async getUserById(e){Qs(e);try{return await Q(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:ss})}catch(s){if(K(s))return{data:{user:null},error:s};throw s}}async updateUserById(e,s){Qs(e);try{return await Q(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:s,headers:this.headers,xform:ss})}catch(n){if(K(n))return{data:{user:null},error:n};throw n}}async deleteUser(e,s=!1){Qs(e);try{return await Q(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:s},xform:ss})}catch(n){if(K(n))return{data:{user:null},error:n};throw n}}async _listFactors(e){Qs(e.userId);try{const{data:s,error:n}=await Q(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:a=>({data:{factors:a},error:null})});return{data:s,error:n}}catch(s){if(K(s))return{data:null,error:s};throw s}}async _deleteFactor(e){Qs(e.userId),Qs(e.id);try{return{data:await Q(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(s){if(K(s))return{data:null,error:s};throw s}}}function Fu(t={}){return{getItem:e=>t[e]||null,setItem:(e,s)=>{t[e]=s},removeItem:e=>{delete t[e]}}}function Vw(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Gs={debug:!!(globalThis&&e0()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class s0 extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class Hw extends s0{}async function Kw(t,e,s){Gs.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const n=new globalThis.AbortController;return e>0&&setTimeout(()=>{n.abort(),Gs.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async a=>{if(a){Gs.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,a.name);try{return await s()}finally{Gs.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,a.name)}}else{if(e===0)throw Gs.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new Hw(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(Gs.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await s()}}))}Vw();const Qw={url:nw,storageKey:aw,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:iw,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function Uu(t,e,s){return await s()}const Js={};class Rn{constructor(e){var s,n;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Rn.nextInstanceID,Rn.nextInstanceID+=1,this.instanceID>0&&ut()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const a=Object.assign(Object.assign({},Qw),e);if(this.logDebugMessages=!!a.debug,typeof a.debug=="function"&&(this.logger=a.debug),this.persistSession=a.persistSession,this.storageKey=a.storageKey,this.autoRefreshToken=a.autoRefreshToken,this.admin=new Ww({url:a.url,headers:a.headers,fetch:a.fetch}),this.url=a.url,this.headers=a.headers,this.fetch=t0(a.fetch),this.lock=a.lock||Uu,this.detectSessionInUrl=a.detectSessionInUrl,this.flowType=a.flowType,this.hasCustomAuthorizationHeader=a.hasCustomAuthorizationHeader,a.lock?this.lock=a.lock:ut()&&(!((s=globalThis==null?void 0:globalThis.navigator)===null||s===void 0)&&s.locks)?this.lock=Kw:this.lock=Uu,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(a.storage?this.storage=a.storage:e0()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Fu(this.memoryStorage)),a.userStorage&&(this.userStorage=a.userStorage)):(this.memoryStorage={},this.storage=Fu(this.memoryStorage)),ut()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(n=this.broadcastChannel)===null||n===void 0||n.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}get jwks(){var e,s;return(s=(e=Js[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&s!==void 0?s:{keys:[]}}set jwks(e){Js[this.storageKey]=Object.assign(Object.assign({},Js[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,s;return(s=(e=Js[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&s!==void 0?s:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){Js[this.storageKey]=Object.assign(Object.assign({},Js[this.storageKey]),{cachedAt:e})}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Jf}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const s=jw(window.location.href);let n="none";if(this._isImplicitGrantCallback(s)?n="implicit":await this._isPKCECallback(s)&&(n="pkce"),ut()&&this.detectSessionInUrl&&n!=="none"){const{data:a,error:i}=await this._getSessionFromURL(s,n);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),hw(i)){const c=(e=i.details)===null||e===void 0?void 0:e.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:l,redirectType:o}=a;return this._debug("#_initialize()","detected session in URL",l,"redirect type",o),await this._saveSession(l),setTimeout(async()=>{o==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",l):await this._notifyAllSubscribers("SIGNED_IN",l)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(s){return K(s)?{error:s}:{error:new Xf("Unexpected error during initialization",s)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var s,n,a;try{const i=await Q(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(s=e==null?void 0:e.options)===null||s===void 0?void 0:s.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(a=e==null?void 0:e.options)===null||a===void 0?void 0:a.captchaToken}},xform:Lt}),{data:l,error:o}=i;if(o||!l)return{data:{user:null,session:null},error:o};const c=l.session,d=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:d,session:c},error:null}}catch(i){if(K(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(e){var s,n,a;try{let i;if("email"in e){const{email:u,password:m,options:h}=e;let y=null,g=null;this.flowType==="pkce"&&([y,g]=await Ks(this.storage,this.storageKey)),i=await Q(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:h==null?void 0:h.emailRedirectTo,body:{email:u,password:m,data:(s=h==null?void 0:h.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken},code_challenge:y,code_challenge_method:g},xform:Lt})}else if("phone"in e){const{phone:u,password:m,options:h}=e;i=await Q(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:u,password:m,data:(n=h==null?void 0:h.data)!==null&&n!==void 0?n:{},channel:(a=h==null?void 0:h.channel)!==null&&a!==void 0?a:"sms",gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken}},xform:Lt})}else throw new ga("You must provide either an email or phone number and a password");const{data:l,error:o}=i;if(o||!l)return{data:{user:null,session:null},error:o};const c=l.session,d=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:d,session:c},error:null}}catch(i){if(K(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(e){try{let s;if("email"in e){const{email:i,password:l,options:o}=e;s=await Q(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:l,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:zu})}else if("phone"in e){const{phone:i,password:l,options:o}=e;s=await Q(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:l,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:zu})}else throw new ga("You must provide either an email or phone number and a password");const{data:n,error:a}=s;return a?{data:{user:null,session:null},error:a}:!n||!n.session||!n.user?{data:{user:null,session:null},error:new xa}:(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:a})}catch(s){if(K(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithOAuth(e){var s,n,a,i;return await this._handleProviderSignIn(e.provider,{redirectTo:(s=e.options)===null||s===void 0?void 0:s.redirectTo,scopes:(n=e.options)===null||n===void 0?void 0:n.scopes,queryParams:(a=e.options)===null||a===void 0?void 0:a.queryParams,skipBrowserRedirect:(i=e.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:s}=e;if(s==="solana")return await this.signInWithSolana(e);throw new Error(`@supabase/auth-js: Unsupported chain "${s}"`)}async signInWithSolana(e){var s,n,a,i,l,o,c,d,u,m,h,y;let g,b;if("message"in e)g=e.message,b=e.signature;else{const{chain:x,wallet:p,statement:f,options:w}=e;let j;if(ut())if(typeof p=="object")j=p;else{const N=window;if("solana"in N&&typeof N.solana=="object"&&("signIn"in N.solana&&typeof N.solana.signIn=="function"||"signMessage"in N.solana&&typeof N.solana.signMessage=="function"))j=N.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof p!="object"||!(w!=null&&w.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");j=p}const _=new URL((s=w==null?void 0:w.url)!==null&&s!==void 0?s:window.location.href);if("signIn"in j&&j.signIn){const N=await j.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},w==null?void 0:w.signInWithSolana),{version:"1",domain:_.host,uri:_.href}),f?{statement:f}:null));let k;if(Array.isArray(N)&&N[0]&&typeof N[0]=="object")k=N[0];else if(N&&typeof N=="object"&&"signedMessage"in N&&"signature"in N)k=N;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in k&&"signature"in k&&(typeof k.signedMessage=="string"||k.signedMessage instanceof Uint8Array)&&k.signature instanceof Uint8Array)g=typeof k.signedMessage=="string"?k.signedMessage:new TextDecoder().decode(k.signedMessage),b=k.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in j)||typeof j.signMessage!="function"||!("publicKey"in j)||typeof j!="object"||!j.publicKey||!("toBase58"in j.publicKey)||typeof j.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");g=[`${_.host} wants you to sign in with your Solana account:`,j.publicKey.toBase58(),...f?["",f,""]:[""],"Version: 1",`URI: ${_.href}`,`Issued At: ${(a=(n=w==null?void 0:w.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&a!==void 0?a:new Date().toISOString()}`,...!((i=w==null?void 0:w.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${w.signInWithSolana.notBefore}`]:[],...!((l=w==null?void 0:w.signInWithSolana)===null||l===void 0)&&l.expirationTime?[`Expiration Time: ${w.signInWithSolana.expirationTime}`]:[],...!((o=w==null?void 0:w.signInWithSolana)===null||o===void 0)&&o.chainId?[`Chain ID: ${w.signInWithSolana.chainId}`]:[],...!((c=w==null?void 0:w.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${w.signInWithSolana.nonce}`]:[],...!((d=w==null?void 0:w.signInWithSolana)===null||d===void 0)&&d.requestId?[`Request ID: ${w.signInWithSolana.requestId}`]:[],...!((m=(u=w==null?void 0:w.signInWithSolana)===null||u===void 0?void 0:u.resources)===null||m===void 0)&&m.length?["Resources",...w.signInWithSolana.resources.map(k=>`- ${k}`)]:[]].join(`
`);const N=await j.signMessage(new TextEncoder().encode(g),"utf8");if(!N||!(N instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");b=N}}try{const{data:x,error:p}=await Q(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:g,signature:yw(b)},!((h=e.options)===null||h===void 0)&&h.captchaToken?{gotrue_meta_security:{captcha_token:(y=e.options)===null||y===void 0?void 0:y.captchaToken}}:null),xform:Lt});if(p)throw p;return!x||!x.session||!x.user?{data:{user:null,session:null},error:new xa}:(x.session&&(await this._saveSession(x.session),await this._notifyAllSubscribers("SIGNED_IN",x.session)),{data:Object.assign({},x),error:p})}catch(x){if(K(x))return{data:{user:null,session:null},error:x};throw x}}async _exchangeCodeForSession(e){const s=await ks(this.storage,`${this.storageKey}-code-verifier`),[n,a]=(s??"").split("/");try{const{data:i,error:l}=await Q(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:n},xform:Lt});if(await Jt(this.storage,`${this.storageKey}-code-verifier`),l)throw l;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new xa}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:a??null}),error:l})}catch(i){if(K(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(e){try{const{options:s,provider:n,token:a,access_token:i,nonce:l}=e,o=await Q(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:a,access_token:i,nonce:l,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},xform:Lt}),{data:c,error:d}=o;return d?{data:{user:null,session:null},error:d}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new xa}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:d})}catch(s){if(K(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithOtp(e){var s,n,a,i,l;try{if("email"in e){const{email:o,options:c}=e;let d=null,u=null;this.flowType==="pkce"&&([d,u]=await Ks(this.storage,this.storageKey));const{error:m}=await Q(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:o,data:(s=c==null?void 0:c.data)!==null&&s!==void 0?s:{},create_user:(n=c==null?void 0:c.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:d,code_challenge_method:u},redirectTo:c==null?void 0:c.emailRedirectTo});return{data:{user:null,session:null},error:m}}if("phone"in e){const{phone:o,options:c}=e,{data:d,error:u}=await Q(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:o,data:(a=c==null?void 0:c.data)!==null&&a!==void 0?a:{},create_user:(i=c==null?void 0:c.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(l=c==null?void 0:c.channel)!==null&&l!==void 0?l:"sms"}});return{data:{user:null,session:null,messageId:d==null?void 0:d.message_id},error:u}}throw new ga("You must provide either an email or phone number.")}catch(o){if(K(o))return{data:{user:null,session:null},error:o};throw o}}async verifyOtp(e){var s,n;try{let a,i;"options"in e&&(a=(s=e.options)===null||s===void 0?void 0:s.redirectTo,i=(n=e.options)===null||n===void 0?void 0:n.captchaToken);const{data:l,error:o}=await Q(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:i}}),redirectTo:a,xform:Lt});if(o)throw o;if(!l)throw new Error("An error occurred on token verification.");const c=l.session,d=l.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:d,session:c},error:null}}catch(a){if(K(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithSSO(e){var s,n,a;try{let i=null,l=null;return this.flowType==="pkce"&&([i,l]=await Ks(this.storage,this.storageKey)),await Q(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(n=(s=e.options)===null||s===void 0?void 0:s.redirectTo)!==null&&n!==void 0?n:void 0}),!((a=e==null?void 0:e.options)===null||a===void 0)&&a.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:l}),headers:this.headers,xform:zw})}catch(i){if(K(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:s},error:n}=e;if(n)throw n;if(!s)throw new Yt;const{error:a}=await Q(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:s.access_token});return{data:{user:null,session:null},error:a}})}catch(e){if(K(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const s=`${this.url}/resend`;if("email"in e){const{email:n,type:a,options:i}=e,{error:l}=await Q(this.fetch,"POST",s,{headers:this.headers,body:{email:n,type:a,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:l}}else if("phone"in e){const{phone:n,type:a,options:i}=e,{data:l,error:o}=await Q(this.fetch,"POST",s,{headers:this.headers,body:{phone:n,type:a,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:l==null?void 0:l.message_id},error:o}}throw new ga("You must provide either an email or phone number and a type")}catch(s){if(K(s))return{data:{user:null,session:null},error:s};throw s}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async s=>s))}async _acquireLock(e,s){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),a=(async()=>(await n,await s()))();return this.pendingInLock.push((async()=>{try{await a}catch{}})()),a}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=s();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const a=[...this.pendingInLock];await Promise.all(a),this.pendingInLock.splice(0,a.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const s=await this.__loadSession();return await e(s)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const s=await ks(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",s),s!==null&&(this._isValidSession(s)?e=s:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const n=e.expires_at?e.expires_at*1e3-Date.now()<_l:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",e.expires_at),!n){if(this.userStorage){const l=await ks(this.userStorage,this.storageKey+"-user");l!=null&&l.user?e.user=l.user:e.user=El()}if(this.storage.isServer&&e.user){let l=this.suppressGetSessionWarning;e=new Proxy(e,{get:(c,d,u)=>(!l&&d==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),l=!0,this.suppressGetSessionWarning=!0),Reflect.get(c,d,u))})}return{data:{session:e},error:null}}const{session:a,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{session:null},error:i}:{data:{session:a},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await Q(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:ss}):await this._useSession(async s=>{var n,a,i;const{data:l,error:o}=s;if(o)throw o;return!(!((n=l.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Yt}:await Q(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(a=l.session)===null||a===void 0?void 0:a.access_token)!==null&&i!==void 0?i:void 0,xform:ss})})}catch(s){if(K(s))return uw(s)&&(await this._removeSession(),await Jt(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:s};throw s}}async updateUser(e,s={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,s))}async _updateUser(e,s={}){try{return await this._useSession(async n=>{const{data:a,error:i}=n;if(i)throw i;if(!a.session)throw new Yt;const l=a.session;let o=null,c=null;this.flowType==="pkce"&&e.email!=null&&([o,c]=await Ks(this.storage,this.storageKey));const{data:d,error:u}=await Q(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:s==null?void 0:s.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:o,code_challenge_method:c}),jwt:l.access_token,xform:ss});if(u)throw u;return l.user=d.user,await this._saveSession(l),await this._notifyAllSubscribers("USER_UPDATED",l),{data:{user:l.user},error:null}})}catch(n){if(K(n))return{data:{user:null},error:n};throw n}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Yt;const s=Date.now()/1e3;let n=s,a=!0,i=null;const{payload:l}=Cl(e.access_token);if(l.exp&&(n=l.exp,a=n<=s),a){const{session:o,error:c}=await this._callRefreshToken(e.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!o)return{data:{user:null,session:null},error:null};i=o}else{const{data:o,error:c}=await this._getUser(e.access_token);if(c)throw c;i={access_token:e.access_token,refresh_token:e.refresh_token,user:o.user,token_type:"bearer",expires_in:n-s,expires_at:n},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(s){if(K(s))return{data:{session:null,user:null},error:s};throw s}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async s=>{var n;if(!e){const{data:l,error:o}=s;if(o)throw o;e=(n=l.session)!==null&&n!==void 0?n:void 0}if(!(e!=null&&e.refresh_token))throw new Yt;const{session:a,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{user:null,session:null},error:i}:a?{data:{user:a.user,session:a},error:null}:{data:{user:null,session:null},error:null}})}catch(s){if(K(s))return{data:{user:null,session:null},error:s};throw s}}async _getSessionFromURL(e,s){try{if(!ut())throw new va("No browser detected.");if(e.error||e.error_description||e.error_code)throw new va(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(s){case"implicit":if(this.flowType==="pkce")throw new Au("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new va("Not a valid implicit grant flow url.");break;default:}if(s==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new Au("No code detected.");const{data:f,error:w}=await this._exchangeCodeForSession(e.code);if(w)throw w;const j=new URL(window.location.href);return j.searchParams.delete("code"),window.history.replaceState(window.history.state,"",j.toString()),{data:{session:f.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:a,access_token:i,refresh_token:l,expires_in:o,expires_at:c,token_type:d}=e;if(!i||!o||!l||!d)throw new va("No session defined in URL");const u=Math.round(Date.now()/1e3),m=parseInt(o);let h=u+m;c&&(h=parseInt(c));const y=h-u;y*1e3<=Xs&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${y}s, should have been closer to ${m}s`);const g=h-m;u-g>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",g,h,u):u-g<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",g,h,u);const{data:b,error:x}=await this._getUser(i);if(x)throw x;const p={provider_token:n,provider_refresh_token:a,access_token:i,expires_in:m,expires_at:h,refresh_token:l,token_type:d,user:b.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:p,redirectType:e.type},error:null}}catch(n){if(K(n))return{data:{session:null,redirectType:null},error:n};throw n}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const s=await ks(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&s)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async s=>{var n;const{data:a,error:i}=s;if(i)return{error:i};const l=(n=a.session)===null||n===void 0?void 0:n.access_token;if(l){const{error:o}=await this.admin.signOut(l,e);if(o&&!(dw(o)&&(o.status===404||o.status===401||o.status===403)))return{error:o}}return e!=="others"&&(await this._removeSession(),await Jt(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const s=bw(),n={id:s,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",s),this.stateChangeEmitters.delete(s)}};return this._debug("#onAuthStateChange()","registered callback with id",s),this.stateChangeEmitters.set(s,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(s)})))(),{data:{subscription:n}}}async _emitInitialSession(e){return await this._useSession(async s=>{var n,a;try{const{data:{session:i},error:l}=s;if(l)throw l;await((n=this.stateChangeEmitters.get(e))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",e,"session",i)}catch(i){await((a=this.stateChangeEmitters.get(e))===null||a===void 0?void 0:a.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",i),console.error(i)}})}async resetPasswordForEmail(e,s={}){let n=null,a=null;this.flowType==="pkce"&&([n,a]=await Ks(this.storage,this.storageKey,!0));try{return await Q(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:n,code_challenge_method:a,gotrue_meta_security:{captcha_token:s.captchaToken}},headers:this.headers,redirectTo:s.redirectTo})}catch(i){if(K(i))return{data:null,error:i};throw i}}async getUserIdentities(){var e;try{const{data:s,error:n}=await this.getUser();if(n)throw n;return{data:{identities:(e=s.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(s){if(K(s))return{data:null,error:s};throw s}}async linkIdentity(e){var s;try{const{data:n,error:a}=await this._useSession(async i=>{var l,o,c,d,u;const{data:m,error:h}=i;if(h)throw h;const y=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(l=e.options)===null||l===void 0?void 0:l.redirectTo,scopes:(o=e.options)===null||o===void 0?void 0:o.scopes,queryParams:(c=e.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await Q(this.fetch,"GET",y,{headers:this.headers,jwt:(u=(d=m.session)===null||d===void 0?void 0:d.access_token)!==null&&u!==void 0?u:void 0})});if(a)throw a;return ut()&&!(!((s=e.options)===null||s===void 0)&&s.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),{data:{provider:e.provider,url:n==null?void 0:n.url},error:null}}catch(n){if(K(n))return{data:{provider:e.provider,url:null},error:n};throw n}}async unlinkIdentity(e){try{return await this._useSession(async s=>{var n,a;const{data:i,error:l}=s;if(l)throw l;return await Q(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(a=(n=i.session)===null||n===void 0?void 0:n.access_token)!==null&&a!==void 0?a:void 0})})}catch(s){if(K(s))return{data:null,error:s};throw s}}async _refreshAccessToken(e){const s=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{const n=Date.now();return await _w(async a=>(a>0&&await kw(200*Math.pow(2,a-1)),this._debug(s,"refreshing attempt",a),await Q(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Lt})),(a,i)=>{const l=200*Math.pow(2,a);return i&&Sl(i)&&Date.now()+l-n<Xs})}catch(n){if(this._debug(s,"error",n),K(n))return{data:{session:null,user:null},error:n};throw n}finally{this._debug(s,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,s){const n=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:s.redirectTo,scopes:s.scopes,queryParams:s.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",s,"url",n),ut()&&!s.skipBrowserRedirect&&window.location.assign(n),{data:{provider:e,url:n},error:null}}async _recoverAndRefresh(){var e,s;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const a=await ks(this.storage,this.storageKey);if(a&&this.userStorage){let l=await ks(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!l&&(l={user:a.user},await Zs(this.userStorage,this.storageKey+"-user",l)),a.user=(e=l==null?void 0:l.user)!==null&&e!==void 0?e:El()}else if(a&&!a.user&&!a.user){const l=await ks(this.storage,this.storageKey+"-user");l&&(l!=null&&l.user)?(a.user=l.user,await Jt(this.storage,this.storageKey+"-user"),await Zs(this.storage,this.storageKey,a)):a.user=El()}if(this._debug(n,"session from storage",a),!this._isValidSession(a)){this._debug(n,"session is not valid"),a!==null&&await this._removeSession();return}const i=((s=a.expires_at)!==null&&s!==void 0?s:1/0)*1e3-Date.now()<_l;if(this._debug(n,`session has${i?"":" not"} expired with margin of ${_l}s`),i){if(this.autoRefreshToken&&a.refresh_token){const{error:l}=await this._callRefreshToken(a.refresh_token);l&&(console.error(l),Sl(l)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",l),await this._removeSession()))}}else if(a.user&&a.user.__isUserNotAvailableProxy===!0)try{const{data:l,error:o}=await this._getUser(a.access_token);!o&&(l!=null&&l.user)?(a.user=l.user,await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(l){console.error("Error getting user data:",l),this._debug(n,"error getting user data, skipping SIGNED_IN notification",l)}else await this._notifyAllSubscribers("SIGNED_IN",a)}catch(a){this._debug(n,"error",a),console.error(a);return}finally{this._debug(n,"end")}}async _callRefreshToken(e){var s,n;if(!e)throw new Yt;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const a=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(a,"begin");try{this.refreshingDeferred=new Ri;const{data:i,error:l}=await this._refreshAccessToken(e);if(l)throw l;if(!i.session)throw new Yt;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const o={session:i.session,error:null};return this.refreshingDeferred.resolve(o),o}catch(i){if(this._debug(a,"error",i),K(i)){const l={session:null,error:i};return Sl(i)||await this._removeSession(),(s=this.refreshingDeferred)===null||s===void 0||s.resolve(l),l}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(i),i}finally{this.refreshingDeferred=null,this._debug(a,"end")}}async _notifyAllSubscribers(e,s,n=!0){const a=`#_notifyAllSubscribers(${e})`;this._debug(a,"begin",s,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:e,session:s});const i=[],l=Array.from(this.stateChangeEmitters.values()).map(async o=>{try{await o.callback(e,s)}catch(c){i.push(c)}});if(await Promise.all(l),i.length>0){for(let o=0;o<i.length;o+=1)console.error(i[o]);throw i[0]}}finally{this._debug(a,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const s=Object.assign({},e),n=s.user&&s.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&s.user&&await Zs(this.userStorage,this.storageKey+"-user",{user:s.user});const a=Object.assign({},s);delete a.user;const i=Mu(a);await Zs(this.storage,this.storageKey,i)}else{const a=Mu(s);await Zs(this.storage,this.storageKey,a)}}async _removeSession(){this._debug("#_removeSession()"),await Jt(this.storage,this.storageKey),await Jt(this.storage,this.storageKey+"-code-verifier"),await Jt(this.storage,this.storageKey+"-user"),this.userStorage&&await Jt(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&ut()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(s){console.error("removing visibilitychange callback failed",s)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Xs);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async s=>{const{data:{session:n}}=s;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const a=Math.floor((n.expires_at*1e3-e)/Xs);this._debug("#_autoRefreshTokenTick()",`access token expires in ${a} ticks, a tick lasts ${Xs}ms, refresh threshold is ${Mo} ticks`),a<=Mo&&await this._callRefreshToken(n.refresh_token)})}catch(s){console.error("Auto refresh tick failed with error. This is likely a transient error.",s)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof s0)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!ut()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const s=`#_onVisibilityChanged(${e})`;this._debug(s,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(s,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,s,n){const a=[`provider=${encodeURIComponent(s)}`];if(n!=null&&n.redirectTo&&a.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&a.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[i,l]=await Ks(this.storage,this.storageKey),o=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(l)}`});a.push(o.toString())}if(n!=null&&n.queryParams){const i=new URLSearchParams(n.queryParams);a.push(i.toString())}return n!=null&&n.skipBrowserRedirect&&a.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${e}?${a.join("&")}`}async _unenroll(e){try{return await this._useSession(async s=>{var n;const{data:a,error:i}=s;return i?{data:null,error:i}:await Q(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(n=a==null?void 0:a.session)===null||n===void 0?void 0:n.access_token})})}catch(s){if(K(s))return{data:null,error:s};throw s}}async _enroll(e){try{return await this._useSession(async s=>{var n,a;const{data:i,error:l}=s;if(l)return{data:null,error:l};const o=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:c,error:d}=await Q(this.fetch,"POST",`${this.url}/factors`,{body:o,headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token});return d?{data:null,error:d}:(e.factorType==="totp"&&(!((a=c==null?void 0:c.totp)===null||a===void 0)&&a.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})})}catch(s){if(K(s))return{data:null,error:s};throw s}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async s=>{var n;const{data:a,error:i}=s;if(i)return{data:null,error:i};const{data:l,error:o}=await Q(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(n=a==null?void 0:a.session)===null||n===void 0?void 0:n.access_token});return o?{data:null,error:o}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+l.expires_in},l)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",l),{data:l,error:o})})}catch(s){if(K(s))return{data:null,error:s};throw s}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async s=>{var n;const{data:a,error:i}=s;return i?{data:null,error:i}:await Q(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(n=a==null?void 0:a.session)===null||n===void 0?void 0:n.access_token})})}catch(s){if(K(s))return{data:null,error:s};throw s}})}async _challengeAndVerify(e){const{data:s,error:n}=await this._challenge({factorId:e.factorId});return n?{data:null,error:n}:await this._verify({factorId:e.factorId,challengeId:s.id,code:e.code})}async _listFactors(){const{data:{user:e},error:s}=await this.getUser();if(s)return{data:null,error:s};const n=(e==null?void 0:e.factors)||[],a=n.filter(l=>l.factor_type==="totp"&&l.status==="verified"),i=n.filter(l=>l.factor_type==="phone"&&l.status==="verified");return{data:{all:n,totp:a,phone:i},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var s,n;const{data:{session:a},error:i}=e;if(i)return{data:null,error:i};if(!a)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:l}=Cl(a.access_token);let o=null;l.aal&&(o=l.aal);let c=o;((n=(s=a.user.factors)===null||s===void 0?void 0:s.filter(m=>m.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(c="aal2");const u=l.amr||[];return{data:{currentLevel:o,nextLevel:c,currentAuthenticationMethods:u},error:null}}))}async fetchJwk(e,s={keys:[]}){let n=s.keys.find(o=>o.kid===e);if(n)return n;const a=Date.now();if(n=this.jwks.keys.find(o=>o.kid===e),n&&this.jwks_cached_at+ow>a)return n;const{data:i,error:l}=await Q(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(l)throw l;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=a,n=i.keys.find(o=>o.kid===e),!n)?null:n}async getClaims(e,s={}){try{let n=e;if(!n){const{data:y,error:g}=await this.getSession();if(g||!y.session)return{data:null,error:g};n=y.session.access_token}const{header:a,payload:i,signature:l,raw:{header:o,payload:c}}=Cl(n);s!=null&&s.allowExpired||Aw(i.exp);const d=!a.alg||a.alg.startsWith("HS")||!a.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(a.kid,s!=null&&s.keys?{keys:s.keys}:s==null?void 0:s.jwks);if(!d){const{error:y}=await this.getUser(n);if(y)throw y;return{data:{claims:i,header:a,signature:l},error:null}}const u=Lw(a.alg),m=await crypto.subtle.importKey("jwk",d,u,!0,["verify"]);if(!await crypto.subtle.verify(u,m,l,vw(`${o}.${c}`)))throw new Fo("Invalid JWT signature");return{data:{claims:i,header:a,signature:l},error:null}}catch(n){if(K(n))return{data:null,error:n};throw n}}}Rn.nextInstanceID=0;const Gw=Rn;class Jw extends Gw{constructor(e){super(e)}}var Yw=function(t,e,s,n){function a(i){return i instanceof s?i:new s(function(l){l(i)})}return new(s||(s=Promise))(function(i,l){function o(u){try{d(n.next(u))}catch(m){l(m)}}function c(u){try{d(n.throw(u))}catch(m){l(m)}}function d(u){u.done?i(u.value):a(u.value).then(o,c)}d((n=n.apply(t,e||[])).next())})};class Xw{constructor(e,s,n){var a,i,l;this.supabaseUrl=e,this.supabaseKey=s;const o=rw(e);if(!s)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",o),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",o),this.storageUrl=new URL("storage/v1",o),this.functionsUrl=new URL("functions/v1",o);const c=`sb-${o.hostname.split(".")[0]}-auth-token`,d={db:Ky,realtime:Gy,auth:Object.assign(Object.assign({},Qy),{storageKey:c}),global:Hy},u=sw(n??{},d);this.storageKey=(a=u.auth.storageKey)!==null&&a!==void 0?a:"",this.headers=(i=u.global.headers)!==null&&i!==void 0?i:{},u.accessToken?(this.accessToken=u.accessToken,this.auth=new Proxy({},{get:(m,h)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(h)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((l=u.auth)!==null&&l!==void 0?l:{},this.headers,u.global.fetch),this.fetch=Zy(s,this._getAccessToken.bind(this),u.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},u.realtime)),this.rest=new my(new URL("rest/v1",o).href,{headers:this.headers,schema:u.db.schema,fetch:this.fetch}),this.storage=new By(this.storageUrl.href,this.headers,this.fetch,n==null?void 0:n.storage),u.accessToken||this._listenForAuthEvents()}get functions(){return new Vv(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,s={},n={}){return this.rest.rpc(e,s,n)}channel(e,s={config:{}}){return this.realtime.channel(e,s)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,s;return Yw(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:n}=yield this.auth.getSession();return(s=(e=n.session)===null||e===void 0?void 0:e.access_token)!==null&&s!==void 0?s:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:s,detectSessionInUrl:n,storage:a,userStorage:i,storageKey:l,flowType:o,lock:c,debug:d},u,m){const h={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Jw({url:this.authUrl.href,headers:Object.assign(Object.assign({},h),u),storageKey:l,autoRefreshToken:e,persistSession:s,detectSessionInUrl:n,storage:a,userStorage:i,flowType:o,lock:c,debug:d,fetch:m,hasCustomAuthorizationHeader:Object.keys(this.headers).some(y=>y.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new Iy(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((s,n)=>{this._handleTokenChanged(s,"CLIENT",n==null?void 0:n.access_token)})}_handleTokenChanged(e,s,n){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==n?this.changedAccessToken=n:e==="SIGNED_OUT"&&(this.realtime.setAuth(),s=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const Zw=(t,e,s)=>new Xw(t,e,s);function eb(){if(typeof window<"u"||typeof process>"u")return!1;const t=process.version;if(t==null)return!1;const e=t.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}eb()&&console.warn("⚠️  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const tb="https://zmtotombhpklllxjuirb.supabase.co",sb="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InptdG90b21iaHBrbGxseGp1aXJiIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTg2OTQwMjcsImV4cCI6MjA3NDI3MDAyN30.VMNxE-Tw-YGCsHzWhnx11xqVYsHMzgg4dfhtxKbocJg",q=Zw(tb,sb,{auth:{persistSession:!0,autoRefreshToken:!0},db:{schema:"public"},global:{headers:{"x-application-name":"blanchisserie-app"}}}),Ts=class Ts{constructor(){Xe(this,"metrics",{totalQueries:0,successfulQueries:0,failedQueries:0,averageResponseTime:0,connectionStatus:"disconnected"});Xe(this,"responseTimes",[])}static getInstance(){return Ts.instance||(Ts.instance=new Ts),Ts.instance}recordQuery(e,s,n){this.metrics.totalQueries++,e?(this.metrics.successfulQueries++,this.metrics.connectionStatus="connected"):(this.metrics.failedQueries++,this.metrics.connectionStatus="error",this.metrics.lastError=n,this.metrics.lastErrorTime=new Date),this.responseTimes.push(s),this.responseTimes.length>100&&this.responseTimes.shift(),this.metrics.averageResponseTime=this.responseTimes.reduce((a,i)=>a+i,0)/this.responseTimes.length}getMetrics(){return{...this.metrics}}resetMetrics(){this.metrics={totalQueries:0,successfulQueries:0,failedQueries:0,averageResponseTime:0,connectionStatus:"disconnected"},this.responseTimes=[]}};Xe(Ts,"instance");let Uo=Ts;const mr=Uo.getInstance(),H=async t=>{const e=Date.now();try{const s=await t(),n=Date.now()-e;return mr.recordQuery(!0,n),s}catch(s){const n=Date.now()-e;throw mr.recordQuery(!1,n,s instanceof Error?s.message:"Unknown error"),s}},re=t=>{if(!t)return t;const e={...t};return["created_at","updated_at","due_date","issue_date","pickup_date","delivery_date","last_login"].forEach(n=>{e[n]&&(e[n]=new Date(e[n]))}),e.created_at&&(e.createdAt=e.created_at),e.updated_at&&(e.updatedAt=e.updated_at),e.due_date&&(e.dueDate=e.due_date),e.issue_date&&(e.issueDate=e.issue_date),e.pickup_date&&(e.pickupDate=e.pickup_date),e.delivery_date&&(e.deliveryDate=e.delivery_date),e.last_login&&(e.lastLogin=e.last_login),e.postal_code&&(e.postalCode=e.postal_code),e.estimated_time&&(e.estimatedTime=e.estimated_time),e.reorder_level&&(e.reorderLevel=e.reorder_level),e.total_amount&&(e.totalAmount=e.total_amount),e.payment_method&&(e.paymentMethod=e.payment_method),e.customer_id&&(e.customerId=e.customer_id),e.order_id&&(e.orderId=e.order_id),e.invoice_number&&(e.invoiceNumber=e.invoice_number),e.access_code&&(e.accessCode=e.access_code),e.is_active&&(e.isActive=e.is_active),e.total_price&&(e.totalPrice=e.total_price),e.client_access_id&&(e.clientAccessId=e.client_access_id),e},Pe=t=>{if(!t)return t;const e={...t};return e.createdAt&&(e.created_at=e.createdAt),e.updatedAt&&(e.updated_at=e.updatedAt),e.dueDate&&(e.due_date=e.dueDate),e.issueDate&&(e.issue_date=e.issueDate),e.pickupDate&&(e.pickup_date=e.pickupDate),e.deliveryDate&&(e.delivery_date=e.deliveryDate),e.lastLogin&&(e.last_login=e.lastLogin),e.postalCode&&(e.postal_code=e.postalCode),e.estimatedTime&&(e.estimated_time=e.estimatedTime),e.reorderLevel&&(e.reorder_level=e.reorderLevel),e.totalAmount&&(e.total_amount=e.totalAmount),e.paymentMethod&&(e.payment_method=e.paymentMethod),e.customerId&&(e.customer_id=e.customerId),e.orderId&&(e.order_id=e.orderId),e.invoiceNumber&&(e.invoice_number=e.invoiceNumber),e.accessCode&&(e.access_code=e.accessCode),e.isActive&&(e.is_active=e.isActive),e.totalPrice&&(e.total_price=e.totalPrice),e.clientAccessId&&(e.client_access_id=e.clientAccessId),e};class rb{async getCustomers(){return H(async()=>{const{data:e,error:s}=await q.from("customers").select("*").order("created_at",{ascending:!1});if(s)throw s;return(e==null?void 0:e.map(re))||[]})}async createCustomer(e){return H(async()=>{const{data:s,error:n}=await q.from("customers").insert([Pe(e)]).select().single();if(n)throw n;return re(s)})}async updateCustomer(e,s){return H(async()=>{const{data:n,error:a}=await q.from("customers").update(Pe(s)).eq("id",e).select().single();if(a)throw a;return re(n)})}async deleteCustomer(e){return H(async()=>{const{error:s}=await q.from("customers").delete().eq("id",e);if(s)throw s})}async getOrders(){return H(async()=>{const{data:e,error:s}=await q.from("orders").select(`
          *,
          order_services (
            id,
            service_id,
            quantity,
            unit_price,
            total_price,
            services (name, description)
          ),
          order_items (*)
        `).order("created_at",{ascending:!1});if(s)throw s;return(e==null?void 0:e.map(n=>{var i,l;const a=re(n);return a.services=((i=n.order_services)==null?void 0:i.map(o=>{var c,d;return{id:o.service_id,name:((c=o.services)==null?void 0:c.name)||"",description:((d=o.services)==null?void 0:d.description)||"",price:o.unit_price,quantity:o.quantity,estimatedTime:0}}))||[],a.items=((l=n.order_items)==null?void 0:l.map(o=>re(o)))||[],a}))||[]})}async createOrder(e){return H(async()=>{const{data:s,error:n}=await q.from("orders").insert([Pe({...e,services:void 0,items:void 0})]).select().single();if(n)throw n;if(e.services&&e.services.length>0){const a=e.services.map(l=>({order_id:s.id,service_id:l.id,quantity:l.quantity,unit_price:l.price,total_price:l.price*l.quantity})),{error:i}=await q.from("order_services").insert(a);if(i)throw i}if(e.items&&e.items.length>0){const a=e.items.map(l=>({order_id:s.id,product_name:l.productName,quantity:l.quantity,unit_price:l.unitPrice,total:l.total})),{error:i}=await q.from("order_items").insert(a);if(i)throw i}return this.getOrderById(s.id)})}async getOrderById(e){return H(async()=>{var i,l;const{data:s,error:n}=await q.from("orders").select(`
          *,
          order_services (
            id,
            service_id,
            quantity,
            unit_price,
            total_price,
            services (name, description, estimated_time)
          ),
          order_items (*)
        `).eq("id",e).single();if(n)throw n;const a=re(s);return a.services=((i=s.order_services)==null?void 0:i.map(o=>{var c,d,u;return{id:o.service_id,name:((c=o.services)==null?void 0:c.name)||"",description:((d=o.services)==null?void 0:d.description)||"",price:o.unit_price,quantity:o.quantity,estimatedTime:((u=o.services)==null?void 0:u.estimated_time)||0}}))||[],a.items=((l=s.order_items)==null?void 0:l.map(o=>re(o)))||[],a})}async updateOrder(e,s){return H(async()=>{const{data:n,error:a}=await q.from("orders").update(Pe({...s,services:void 0,items:void 0})).eq("id",e).select().single();if(a)throw a;return this.getOrderById(e)})}async deleteOrder(e){return H(async()=>{const{error:s}=await q.from("orders").delete().eq("id",e);if(s)throw s})}async getServices(){return H(async()=>{const{data:e,error:s}=await q.from("services").select("*").order("name");if(s)throw s;return(e==null?void 0:e.map(re))||[]})}async createService(e){return H(async()=>{const{data:s,error:n}=await q.from("services").insert([Pe(e)]).select().single();if(n)throw n;return re(s)})}async updateService(e,s){return H(async()=>{const{data:n,error:a}=await q.from("services").update(Pe(s)).eq("id",e).select().single();if(a)throw a;return re(n)})}async deleteService(e){return H(async()=>{const{error:s}=await q.from("services").delete().eq("id",e);if(s)throw s})}async getEmployees(){return H(async()=>{const{data:e,error:s}=await q.from("employees").select("*").order("name");if(s)throw s;return(e==null?void 0:e.map(re))||[]})}async createEmployee(e){return H(async()=>{const{data:s,error:n}=await q.from("employees").insert([e]).select().single();if(n)throw n;return re(s)})}async updateEmployee(e,s){return H(async()=>{const{data:n,error:a}=await q.from("employees").update(s).eq("id",e).select().single();if(a)throw a;return re(n)})}async deleteEmployee(e){return H(async()=>{const{error:s}=await q.from("employees").delete().eq("id",e);if(s)throw s})}async getInventoryItems(){return H(async()=>{const{data:e,error:s}=await q.from("inventory_items").select("*").order("name");if(s)throw s;return(e==null?void 0:e.map(re))||[]})}async createInventoryItem(e){return H(async()=>{const{data:s,error:n}=await q.from("inventory_items").insert([Pe(e)]).select().single();if(n)throw n;return re(s)})}async updateInventoryItem(e,s){return H(async()=>{const{data:n,error:a}=await q.from("inventory_items").update(Pe(s)).eq("id",e).select().single();if(a)throw a;return re(n)})}async deleteInventoryItem(e){return H(async()=>{const{error:s}=await q.from("inventory_items").delete().eq("id",e);if(s)throw s})}async getInvoices(){return H(async()=>{const{data:e,error:s}=await q.from("invoices").select(`
          *,
          invoice_items (*)
        `).order("created_at",{ascending:!1});if(s)throw s;return(e==null?void 0:e.map(n=>{var i;const a=re(n);return a.items=((i=n.invoice_items)==null?void 0:i.map(l=>re(l)))||[],a}))||[]})}async createInvoice(e){return H(async()=>{const{data:s,error:n}=await q.from("invoices").insert([Pe({...e,items:void 0})]).select().single();if(n)throw n;if(e.items&&e.items.length>0){const a=e.items.map(l=>({invoice_id:s.id,description:l.description,quantity:l.quantity,unit_price:l.unitPrice,total:l.total})),{error:i}=await q.from("invoice_items").insert(a);if(i)throw i}return this.getInvoiceById(s.id)})}async getInvoiceById(e){return H(async()=>{var i;const{data:s,error:n}=await q.from("invoices").select(`
          *,
          invoice_items (*)
        `).eq("id",e).single();if(n)throw n;const a=re(s);return a.items=((i=s.invoice_items)==null?void 0:i.map(l=>re(l)))||[],a})}async updateInvoice(e,s){return H(async()=>{const{data:n,error:a}=await q.from("invoices").update(Pe({...s,items:void 0})).eq("id",e).select().single();if(a)throw a;return this.getInvoiceById(e)})}async deleteInvoice(e){return H(async()=>{const{error:s}=await q.from("invoices").delete().eq("id",e);if(s)throw s})}async getClientAccess(){return H(async()=>{const{data:e,error:s}=await q.from("client_access").select("*").order("created_at",{ascending:!1});if(s)throw s;return(e==null?void 0:e.map(re))||[]})}async createClientAccess(e){return H(async()=>{const{data:s,error:n}=await q.from("client_access").insert([Pe(e)]).select().single();if(n)throw n;return re(s)})}async updateClientAccess(e,s){return H(async()=>{const{data:n,error:a}=await q.from("client_access").update(Pe(s)).eq("id",e).select().single();if(a)throw a;return re(n)})}async deleteClientAccess(e){return H(async()=>{const{error:s}=await q.from("client_access").delete().eq("id",e);if(s)throw s})}async getServicePacks(){return H(async()=>{const{data:e,error:s}=await q.from("service_packs").select(`
          *,
          pack_services (
            id,
            service_id,
            service_name,
            quantity,
            unit_price
          )
        `).order("name");if(s)throw s;return(e==null?void 0:e.map(n=>{var i;const a=re(n);return a.services=((i=n.pack_services)==null?void 0:i.map(l=>({serviceId:l.service_id,serviceName:l.service_name,quantity:l.quantity,unitPrice:l.unit_price})))||[],a}))||[]})}async createServicePack(e){return H(async()=>{const{data:s,error:n}=await q.from("service_packs").insert([Pe({...e,services:void 0})]).select().single();if(n)throw n;if(e.services&&e.services.length>0){const a=e.services.map(l=>({pack_id:s.id,service_id:l.serviceId,service_name:l.serviceName,quantity:l.quantity,unit_price:l.unitPrice})),{error:i}=await q.from("pack_services").insert(a);if(i)throw i}return this.getServicePackById(s.id)})}async getServicePackById(e){return H(async()=>{var i;const{data:s,error:n}=await q.from("service_packs").select(`
          *,
          pack_services (
            id,
            service_id,
            service_name,
            quantity,
            unit_price
          )
        `).eq("id",e).single();if(n)throw n;const a=re(s);return a.services=((i=s.pack_services)==null?void 0:i.map(l=>({serviceId:l.service_id,serviceName:l.service_name,quantity:l.quantity,unitPrice:l.unit_price})))||[],a})}async updateServicePack(e,s){return H(async()=>{const{data:n,error:a}=await q.from("service_packs").update(Pe({...s,services:void 0})).eq("id",e).select().single();if(a)throw a;return this.getServicePackById(e)})}async deleteServicePack(e){return H(async()=>{const{error:s}=await q.from("service_packs").delete().eq("id",e);if(s)throw s})}async getClientOrders(){return H(async()=>{const{data:e,error:s}=await q.from("client_orders").select(`
          *,
          client_order_packs (
            id,
            pack_id,
            pack_name,
            quantity,
            unit_price,
            total
          )
        `).order("created_at",{ascending:!1});if(s)throw s;return(e==null?void 0:e.map(n=>{var i;const a=re(n);return a.packs=((i=n.client_order_packs)==null?void 0:i.map(l=>({packId:l.pack_id,packName:l.pack_name,quantity:l.quantity,unitPrice:l.unit_price,total:l.total})))||[],a}))||[]})}async createClientOrder(e){return H(async()=>{const{data:s,error:n}=await q.from("client_orders").insert([Pe({...e,packs:void 0})]).select().single();if(n)throw n;if(e.packs&&e.packs.length>0){const a=e.packs.map(l=>({client_order_id:s.id,pack_id:l.packId,pack_name:l.packName,quantity:l.quantity,unit_price:l.unitPrice,total:l.total})),{error:i}=await q.from("client_order_packs").insert(a);if(i)throw i}return this.getClientOrderById(s.id)})}async getClientOrderById(e){return H(async()=>{var i;const{data:s,error:n}=await q.from("client_orders").select(`
          *,
          client_order_packs (
            id,
            pack_id,
            pack_name,
            quantity,
            unit_price,
            total
          )
        `).eq("id",e).single();if(n)throw n;const a=re(s);return a.packs=((i=s.client_order_packs)==null?void 0:i.map(l=>({packId:l.pack_id,packName:l.pack_name,quantity:l.quantity,unitPrice:l.unit_price,total:l.total})))||[],a})}async updateClientOrder(e,s){return H(async()=>{const{data:n,error:a}=await q.from("client_orders").update(Pe({...s,packs:void 0})).eq("id",e).select().single();if(a)throw a;return this.getClientOrderById(e)})}async deleteClientOrder(e){return H(async()=>{const{error:s}=await q.from("client_orders").delete().eq("id",e);if(s)throw s})}async testConnection(){try{const{data:e,error:s}=await q.from("customers").select("count").limit(1);return!s}catch{return!1}}async getStats(){return H(async()=>{const[e,s,n,a]=await Promise.all([this.getCustomers(),this.getOrders(),this.getInvoices(),this.getInventoryItems()]);return{totalCustomers:e.length,totalOrders:s.length,pendingOrders:s.filter(i=>i.status==="en_attente").length,completedOrders:s.filter(i=>i.status==="livre").length,totalInvoices:n.length,paidInvoices:n.filter(i=>i.status==="paid").length,lowStockItems:a.filter(i=>i.quantity<=i.reorderLevel).length,totalRevenue:n.filter(i=>i.status==="paid").reduce((i,l)=>i+l.total,0)}})}async initializeWithMockData(){return H(async()=>{try{const{data:e}=await q.from("customers").select("id").limit(1);if(e&&e.length>0){console.log("Base de données déjà initialisée");return}console.log("Initialisation de la base de données avec les données mockées..."),console.log("Connexion Supabase vérifiée avec succès")}catch(e){throw console.error("Erreur lors de l'initialisation:",e),e}})}}const di=new rb,qu=zv();class nb{constructor(){Xe(this,"cache",null);Xe(this,"cacheExpiry",0);Xe(this,"CACHE_DURATION",qu.CACHE_DURATION);Xe(this,"useSupabase",qu.USE_SUPABASE)}async initializeDatabase(){if(this.useSupabase)try{await di.initializeWithMockData(),console.log("Base de données Supabase initialisée avec succès")}catch(e){console.error("Erreur lors de l'initialisation Supabase:",e),this.useSupabase=!1}if(!this.useSupabase&&!localStorage.getItem("databaseData")){const s={customers:pl,orders:xl,services:ye,employees:vl,inventoryItems:Da,invoices:gl,clientAccess:yl,servicePacks:wl,clientOrders:bl,lastUpdated:new Date().toISOString()};localStorage.setItem("databaseData",JSON.stringify(s)),console.log("Base de données localStorage initialisée avec les données mockées")}}async getAllData(){if(this.cache&&Date.now()<this.cacheExpiry)return this.cache;let e;if(this.useSupabase)try{e=await di.getAllData()}catch(s){console.error("Erreur Supabase, fallback vers localStorage:",s),e=this.getLocalData(),this.useSupabase=!1}else e=this.getLocalData();return this.cache=e,this.cacheExpiry=Date.now()+this.CACHE_DURATION,e}getLocalData(){const e=localStorage.getItem("databaseData");if(e)try{return JSON.parse(e)}catch(s){console.error("Erreur parsing localStorage:",s)}return{customers:pl,orders:xl,services:ye,employees:vl,inventoryItems:Da,invoices:gl,clientAccess:yl,servicePacks:wl,clientOrders:bl,lastUpdated:new Date().toISOString()}}async saveAllData(e){if(this.useSupabase)try{console.log("Sauvegarde Supabase non implémentée pour saveAllData"),localStorage.setItem("databaseData",JSON.stringify(e))}catch(s){console.error("Erreur sauvegarde Supabase:",s),localStorage.setItem("databaseData",JSON.stringify(e))}else localStorage.setItem("databaseData",JSON.stringify(e));e.lastUpdated=new Date().toISOString(),this.cache=e,this.cacheExpiry=Date.now()+this.CACHE_DURATION}async addCustomer(e){const s=this.getLocalData(),n={...e,id:Date.now().toString(),createdAt:new Date};return s.customers.push(n),await this.saveAllData(s),n}async updateCustomer(e){const s=this.getLocalData(),n=s.customers.findIndex(a=>a.id===e.id);return n!==-1&&(s.customers[n]=e,await this.saveAllData(s)),e}async deleteCustomer(e){const s=this.getLocalData();s.customers=s.customers.filter(n=>n.id!==e),await this.saveAllData(s)}async addOrder(e){const s=this.getLocalData(),n={...e,id:Date.now().toString(),createdAt:new Date,updatedAt:new Date};return s.orders.push(n),await this.saveAllData(s),n}async updateOrder(e){const s=this.getLocalData(),n=s.orders.findIndex(a=>a.id===e.id);return n!==-1&&(s.orders[n]={...e,updatedAt:new Date},await this.saveAllData(s)),e}async deleteOrder(e){const s=this.getLocalData();s.orders=s.orders.filter(n=>n.id!==e),await this.saveAllData(s)}async addService(e){const s=this.getLocalData(),n={...e,id:Date.now().toString()};return s.services.push(n),await this.saveAllData(s),n}async addEmployee(e){const s=this.getLocalData(),n={...e,id:Date.now().toString()};return s.employees.push(n),await this.saveAllData(s),n}async addInventoryItem(e){const s=this.getLocalData(),n={...e,id:Date.now().toString()};return s.inventoryItems.push(n),await this.saveAllData(s),n}async updateInventoryItem(e){const s=this.getLocalData(),n=s.inventoryItems.findIndex(a=>a.id===e.id);return n!==-1&&(s.inventoryItems[n]={...e},await this.saveAllData(s)),e}async deleteInventoryItem(e){const s=this.getLocalData();s.inventoryItems=s.inventoryItems.filter(n=>n.id!==e),await this.saveAllData(s)}async addInvoice(e){const s=this.getLocalData(),n={...e,id:Date.now().toString(),createdAt:new Date,updatedAt:new Date};return s.invoices.push(n),await this.saveAllData(s),n}async updateInvoice(e){const s=this.getLocalData(),n=s.invoices.findIndex(a=>a.id===e.id);return n!==-1&&(s.invoices[n]={...e,updatedAt:new Date},await this.saveAllData(s)),e}async deleteInvoice(e){const s=this.getLocalData();s.invoices=s.invoices.filter(n=>n.id!==e),await this.saveAllData(s)}async addClientAccess(e){const s=this.getLocalData(),n={...e,id:Date.now().toString()};return s.clientAccess.push(n),await this.saveAllData(s),n}async updateClientAccess(e){const s=this.getLocalData(),n=s.clientAccess.findIndex(a=>a.id===e.id);return n!==-1&&(s.clientAccess[n]={...e},await this.saveAllData(s)),e}async deleteClientAccess(e){const s=this.getLocalData();s.clientAccess=s.clientAccess.filter(n=>n.id!==e),await this.saveAllData(s)}async addClientOrder(e){const s=this.getLocalData(),n={...e,id:Date.now().toString(),createdAt:new Date,updatedAt:new Date};return s.clientOrders.push(n),await this.saveAllData(s),n}async saveCustomers(e){const s=this.getLocalData();s.customers=e,await this.saveAllData(s)}async saveOrders(e){const s=this.getLocalData();s.orders=e,await this.saveAllData(s)}async saveEmployees(e){const s=this.getLocalData();s.employees=e,await this.saveAllData(s)}async saveInventoryItems(e){const s=this.getLocalData();s.inventoryItems=e,await this.saveAllData(s)}async saveInvoices(e){const s=this.getLocalData();s.invoices=e,await this.saveAllData(s)}async saveClientAccess(e){const s=this.getLocalData();s.clientAccess=e,await this.saveAllData(s)}async saveServicePacks(e){const s=this.getLocalData();s.servicePacks=e,await this.saveAllData(s)}async saveClientOrders(e){const s=this.getLocalData();s.clientOrders=e,await this.saveAllData(s)}clearCache(){this.cache=null,this.cacheExpiry=0}async resetToMockData(){const e={customers:pl,orders:xl,services:ye,employees:vl,inventoryItems:Da,invoices:gl,clientAccess:yl,servicePacks:wl,clientOrders:bl,lastUpdated:new Date().toISOString()};await this.saveAllData(e)}}const X=new nb,td="service-inventory-mappings",ab=t=>{try{localStorage.setItem(td,JSON.stringify(t)),console.log("✅ Mappings sauvegardés:",t)}catch(e){console.error("❌ Erreur lors de la sauvegarde des mappings:",e)}},ib=()=>{try{const t=localStorage.getItem(td);if(t){const e=JSON.parse(t);return console.log("✅ Mappings chargés:",e),e}}catch(t){console.error("❌ Erreur lors du chargement des mappings:",t)}return console.log("🔧 Utilisation des mappings par défaut"),[{serviceId:"1",serviceName:"Lavage & Pliage",inventoryRequirements:[{itemId:"1",quantityPerUnit:.1},{itemId:"3",quantityPerUnit:.05},{itemId:"7",quantityPerUnit:1}]},{serviceId:"2",serviceName:"Nettoyage à sec",inventoryRequirements:[{itemId:"5",quantityPerUnit:.2},{itemId:"7",quantityPerUnit:1}]},{serviceId:"3",serviceName:"Lavage Express",inventoryRequirements:[{itemId:"1",quantityPerUnit:.15},{itemId:"3",quantityPerUnit:.08},{itemId:"7",quantityPerUnit:1}]},{serviceId:"4",serviceName:"Literie",inventoryRequirements:[{itemId:"2",quantityPerUnit:.3},{itemId:"3",quantityPerUnit:.2},{itemId:"4",quantityPerUnit:.1},{itemId:"7",quantityPerUnit:1}]},{serviceId:"5",serviceName:"Repassage",inventoryRequirements:[{itemId:"6",quantityPerUnit:2}]}]},r0=()=>ib(),lb=()=>{localStorage.removeItem(td),console.log("🔄 Mappings réinitialisés aux valeurs par défaut")},ob=()=>{try{return r0()}catch(t){return console.warn("⚠️ Erreur lors du chargement des mappings, utilisation des mappings vides:",t),[{serviceId:"1",serviceName:"Lavage & Pliage",inventoryRequirements:[]},{serviceId:"2",serviceName:"Nettoyage à sec",inventoryRequirements:[]},{serviceId:"3",serviceName:"Lavage Express",inventoryRequirements:[]},{serviceId:"4",serviceName:"Literie",inventoryRequirements:[]},{serviceId:"5",serviceName:"Repassage",inventoryRequirements:[]}]}},cb=[],sd=["en_traitement","lavage","sechage","pliage","pret","livre"],Qn=t=>{const e=[];if(!sd.includes(t.status))return e;const s=ob();return t.services.forEach(n=>{const a=s.find(i=>i.serviceId===n.id);a&&a.inventoryRequirements.forEach(i=>{const l=i.quantityPerUnit*n.quantity,o=e.find(c=>c.itemId===i.itemId);o?o.quantity+=l:e.push({itemId:i.itemId,quantity:l})})}),e},db=(t,e)=>{const s=Qn(t),n=[];return s.forEach(a=>{const i=e.find(l=>l.id===a.itemId);if(!i||i.quantity<a.quantity){const l=e.find(o=>o.id===a.itemId);n.push({itemName:(l==null?void 0:l.name)||"Article inconnu",required:a.quantity,available:(i==null?void 0:i.quantity)||0})}}),{available:n.length===0,shortages:n}},ub=(t,e)=>{const s=Qn(t);return e.map(n=>{const a=s.find(i=>i.itemId===n.id);return a?{...n,quantity:Math.max(0,n.quantity-a.quantity)}:n})},hb=(t,e)=>{let s=[...t];return e.forEach(n=>{sd.includes(n.status)&&(s=ub(n,s))}),s},mb=t=>t.filter(e=>e.quantity<=e.reorderLevel),fb=t=>t.filter(e=>e.quantity<=0),n0=v.createContext(void 0),pb=({children:t})=>{const[e,s]=v.useState(!0),[n,a]=v.useState(null),[i,l]=v.useState("dashboard"),[o,c]=v.useState({start:new Date(new Date().getFullYear(),new Date().getMonth(),1),end:new Date}),[d,u]=v.useState([]),[m,h]=v.useState([]),[y]=v.useState(ye),[g,b]=v.useState([]),[x,p]=v.useState(Da),[f,w]=v.useState([]),[j,_]=v.useState([]),[N,k]=v.useState([]),[S,O]=v.useState([]);v.useEffect(()=>{L()},[]);const L=async()=>{try{s(!0),a(null);const R=await X.getAllData();u(R.customers),h(R.orders),b(R.employees),p(R.inventoryItems),w(R.invoices),_(R.clientAccess),k(R.servicePacks),O(R.clientOrders)}catch(R){a("Erreur lors du chargement des données"),console.error("Erreur de chargement:",R)}finally{s(!1)}},f0={loading:e,error:n,activeView:i,setActiveView:l,dateRange:o,setDateRange:c,customers:d,orders:m,services:y,employees:g,inventoryItems:x,invoices:f,clientAccess:j,servicePacks:N,clientOrders:S,addCustomer:async R=>{const M={...R,id:Date.now().toString(),createdAt:new Date},z=[...d,M];u(z),await X.saveCustomers(z)},updateCustomer:async R=>{const M=d.map(z=>z.id===R.id?R:z);u(M),await X.saveCustomers(M)},deleteCustomer:async R=>{const M=d.filter(z=>z.id!==R);u(M),await X.saveCustomers(M)},addOrder:async R=>{var Nt;const M={...R,id:Date.now().toString()};if(sd.includes(M.status)){const $i=Qn(M);if($i.length>0){console.log("🔥 Consommation d'inventaire:",$i.map(ot=>{const ct=x.find($r=>$r.id===ot.itemId);return`${ct==null?void 0:ct.name}: -${ot.quantity} ${ct==null?void 0:ct.unit}`}).join(", "));const nd=x.map(ot=>{const ct=$i.find($r=>$r.itemId===ot.id);if(ct){const $r=Math.max(0,ot.quantity-ct.quantity);return{...ot,quantity:$r}}return ot});p(nd);for(const ot of nd)((Nt=x.find(ct=>ct.id===ot.id))==null?void 0:Nt.quantity)!==ot.quantity&&await X.updateInventoryItem(ot)}}const z=await X.addOrder(R);h([...m,z])},updateOrderStatus:async(R,M)=>{const z=m.map(Nt=>Nt.id===R?{...Nt,status:M,updatedAt:new Date}:Nt);h(z),await X.saveOrders(z)},updateOrder:async R=>{const M=m.map(z=>z.id===R.id?{...R,updatedAt:new Date}:z);h(M),await X.saveOrders(M)},deleteOrder:async R=>{const M=m.filter(z=>z.id!==R);h(M),await X.saveOrders(M)},addInventoryItem:async R=>{const M=await X.addInventoryItem(R);p([...x,M])},updateInventoryItem:async R=>{const M=await X.updateInventoryItem(R);p(x.map(z=>z.id===R.id?M:z))},deleteInventoryItem:async R=>{await X.deleteInventoryItem(R),p(x.filter(M=>M.id!==R))},checkInventoryForOrder:R=>db(R,x),getTheoreticalInventory:()=>hb(x,m),getLowStockItems:()=>mb(x),getOutOfStockItems:()=>fb(x),addInvoice:async R=>{const M={...R,id:Date.now().toString(),createdAt:new Date,updatedAt:new Date},z=[...f,M];w(z),await X.saveInvoices(z)},updateInvoice:async R=>{const M=f.map(z=>z.id===R.id?{...R,updatedAt:new Date}:z);w(M),await X.saveInvoices(M)},deleteInvoice:async R=>{const M=f.filter(z=>z.id!==R);w(M),await X.saveInvoices(M)},addEmployee:async R=>{const M={...R,id:Date.now().toString()},z=[...g,M];b(z),await X.saveEmployees(z)},updateEmployee:async R=>{const M=g.map(z=>z.id===R.id?R:z);b(M),await X.saveEmployees(M)},deleteEmployee:async R=>{const M=g.filter(z=>z.id!==R);b(M),await X.saveEmployees(M)},addClientAccess:async R=>{const M={...R,id:Date.now().toString(),createdAt:new Date},z=[...j,M];_(z),await X.saveClientAccess(z)},updateClientAccess:async R=>{const M=j.map(z=>z.id===R.id?R:z);_(M),await X.saveClientAccess(M)},deleteClientAccess:async R=>{const M=j.filter(z=>z.id!==R);_(M),await X.saveClientAccess(M)},addServicePack:async R=>{const M={...R,id:Date.now().toString()},z=[...N,M];k(z),await X.saveServicePacks(z)},updateServicePack:async R=>{const M=N.map(z=>z.id===R.id?R:z);k(M),await X.saveServicePacks(M)},deleteServicePack:async R=>{const M=N.filter(z=>z.id!==R);k(M),await X.saveServicePacks(M)},addClientOrder:async R=>{const M={...R,id:Date.now().toString(),createdAt:new Date,updatedAt:new Date},z=[...S,M];O(z),await X.saveClientOrders(z)},updateClientOrderStatus:async(R,M)=>{const z=S.map(Nt=>Nt.id===R?{...Nt,status:M,updatedAt:new Date}:Nt);O(z),await X.saveClientOrders(z)},updateClientOrder:async R=>{const M=S.map(z=>z.id===R.id?{...R,updatedAt:new Date}:z);O(M),await X.saveClientOrders(M)},deleteClientOrder:async R=>{const M=S.filter(z=>z.id!==R);O(M),await X.saveClientOrders(M)},refreshData:async()=>{X.clearCache(),await L()},resetToMockData:async()=>{try{s(!0),await X.resetToMockData(),await L()}catch(R){a("Erreur lors de la réinitialisation"),console.error("Erreur de réinitialisation:",R)}}};return r.jsx(n0.Provider,{value:f0,children:t})},js=()=>{const t=v.useContext(n0);if(t===void 0)throw new Error("useDatabase must be used within a DatabaseProvider");return t},xb=()=>{const{clientOrders:t}=js(),[e,s]=v.useState([]),[n,a]=v.useState(!1);v.useEffect(()=>{const u=parseInt(localStorage.getItem("lastClientOrderCount")||"0"),m=t.length;m>u&&(t.slice(0,m-u).forEach(y=>{const g={id:`order_${y.id}_${Date.now()}`,type:"info",title:"Nouvelle commande client",message:`Commande #${y.id.slice(-6)} reçue pour ${y.totalAmount.toFixed(2)}€`,timestamp:new Date,read:!1};s(b=>[g,...b.slice(0,9)])}),localStorage.setItem("lastClientOrderCount",m.toString()))},[t]);const i=u=>{s(m=>m.map(h=>h.id===u?{...h,read:!0}:h))},l=()=>{s(u=>u.map(m=>({...m,read:!0})))},o=()=>{s([])},c=e.filter(u=>!u.read).length,d=u=>{switch(u){case"success":return r.jsx("div",{className:"flex-shrink-0",children:r.jsx("div",{className:"h-8 w-8 bg-green-100 rounded-full flex items-center justify-center",children:r.jsx("svg",{className:"h-5 w-5 text-green-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})})});case"info":return r.jsx("div",{className:"flex-shrink-0",children:r.jsx("div",{className:"h-8 w-8 bg-blue-100 rounded-full flex items-center justify-center",children:r.jsx("svg",{className:"h-5 w-5 text-blue-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})})});case"warning":return r.jsx("div",{className:"flex-shrink-0",children:r.jsx("div",{className:"h-8 w-8 bg-yellow-100 rounded-full flex items-center justify-center",children:r.jsx("svg",{className:"h-5 w-5 text-yellow-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})})});case"error":return r.jsx("div",{className:"flex-shrink-0",children:r.jsx("div",{className:"h-8 w-8 bg-red-100 rounded-full flex items-center justify-center",children:r.jsx("svg",{className:"h-5 w-5 text-red-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})});default:return null}};return r.jsxs("div",{className:"relative",children:[r.jsxs("button",{onClick:()=>a(!n),className:"relative p-2 text-gray-600 hover:text-gray-900 focus:outline-none focus:ring-2 focus:ring-blue-500 rounded-md",children:[r.jsx("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 17h5l-5-5V9a6 6 0 10-12 0v3l-5 5h5m7 0v1a3 3 0 11-6 0v-1m6 0H9"})}),c>0&&r.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center",children:c>9?"9+":c})]}),n&&r.jsxs("div",{className:"absolute right-0 mt-2 w-80 bg-white rounded-lg shadow-lg border border-gray-200 z-50",children:[r.jsx("div",{className:"p-4 border-b border-gray-200",children:r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Notifications"}),r.jsxs("div",{className:"flex space-x-2",children:[c>0&&r.jsx("button",{onClick:l,className:"text-sm text-blue-600 hover:text-blue-800",children:"Tout marquer lu"}),r.jsx("button",{onClick:o,className:"text-sm text-gray-600 hover:text-gray-800",children:"Effacer tout"})]})]})}),r.jsx("div",{className:"max-h-96 overflow-y-auto",children:e.length===0?r.jsx("div",{className:"p-4 text-center text-gray-500",children:"Aucune notification"}):r.jsx("div",{className:"divide-y divide-gray-200",children:e.map(u=>r.jsx("div",{className:`p-4 hover:bg-gray-50 cursor-pointer ${u.read?"":"bg-blue-50"}`,onClick:()=>i(u.id),children:r.jsxs("div",{className:"flex space-x-3",children:[d(u.type),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs("div",{className:"flex justify-between items-start",children:[r.jsx("p",{className:`text-sm font-medium ${u.read?"text-gray-700":"text-gray-900"}`,children:u.title}),r.jsx("p",{className:"text-xs text-gray-500",children:u.timestamp.toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"})})]}),r.jsx("p",{className:`text-sm ${u.read?"text-gray-500":"text-gray-700"}`,children:u.message})]})]})},u.id))})})]})]})},de=()=>js(),gb=({onMenuToggle:t})=>{const{activeView:e}=de(),s=()=>{switch(e){case"dashboard":return"Tableau de bord";case"customers":return"Gestion des clients";case"orders":return"Gestion des commandes";case"inventory":return"Gestion du stock";case"employees":return"Gestion des employés";case"payments":return"Paiements";case"reports":return"Rapports et analyses";case"settings":return"Paramètres système";case"client-access":return"Gestion des Accès Clients";case"supabase-monitoring":return"Monitoring Supabase";default:return"BlanchPro"}};return r.jsxs("header",{className:"h-16 px-4 sm:px-6 bg-white border-b border-gray-200 flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx("button",{onClick:t,className:"md:hidden mr-3 text-gray-600 hover:text-gray-900 focus:outline-none","aria-label":"Toggle menu",children:r.jsx("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})}),r.jsx("h2",{className:"text-lg sm:text-xl font-semibold text-gray-800",children:s()})]}),r.jsxs("div",{className:"flex items-center gap-3 sm:gap-6",children:[r.jsxs("div",{className:"relative hidden sm:block",children:[r.jsx("input",{type:"text",placeholder:"Rechercher...",className:"pl-10 pr-4 py-2 bg-gray-100 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:bg-white transition-all w-40 md:w-56 lg:w-64"}),r.jsx("svg",{className:"absolute left-3 top-2.5 text-gray-400 h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]}),r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsx($v,{className:"hidden md:flex"}),r.jsx(xb,{}),r.jsx("div",{className:"text-sm text-gray-600 hidden lg:block",children:new Date().toLocaleDateString("fr-FR",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})]})]})]})},vb=()=>{const[t,e]=v.useState(()=>!localStorage.getItem("supabase-alert-dismissed")),s=()=>{e(!1),localStorage.setItem("supabase-alert-dismissed","true")};return t?r.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-purple-600 text-white p-4 relative",children:r.jsxs("div",{className:"flex items-center justify-between max-w-7xl mx-auto",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(Ti,{className:"w-6 h-6 flex-shrink-0"}),r.jsxs("div",{children:[r.jsx("p",{className:"font-semibold",children:"🎉 Monitoring Supabase Activé !"}),r.jsx("p",{className:"text-sm opacity-90",children:"Surveillez vos performances de base de données en temps réel"})]})]}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsxs(Wn,{to:"/supabase-monitoring",className:"bg-white/20 hover:bg-white/30 px-4 py-2 rounded-lg text-sm font-medium transition-colors flex items-center gap-2",children:[r.jsx(bv,{className:"w-4 h-4"}),"Voir le monitoring"]}),r.jsx("button",{onClick:s,className:"p-1 hover:bg-white/20 rounded-full transition-colors","aria-label":"Fermer",children:r.jsx(Us,{className:"w-5 h-5"})})]})]})}):null},a0=(t={})=>{const{interval:e=3e4,enabled:s=!0,onRefresh:n}=t,{refreshData:a}=js(),i=v.useRef(null),l=v.useRef(Date.now());return v.useEffect(()=>{if(!s){i.current&&(clearInterval(i.current),i.current=null);return}const c=async()=>{try{const u=Date.now();if(u-l.current<5e3)return;l.current=u,await a(),n&&n(),console.log(`🔄 Auto-refresh effectué à ${new Date().toLocaleTimeString()}`)}catch(u){console.error("Erreur lors du rafraîchissement automatique:",u)}};c(),i.current=setInterval(c,e);const d=()=>{!document.hidden&&s&&c()};return document.addEventListener("visibilitychange",d),()=>{i.current&&clearInterval(i.current),document.removeEventListener("visibilitychange",d)}},[e,s,a,n]),{forceRefresh:async()=>{try{await a(),n&&n(),console.log("🔄 Rafraîchissement forcé effectué")}catch(c){console.error("Erreur lors du rafraîchissement forcé:",c)}},lastRefresh:l.current}},yb=({children:t})=>{const[e,s]=v.useState(!1),{activeView:n}=de();return a0({interval:3e4,enabled:!0,onRefresh:()=>{console.log("🔄 Rafraîchissement automatique global effectué")}}),v.useEffect(()=>{s(!1)},[n]),v.useEffect(()=>(e?document.body.style.overflow="hidden":document.body.style.overflow="auto",()=>{document.body.style.overflow="auto"}),[e]),r.jsxs("div",{className:"flex flex-col h-screen bg-gray-50 relative",children:[r.jsx(vb,{}),r.jsxs("div",{className:"flex flex-1 bg-gray-50 relative",children:[e&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-40 md:hidden",onClick:()=>s(!1)}),r.jsx("div",{className:`fixed md:relative z-50 transform ${e?"translate-x-0":"-translate-x-full md:translate-x-0"} transition-transform duration-300 ease-in-out w-64 h-full bg-white border-r border-gray-200 overflow-y-auto`,children:r.jsx(Mv,{})}),r.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden pb-16 md:pb-0",children:[r.jsx(gb,{onMenuToggle:()=>s(!e)}),r.jsx("main",{className:"flex-1 overflow-y-auto bg-white md:m-4 md:rounded-lg md:shadow-sm",children:r.jsx("div",{className:"p-4 md:p-6",children:t})})]})]})]})},wb=window.fetch;window.fetch=function(t,e){const s=typeof t=="string"?t:t.toString();return s.includes("api.jsonbin.io")?(console.log("Intercepted request to JSONBin, using mock data"),Promise.resolve(new Response(JSON.stringify({record:{customers:[],orders:[],services:[],employees:[],inventoryItems:[],invoices:[],clientAccess:[],servicePacks:[],clientOrders:[],lastUpdated:new Date().toISOString()}}),{status:200,statusText:"OK",headers:{"Content-Type":"application/json"}}))):s.includes("/invoices")&&!s.includes("http")?Promise.resolve(new Response(JSON.stringify([]),{status:200,statusText:"OK",headers:{"Content-Type":"application/json"}})):wb.call(this,t,e)};const Bu=[{label:"En attente",value:"en_attente",color:"#3B82F6"},{label:"En traitement",value:"en_traitement",color:"#8B5CF6"},{label:"Lavage",value:"lavage",color:"#06B6D4"},{label:"Séchage",value:"sechage",color:"#14B8A6"},{label:"Pliage",value:"pliage",color:"#10B981"},{label:"Prêt",value:"pret",color:"#84CC16"},{label:"Livré",value:"livre",color:"#22C55E"},{label:"Annulé",value:"annule",color:"#EF4444"}],bb=({ordersByStatus:t})=>{const e=Object.values(t).reduce((s,n)=>s+n,0);return e===0?r.jsxs("div",{className:"w-full text-center py-8",children:[r.jsx("div",{className:"text-gray-400 mb-2",children:r.jsx("svg",{className:"w-12 h-12 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})}),r.jsx("p",{className:"text-sm text-gray-500",children:"Aucune commande pour cette période"})]}):r.jsxs("div",{className:"w-full h-full flex flex-col",children:[r.jsx("div",{className:"h-3 sm:h-4 w-full bg-gray-200 rounded-full overflow-hidden mb-8 sm:mb-12 flex-shrink-0",children:Bu.map(({value:s,color:n})=>{const a=t[s]||0,i=e?a/e*100:0;return i>0?r.jsx("div",{className:"h-full float-left transition-all duration-300",style:{width:`${i}%`,backgroundColor:n}},s):null})}),r.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-2 w-full flex-1 content-start",children:Bu.map(({label:s,value:n,color:a})=>{const i=t[n]||0,l=e?Math.round(i/e*100):0;return r.jsxs("div",{className:"flex flex-col p-2 sm:p-3 bg-gray-50 border border-gray-100 rounded-lg hover:bg-gray-100 transition-colors w-full",children:[r.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-2 mb-1",children:[r.jsx("span",{className:"flex-shrink-0 w-2 h-2 sm:w-2.5 sm:h-2.5 rounded-full",style:{backgroundColor:a}}),r.jsx("span",{className:"text-xs font-medium text-gray-700 truncate flex-1",children:s})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-xs sm:text-sm font-bold text-gray-900",children:i}),r.jsxs("span",{className:"text-xs font-medium text-gray-500 bg-white px-1.5 py-0.5 rounded",children:[l,"%"]})]})]},n)})})]})},Y=t=>new Intl.NumberFormat("fr-FR",{style:"currency",currency:"EUR",minimumFractionDigits:2}).format(t),Se=t=>{if(!t)return"Date non disponible";try{const e=typeof t=="string"?new Date(t):t;return isNaN(e.getTime())?(console.error("Date invalide:",t),"Date invalide"):new Intl.DateTimeFormat("fr-FR",{year:"numeric",month:"long",day:"numeric"}).format(e)}catch(e){return console.error("Erreur de formatage de date:",e),"Erreur de date"}},jb=({orders:t})=>{const{customers:e}=js(),s=jt(),n=[...t].sort((o,c)=>new Date(c.createdAt).getTime()-new Date(o.createdAt).getTime()).slice(0,5),a=o=>{const c=e.find(d=>d.id===o);return c?c.name:"Client inconnu"},i=o=>{switch(o){case"en_attente":return"bg-yellow-100 text-yellow-800";case"en_traitement":return"bg-purple-100 text-purple-800";case"lavage":return"bg-cyan-100 text-cyan-800";case"sechage":return"bg-teal-100 text-teal-800";case"pliage":return"bg-emerald-100 text-emerald-800";case"pret":return"bg-green-100 text-green-800";case"livre":return"bg-blue-100 text-blue-800";case"annule":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},l=o=>{s(`/orders/${o}`)};return r.jsxs("div",{className:"w-full",children:[r.jsx("div",{className:"flex justify-end mb-4 gap-3",children:r.jsx("button",{className:"text-xs sm:text-sm text-blue-600 hover:text-blue-800 font-medium w-full sm:w-auto text-center flex-shrink-0",onClick:()=>s("/orders"),children:"Voir tout"})}),r.jsx("div",{className:"hidden lg:block overflow-x-auto",children:r.jsx("div",{className:"min-w-full",children:r.jsxs("table",{className:"w-full divide-y divide-gray-200",children:[r.jsx("thead",{className:"bg-gray-50",children:r.jsxs("tr",{children:[r.jsx("th",{scope:"col",className:"px-3 sm:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"N°"}),r.jsx("th",{scope:"col",className:"px-3 sm:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Client"}),r.jsx("th",{scope:"col",className:"px-3 sm:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),r.jsx("th",{scope:"col",className:"px-3 sm:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Montant"}),r.jsx("th",{scope:"col",className:"px-3 sm:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"État"}),r.jsx("th",{scope:"col",className:"px-3 sm:px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Action"})]})}),r.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:n.map(o=>r.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[r.jsxs("td",{className:"px-3 sm:px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:["#",o.id]}),r.jsx("td",{className:"px-3 sm:px-6 py-4 whitespace-nowrap text-sm text-gray-500 max-w-xs truncate",children:a(o.customerId)}),r.jsx("td",{className:"px-3 sm:px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:Se(o.createdAt)}),r.jsx("td",{className:"px-3 sm:px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:Y(o.totalAmount)}),r.jsx("td",{className:"px-3 sm:px-6 py-4 whitespace-nowrap",children:r.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${i(o.status)}`,children:o.status==="en_attente"?"En attente":o.status==="en_traitement"?"En traitement":o.status==="lavage"?"Lavage":o.status==="sechage"?"Séchage":o.status==="pliage"?"Pliage":o.status==="pret"?"Prêt":o.status==="livre"?"Livré":"Annulé"})}),r.jsx("td",{className:"px-3 sm:px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:r.jsx("button",{onClick:c=>{c.stopPropagation(),l(o.id)},className:"text-blue-600 hover:text-blue-900 transition-colors",children:"Voir"})})]},o.id))})]})})}),r.jsx("div",{className:"lg:hidden space-y-3",children:n.length>0?n.map(o=>r.jsxs("div",{className:"p-3 sm:p-4 border border-gray-200 rounded-xl hover:bg-gray-50 hover:border-gray-300 transition-all duration-200 cursor-pointer",onClick:()=>l(o.id),children:[r.jsxs("div",{className:"flex justify-between items-start gap-3",children:[r.jsxs("div",{className:"min-w-0 flex-1",children:[r.jsxs("p",{className:"text-sm font-semibold text-gray-900 truncate",children:["Commande #",o.id]}),r.jsx("p",{className:"text-xs sm:text-sm text-gray-500 mt-1 truncate",children:a(o.customerId)})]}),r.jsxs("div",{className:"text-right flex-shrink-0",children:[r.jsx("p",{className:"text-sm font-bold text-gray-900",children:Y(o.totalAmount)}),r.jsx("div",{className:"mt-1",children:r.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${i(o.status)}`,children:o.status==="en_attente"?"En attente":o.status==="en_traitement"?"En traitement":o.status==="lavage"?"Lavage":o.status==="sechage"?"Séchage":o.status==="pliage"?"Pliage":o.status==="pret"?"Prêt":o.status==="livre"?"Livré":"Annulé"})})]})]}),r.jsxs("div",{className:"mt-3 flex justify-between items-center",children:[r.jsx("span",{className:"text-xs sm:text-sm text-gray-500",children:Se(o.createdAt)}),r.jsxs("button",{onClick:c=>{c.stopPropagation(),l(o.id)},className:"text-blue-600 hover:text-blue-900 text-xs sm:text-sm font-medium flex items-center gap-1 transition-colors",children:["Détails",r.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})]})]},o.id)):r.jsxs("div",{className:"p-8 text-center",children:[r.jsx("div",{className:"text-gray-400 mb-2",children:r.jsx("svg",{className:"w-12 h-12 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),r.jsx("p",{className:"text-sm text-gray-500",children:"Aucune commande pour cette période"})]})})]})},Nb=()=>{const{inventoryItems:t}=js(),e=jt(),s=t.filter(n=>n.quantity<=n.reorderLevel);return s.length===0?r.jsxs("div",{className:"h-full flex flex-col",children:[r.jsx("h3",{className:"text-base sm:text-lg font-semibold text-gray-800 mb-3 sm:mb-4",children:"État du stock"}),r.jsx("div",{className:"flex-1 flex items-center justify-center",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-3",children:r.jsx("svg",{className:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),r.jsx("p",{className:"text-sm text-green-600 font-medium",children:"Tous les articles sont à des niveaux suffisants"})]})})]}):r.jsxs("div",{className:"h-full flex flex-col",children:[r.jsxs("div",{className:"flex justify-between items-center mb-3 sm:mb-4",children:[r.jsx("h3",{className:"text-base sm:text-lg font-semibold text-gray-800 truncate",children:"Alerte stock bas"}),r.jsx("button",{className:"text-xs sm:text-sm text-blue-600 hover:text-blue-800 font-medium flex-shrink-0",onClick:()=>e("/inventory"),children:"Gérer le stock"})]}),r.jsxs("div",{className:"flex-1 overflow-y-auto",children:[r.jsx("div",{className:"space-y-3 pr-1",children:s.slice(0,6).map(n=>{const a=Math.round(n.quantity/n.reorderLevel*100),i=a<=30?"bg-red-500":a<=70?"bg-yellow-500":"bg-green-500";return r.jsxs("div",{className:"border border-gray-200 rounded-lg p-3 hover:bg-gray-50 transition-colors",children:[r.jsxs("div",{className:"flex justify-between items-start mb-2 gap-2",children:[r.jsx("h4",{className:"font-medium text-gray-800 text-sm truncate flex-1",children:n.name}),r.jsxs("span",{className:"text-xs text-gray-500 flex-shrink-0",children:[n.quantity," ",n.unit]})]}),r.jsx("div",{className:"w-full h-1.5 bg-gray-200 rounded-full overflow-hidden mb-2",children:r.jsx("div",{className:`h-full ${i} transition-all duration-300`,style:{width:`${Math.min(a,100)}%`}})}),r.jsxs("div",{className:"text-xs text-red-600",children:["Seuil : ",n.reorderLevel," ",n.unit]})]},n.id)})}),s.length>6&&r.jsx("div",{className:"mt-3 pt-3 border-t border-gray-200",children:r.jsxs("button",{onClick:()=>e("/inventory"),className:"w-full text-xs text-blue-600 hover:text-blue-800 font-medium py-2 hover:bg-blue-50 rounded-md transition-colors",children:["Voir tous les ",s.length," articles en stock bas"]})})]})]})},kb=({className:t=""})=>{const{dateRange:e,setDateRange:s}=js(),[n,a]=v.useState(!1),[i,l]=v.useState(!1),[o,c]=v.useState(e);v.useEffect(()=>{c(e)},[e]);const d=[{label:"Aujourd'hui",getValue:()=>{const x=new Date,p=new Date(x.getFullYear(),x.getMonth(),x.getDate()),f=new Date(x.getFullYear(),x.getMonth(),x.getDate(),23,59,59,999);return{start:p,end:f}}},{label:"Cette semaine",getValue:()=>{const x=new Date,p=x.getDay(),f=new Date(x);f.setDate(x.getDate()-p+(p===0?-6:1)),f.setHours(0,0,0,0);const w=new Date(f);return w.setDate(f.getDate()+6),w.setHours(23,59,59,999),{start:f,end:w}}},{label:"Ce mois",getValue:()=>{const x=new Date,p=new Date(x.getFullYear(),x.getMonth(),1),f=new Date(x.getFullYear(),x.getMonth()+1,0,23,59,59,999);return{start:p,end:f}}},{label:"Mois dernier",getValue:()=>{const x=new Date,p=new Date(x.getFullYear(),x.getMonth()-1,1),f=new Date(x.getFullYear(),x.getMonth(),0,23,59,59,999);return{start:p,end:f}}},{label:"Cette année",getValue:()=>{const x=new Date,p=new Date(x.getFullYear(),0,1),f=new Date(x.getFullYear(),11,31,23,59,59,999);return{start:p,end:f}}}],u=(x,p)=>{const f=x.toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric"}),w=p.toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric"});return f===w?f:`${f} - ${w}`},m=x=>{const p=x.getValue();s(p),a(!1)},h=(x,p)=>{const f=new Date(p);isNaN(f.getTime())||(x==="start"?f.setHours(0,0,0,0):f.setHours(23,59,59,999),c(w=>({...w,[x]:f})))},y=()=>{o.start<=o.end&&(s(o),l(!1))},g=x=>x.toISOString().split("T")[0],b=v.useRef(null);return v.useEffect(()=>{const x=p=>{b.current&&!b.current.contains(p.target)&&(a(!1),l(!1))};return(n||i)&&document.addEventListener("mousedown",x),()=>{document.removeEventListener("mousedown",x)}},[n,i]),r.jsxs("div",{className:`relative flex gap-2 ${t}`,ref:b,children:[r.jsxs("button",{onClick:()=>a(!n),className:"flex items-center gap-2 px-3 sm:px-4 py-2 bg-white border border-gray-300 rounded-lg shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors w-full sm:w-auto justify-between sm:justify-start",children:[r.jsxs("div",{className:"flex items-center gap-2 min-w-0 flex-1",children:[r.jsx(Kc,{className:"w-4 h-4 text-gray-500 flex-shrink-0"}),r.jsx("span",{className:"text-xs sm:text-sm font-medium text-gray-700 truncate",children:u(e.start,e.end)})]}),r.jsx(vv,{className:`w-4 h-4 text-gray-500 transition-transform flex-shrink-0 ${n?"rotate-180":""}`})]}),r.jsxs("button",{onClick:()=>l(!i),className:"flex items-center gap-2 px-3 sm:px-4 py-2 bg-blue-600 text-white border border-blue-600 rounded-lg shadow-sm hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors flex-shrink-0",children:[r.jsx(bu,{className:"w-4 h-4"}),r.jsx("span",{className:"text-xs sm:text-sm font-medium hidden sm:inline",children:"Personnalisée"})]}),n&&r.jsx("div",{className:"absolute top-full left-0 right-0 sm:left-0 sm:right-auto mt-2 w-full sm:w-80 bg-white border border-gray-200 rounded-lg shadow-lg z-50 max-h-96 overflow-y-auto",children:r.jsxs("div",{className:"p-3 sm:p-4",children:[r.jsxs("h4",{className:"text-sm font-medium text-gray-700 mb-2 flex items-center gap-2",children:[r.jsx(Pt,{className:"w-4 h-4"}),"Périodes prédéfinies"]}),r.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2",children:d.map(x=>r.jsx("button",{onClick:()=>m(x),className:"px-3 py-2 text-sm text-gray-700 bg-gray-50 hover:bg-gray-100 rounded-md transition-colors text-left w-full",children:x.label},x.label))})]})}),i&&r.jsx("div",{className:"absolute top-full right-0 mt-2 w-full sm:w-80 bg-white border border-gray-200 rounded-lg shadow-lg z-50",children:r.jsxs("div",{className:"p-3 sm:p-4",children:[r.jsxs("h4",{className:"text-sm font-medium text-gray-700 mb-3 flex items-center gap-2",children:[r.jsx(bu,{className:"w-4 h-4"}),"Période personnalisée"]}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Date de début"}),r.jsx("input",{type:"date",value:g(o.start),onChange:x=>h("start",x.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Date de fin"}),r.jsx("input",{type:"date",value:g(o.end),onChange:x=>h("end",x.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})]}),r.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 mt-4",children:[r.jsx("button",{onClick:()=>l(!1),className:"flex-1 px-3 py-2 text-sm text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-md transition-colors order-2 sm:order-1",children:"Annuler"}),r.jsx("button",{onClick:y,className:"flex-1 px-3 py-2 text-sm text-white bg-blue-600 hover:bg-blue-700 rounded-md transition-colors order-1 sm:order-2",children:"Appliquer"})]})]})})]})},qo=(t,e,s)=>{const n=t.getTime();return n>=e.getTime()&&n<=s.getTime()},_b=(t,e,s,n,a)=>v.useMemo(()=>{const i=new Set(s.filter(g=>g.status==="paid").map(g=>g.orderId).filter(Boolean)),l=t.map(g=>i.has(g.id)?{...g,paid:!0}:g),o=l.filter(g=>{if(!g.createdAt)return!1;const b=g.createdAt instanceof Date?g.createdAt:new Date(g.createdAt);return!isNaN(b.getTime())&&qo(b,n,a)}),c=l.reduce((g,b)=>{if(!b.paid&&!i.has(b.id))return g;const x=b.updatedAt instanceof Date?b.updatedAt:new Date(b.updatedAt);return isNaN(x.getTime())||!qo(x,n,a)?g:g+(typeof b.totalAmount=="number"?b.totalAmount:0)},0),d=l.filter(g=>["en_attente","en_traitement","lavage","sechage","pliage"].includes(g.status)).length,u=l.filter(g=>g.status==="pret"&&!g.paid).length,m=l.reduce((g,b)=>(g[b.status]=(g[b.status]||0)+1,g),{}),h=[...l].sort((g,b)=>new Date(b.createdAt).getTime()-new Date(g.createdAt).getTime()).slice(0,5),y=o.length;return{periodRevenue:c,pendingOrders:d,readyForPickup:u,totalCustomers:e.length,ordersByStatus:m,recentOrders:h,orderCount:y}},[t,e,s,n,a]),Sb=()=>{const{orders:t,customers:e,dateRange:s,invoices:n}=de(),a=s.start,i=s.end,l=v.useMemo(()=>{const m=a.toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric"}),h=i.toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric"});return m===h?m:`${m} - ${h}`},[a,i]),o=_b(t,e,n,a,i),c=v.useMemo(()=>{const m=i.getTime()-a.getTime(),h=new Date(a.getTime()-1),y=new Date(h.getTime()-m),g=t.reduce((x,p)=>{if(!p.paid||!p.updatedAt)return x;const f=p.updatedAt instanceof Date?p.updatedAt:new Date(p.updatedAt);return isNaN(f.getTime())||!qo(f,y,h)?x:x+(typeof p.totalAmount=="number"?p.totalAmount:0)},0);if(g===0)return{valeur:o.periodRevenue>0?100:0,estPositif:!0};const b=(o.periodRevenue-g)/g*100;return{valeur:Math.abs(Math.round(b)),estPositif:b>=0}},[t,a,i,o.periodRevenue]),[d,u]=v.useState(!0);return v.useEffect(()=>{const m=setTimeout(()=>u(!1),300);return()=>clearTimeout(m)},[]),d?r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50 flex items-center justify-center",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500 mx-auto mb-4"}),r.jsx("p",{className:"text-gray-600",children:"Chargement du tableau de bord..."})]})}):r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50",children:r.jsxs("div",{className:"w-full max-w-7xl mx-auto px-3 sm:px-4 lg:px-6 xl:px-8 py-4 sm:py-6 lg:py-8",children:[r.jsx("div",{className:"mb-6 sm:mb-8",children:r.jsx("div",{className:"flex flex-col gap-4 sm:gap-6",children:r.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start sm:justify-between gap-3 sm:gap-4",children:[r.jsx("div",{className:"flex-1 min-w-0",children:r.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2",children:[r.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-900",children:"Tableau de bord"}),r.jsxs("p",{className:"text-sm sm:text-base text-gray-600 flex items-center gap-2",children:[r.jsx(Kc,{size:16,className:"flex-shrink-0"}),r.jsxs("span",{children:["Période : ",l]})]})]})}),r.jsx("div",{className:"flex-shrink-0 w-full sm:w-auto",children:r.jsx(kb,{className:"w-full sm:w-auto"})})]})})}),r.jsxs("div",{className:"grid grid-cols-2 gap-2 sm:gap-4 mb-6 sm:mb-8",children:[r.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-3 sm:p-4 lg:p-6 hover:shadow-md transition-shadow h-32 sm:h-36 lg:h-40 flex flex-col w-full",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("div",{className:"p-1.5 sm:p-2 lg:p-3 bg-emerald-100 rounded-lg flex-shrink-0",children:r.jsx(Fs,{className:"text-emerald-600",size:16})}),r.jsxs("div",{className:`hidden sm:flex items-center gap-1 ${c.estPositif?"text-emerald-600":"text-red-500"} flex-shrink-0`,children:[c.estPositif?r.jsx(dn,{size:12}):r.jsx(li,{size:12}),r.jsxs("span",{className:"text-xs font-medium",children:[c.estPositif?"+":"-",c.valeur,"%"]})]})]}),r.jsx("div",{className:"text-2xl sm:text-3xl font-bold text-gray-900 mb-1",children:Y(o.periodRevenue)}),r.jsxs("p",{className:"text-sm text-gray-600",children:["Revenus • ",r.jsxs("span",{className:"text-xs text-gray-500",children:[o.orderCount," commandes"]})]})]}),r.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-3 sm:p-4 lg:p-6 hover:shadow-md transition-shadow h-32 sm:h-36 lg:h-40 flex flex-col w-full",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("div",{className:"p-1.5 sm:p-2 lg:p-3 bg-blue-100 rounded-lg flex-shrink-0",children:r.jsx(Co,{className:"text-blue-600",size:16})}),r.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-pulse flex-shrink-0"})]}),r.jsx("div",{className:"text-2xl sm:text-3xl font-bold text-gray-900 mb-1",children:o.pendingOrders}),r.jsxs("p",{className:"text-sm text-gray-600",children:["En cours • ",r.jsx("span",{className:"text-xs text-gray-500",children:"commandes actives"})]})]}),r.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-3 sm:p-4 lg:p-6 hover:shadow-md transition-shadow h-32 sm:h-36 lg:h-40 flex flex-col w-full",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("div",{className:"p-1.5 sm:p-2 lg:p-3 bg-green-100 rounded-lg flex-shrink-0",children:r.jsx(Cv,{className:"text-green-600",size:16})}),o.readyForPickup>0&&r.jsx("div",{className:"hidden sm:block px-1.5 py-0.5 bg-green-100 text-green-700 text-xs font-medium rounded-full flex-shrink-0",children:"À récupérer"})]}),r.jsx("div",{className:"text-2xl sm:text-3xl font-bold text-gray-900 mb-1",children:o.readyForPickup}),r.jsxs("p",{className:"text-sm text-gray-600",children:["Prêt • ",r.jsx("span",{className:"text-xs text-gray-500",children:"à récupérer"})]})]}),r.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-3 sm:p-4 lg:p-6 hover:shadow-md transition-shadow h-32 sm:h-36 lg:h-40 flex flex-col w-full",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("div",{className:"p-1.5 sm:p-2 lg:p-3 bg-purple-100 rounded-lg flex-shrink-0",children:r.jsx(Af,{className:"text-purple-600",size:16})}),r.jsx("div",{className:"text-purple-600 flex-shrink-0",children:r.jsx(La,{size:12})})]}),r.jsx("div",{className:"text-2xl sm:text-3xl font-bold text-gray-900 mb-1",children:o.totalCustomers}),r.jsxs("p",{className:"text-sm text-gray-600",children:["Clients • ",r.jsx("span",{className:"text-xs text-gray-500",children:"actifs"})]})]})]}),r.jsxs("div",{className:"flex flex-col xl:flex-row gap-4 sm:gap-6 mb-6 sm:mb-8 mt-4 xl:h-96",children:[r.jsx("div",{className:"w-full xl:w-2/3",children:r.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 p-4 sm:p-6 w-full h-full",children:[r.jsxs("div",{className:"flex justify-between items-center gap-3 mb-4",children:[r.jsx("h2",{className:"text-base sm:text-lg font-semibold text-gray-900 truncate",children:"Statut des commandes"}),r.jsx("div",{className:"p-2 bg-blue-50 rounded-lg flex-shrink-0 w-9 h-9 flex items-center justify-center",children:r.jsx(La,{className:"text-blue-600",size:18})})]}),r.jsx("div",{className:"w-full h-[calc(100%-4rem)]",children:r.jsx(bb,{ordersByStatus:o.ordersByStatus})})]})}),r.jsx("div",{className:"w-full xl:w-1/3",children:r.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 p-4 sm:p-6 h-full flex flex-col",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("h2",{className:"text-base sm:text-lg font-semibold text-gray-900",children:"Alerte de stock"}),r.jsx("div",{className:"p-2 bg-amber-50 rounded-lg",children:r.jsx(La,{className:"text-amber-600",size:18})})]}),r.jsx("div",{className:"flex-1 overflow-hidden",children:r.jsx(Nb,{})})]})})]}),r.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 p-4 sm:p-6 w-full",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3 mb-4 sm:mb-6",children:[r.jsx("h2",{className:"text-base sm:text-lg font-semibold text-gray-900 truncate",children:"Commandes récentes"}),r.jsxs("div",{className:"text-xs sm:text-sm text-gray-500 flex-shrink-0",children:[o.recentOrders.length," commandes"]})]}),r.jsx("div",{className:"w-full overflow-hidden",children:r.jsx(jb,{orders:o.recentOrders})})]})]})})};function Cb(t){if(typeof document>"u")return;let e=document.head||document.getElementsByTagName("head")[0],s=document.createElement("style");s.type="text/css",e.firstChild?e.insertBefore(s,e.firstChild):e.appendChild(s),s.styleSheet?s.styleSheet.cssText=t:s.appendChild(document.createTextNode(t))}Cb(`:root{--toastify-color-light: #fff;--toastify-color-dark: #121212;--toastify-color-info: #3498db;--toastify-color-success: #07bc0c;--toastify-color-warning: #f1c40f;--toastify-color-error: hsl(6, 78%, 57%);--toastify-color-transparent: rgba(255, 255, 255, .7);--toastify-icon-color-info: var(--toastify-color-info);--toastify-icon-color-success: var(--toastify-color-success);--toastify-icon-color-warning: var(--toastify-color-warning);--toastify-icon-color-error: var(--toastify-color-error);--toastify-container-width: fit-content;--toastify-toast-width: 320px;--toastify-toast-offset: 16px;--toastify-toast-top: max(var(--toastify-toast-offset), env(safe-area-inset-top));--toastify-toast-right: max(var(--toastify-toast-offset), env(safe-area-inset-right));--toastify-toast-left: max(var(--toastify-toast-offset), env(safe-area-inset-left));--toastify-toast-bottom: max(var(--toastify-toast-offset), env(safe-area-inset-bottom));--toastify-toast-background: #fff;--toastify-toast-padding: 14px;--toastify-toast-min-height: 64px;--toastify-toast-max-height: 800px;--toastify-toast-bd-radius: 6px;--toastify-toast-shadow: 0px 4px 12px rgba(0, 0, 0, .1);--toastify-font-family: sans-serif;--toastify-z-index: 9999;--toastify-text-color-light: #757575;--toastify-text-color-dark: #fff;--toastify-text-color-info: #fff;--toastify-text-color-success: #fff;--toastify-text-color-warning: #fff;--toastify-text-color-error: #fff;--toastify-spinner-color: #616161;--toastify-spinner-color-empty-area: #e0e0e0;--toastify-color-progress-light: linear-gradient(to right, #4cd964, #5ac8fa, #007aff, #34aadc, #5856d6, #ff2d55);--toastify-color-progress-dark: #bb86fc;--toastify-color-progress-info: var(--toastify-color-info);--toastify-color-progress-success: var(--toastify-color-success);--toastify-color-progress-warning: var(--toastify-color-warning);--toastify-color-progress-error: var(--toastify-color-error);--toastify-color-progress-bgo: .2}.Toastify__toast-container{z-index:var(--toastify-z-index);-webkit-transform:translate3d(0,0,var(--toastify-z-index));position:fixed;width:var(--toastify-container-width);box-sizing:border-box;color:#fff;display:flex;flex-direction:column}.Toastify__toast-container--top-left{top:var(--toastify-toast-top);left:var(--toastify-toast-left)}.Toastify__toast-container--top-center{top:var(--toastify-toast-top);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--top-right{top:var(--toastify-toast-top);right:var(--toastify-toast-right);align-items:end}.Toastify__toast-container--bottom-left{bottom:var(--toastify-toast-bottom);left:var(--toastify-toast-left)}.Toastify__toast-container--bottom-center{bottom:var(--toastify-toast-bottom);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--bottom-right{bottom:var(--toastify-toast-bottom);right:var(--toastify-toast-right);align-items:end}.Toastify__toast{--y: 0;position:relative;touch-action:none;width:var(--toastify-toast-width);min-height:var(--toastify-toast-min-height);box-sizing:border-box;margin-bottom:1rem;padding:var(--toastify-toast-padding);border-radius:var(--toastify-toast-bd-radius);box-shadow:var(--toastify-toast-shadow);max-height:var(--toastify-toast-max-height);font-family:var(--toastify-font-family);z-index:0;display:flex;flex:1 auto;align-items:center;word-break:break-word}@media only screen and (max-width: 480px){.Toastify__toast-container{width:100vw;left:env(safe-area-inset-left);margin:0}.Toastify__toast-container--top-left,.Toastify__toast-container--top-center,.Toastify__toast-container--top-right{top:env(safe-area-inset-top);transform:translate(0)}.Toastify__toast-container--bottom-left,.Toastify__toast-container--bottom-center,.Toastify__toast-container--bottom-right{bottom:env(safe-area-inset-bottom);transform:translate(0)}.Toastify__toast-container--rtl{right:env(safe-area-inset-right);left:initial}.Toastify__toast{--toastify-toast-width: 100%;margin-bottom:0;border-radius:0}}.Toastify__toast-container[data-stacked=true]{width:var(--toastify-toast-width)}.Toastify__toast--stacked{position:absolute;width:100%;transform:translate3d(0,var(--y),0) scale(var(--s));transition:transform .3s}.Toastify__toast--stacked[data-collapsed] .Toastify__toast-body,.Toastify__toast--stacked[data-collapsed] .Toastify__close-button{transition:opacity .1s}.Toastify__toast--stacked[data-collapsed=false]{overflow:visible}.Toastify__toast--stacked[data-collapsed=true]:not(:last-child)>*{opacity:0}.Toastify__toast--stacked:after{content:"";position:absolute;left:0;right:0;height:calc(var(--g) * 1px);bottom:100%}.Toastify__toast--stacked[data-pos=top]{top:0}.Toastify__toast--stacked[data-pos=bot]{bottom:0}.Toastify__toast--stacked[data-pos=bot].Toastify__toast--stacked:before{transform-origin:top}.Toastify__toast--stacked[data-pos=top].Toastify__toast--stacked:before{transform-origin:bottom}.Toastify__toast--stacked:before{content:"";position:absolute;left:0;right:0;bottom:0;height:100%;transform:scaleY(3);z-index:-1}.Toastify__toast--rtl{direction:rtl}.Toastify__toast--close-on-click{cursor:pointer}.Toastify__toast-icon{margin-inline-end:10px;width:22px;flex-shrink:0;display:flex}.Toastify--animate{animation-fill-mode:both;animation-duration:.5s}.Toastify--animate-icon{animation-fill-mode:both;animation-duration:.3s}.Toastify__toast-theme--dark{background:var(--toastify-color-dark);color:var(--toastify-text-color-dark)}.Toastify__toast-theme--light,.Toastify__toast-theme--colored.Toastify__toast--default{background:var(--toastify-color-light);color:var(--toastify-text-color-light)}.Toastify__toast-theme--colored.Toastify__toast--info{color:var(--toastify-text-color-info);background:var(--toastify-color-info)}.Toastify__toast-theme--colored.Toastify__toast--success{color:var(--toastify-text-color-success);background:var(--toastify-color-success)}.Toastify__toast-theme--colored.Toastify__toast--warning{color:var(--toastify-text-color-warning);background:var(--toastify-color-warning)}.Toastify__toast-theme--colored.Toastify__toast--error{color:var(--toastify-text-color-error);background:var(--toastify-color-error)}.Toastify__progress-bar-theme--light{background:var(--toastify-color-progress-light)}.Toastify__progress-bar-theme--dark{background:var(--toastify-color-progress-dark)}.Toastify__progress-bar--info{background:var(--toastify-color-progress-info)}.Toastify__progress-bar--success{background:var(--toastify-color-progress-success)}.Toastify__progress-bar--warning{background:var(--toastify-color-progress-warning)}.Toastify__progress-bar--error{background:var(--toastify-color-progress-error)}.Toastify__progress-bar-theme--colored.Toastify__progress-bar--info,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--success,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--warning,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--error{background:var(--toastify-color-transparent)}.Toastify__close-button{color:#fff;position:absolute;top:6px;right:6px;background:transparent;outline:none;border:none;padding:0;cursor:pointer;opacity:.7;transition:.3s ease;z-index:1}.Toastify__toast--rtl .Toastify__close-button{left:6px;right:unset}.Toastify__close-button--light{color:#000;opacity:.3}.Toastify__close-button>svg{fill:currentColor;height:16px;width:14px}.Toastify__close-button:hover,.Toastify__close-button:focus{opacity:1}@keyframes Toastify__trackProgress{0%{transform:scaleX(1)}to{transform:scaleX(0)}}.Toastify__progress-bar{position:absolute;bottom:0;left:0;width:100%;height:100%;z-index:1;opacity:.7;transform-origin:left}.Toastify__progress-bar--animated{animation:Toastify__trackProgress linear 1 forwards}.Toastify__progress-bar--controlled{transition:transform .2s}.Toastify__progress-bar--rtl{right:0;left:initial;transform-origin:right;border-bottom-left-radius:initial}.Toastify__progress-bar--wrp{position:absolute;overflow:hidden;bottom:0;left:0;width:100%;height:5px;border-bottom-left-radius:var(--toastify-toast-bd-radius);border-bottom-right-radius:var(--toastify-toast-bd-radius)}.Toastify__progress-bar--wrp[data-hidden=true]{opacity:0}.Toastify__progress-bar--bg{opacity:var(--toastify-color-progress-bgo);width:100%;height:100%}.Toastify__spinner{width:20px;height:20px;box-sizing:border-box;border:2px solid;border-radius:100%;border-color:var(--toastify-spinner-color-empty-area);border-right-color:var(--toastify-spinner-color);animation:Toastify__spin .65s linear infinite}@keyframes Toastify__bounceInRight{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(3000px,0,0)}60%{opacity:1;transform:translate3d(-25px,0,0)}75%{transform:translate3d(10px,0,0)}90%{transform:translate3d(-5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutRight{20%{opacity:1;transform:translate3d(-20px,var(--y),0)}to{opacity:0;transform:translate3d(2000px,var(--y),0)}}@keyframes Toastify__bounceInLeft{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(-3000px,0,0)}60%{opacity:1;transform:translate3d(25px,0,0)}75%{transform:translate3d(-10px,0,0)}90%{transform:translate3d(5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutLeft{20%{opacity:1;transform:translate3d(20px,var(--y),0)}to{opacity:0;transform:translate3d(-2000px,var(--y),0)}}@keyframes Toastify__bounceInUp{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,3000px,0)}60%{opacity:1;transform:translate3d(0,-20px,0)}75%{transform:translate3d(0,10px,0)}90%{transform:translate3d(0,-5px,0)}to{transform:translateZ(0)}}@keyframes Toastify__bounceOutUp{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,-2000px,0)}}@keyframes Toastify__bounceInDown{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,-3000px,0)}60%{opacity:1;transform:translate3d(0,25px,0)}75%{transform:translate3d(0,-10px,0)}90%{transform:translate3d(0,5px,0)}to{transform:none}}@keyframes Toastify__bounceOutDown{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,2000px,0)}}.Toastify__bounce-enter--top-left,.Toastify__bounce-enter--bottom-left{animation-name:Toastify__bounceInLeft}.Toastify__bounce-enter--top-right,.Toastify__bounce-enter--bottom-right{animation-name:Toastify__bounceInRight}.Toastify__bounce-enter--top-center{animation-name:Toastify__bounceInDown}.Toastify__bounce-enter--bottom-center{animation-name:Toastify__bounceInUp}.Toastify__bounce-exit--top-left,.Toastify__bounce-exit--bottom-left{animation-name:Toastify__bounceOutLeft}.Toastify__bounce-exit--top-right,.Toastify__bounce-exit--bottom-right{animation-name:Toastify__bounceOutRight}.Toastify__bounce-exit--top-center{animation-name:Toastify__bounceOutUp}.Toastify__bounce-exit--bottom-center{animation-name:Toastify__bounceOutDown}@keyframes Toastify__zoomIn{0%{opacity:0;transform:scale3d(.3,.3,.3)}50%{opacity:1}}@keyframes Toastify__zoomOut{0%{opacity:1}50%{opacity:0;transform:translate3d(0,var(--y),0) scale3d(.3,.3,.3)}to{opacity:0}}.Toastify__zoom-enter{animation-name:Toastify__zoomIn}.Toastify__zoom-exit{animation-name:Toastify__zoomOut}@keyframes Toastify__flipIn{0%{transform:perspective(400px) rotateX(90deg);animation-timing-function:ease-in;opacity:0}40%{transform:perspective(400px) rotateX(-20deg);animation-timing-function:ease-in}60%{transform:perspective(400px) rotateX(10deg);opacity:1}80%{transform:perspective(400px) rotateX(-5deg)}to{transform:perspective(400px)}}@keyframes Toastify__flipOut{0%{transform:translate3d(0,var(--y),0) perspective(400px)}30%{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(-20deg);opacity:1}to{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(90deg);opacity:0}}.Toastify__flip-enter{animation-name:Toastify__flipIn}.Toastify__flip-exit{animation-name:Toastify__flipOut}@keyframes Toastify__slideInRight{0%{transform:translate3d(110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInLeft{0%{transform:translate3d(-110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInUp{0%{transform:translate3d(0,110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInDown{0%{transform:translate3d(0,-110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideOutRight{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(110%,var(--y),0)}}@keyframes Toastify__slideOutLeft{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(-110%,var(--y),0)}}@keyframes Toastify__slideOutDown{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,500px,0)}}@keyframes Toastify__slideOutUp{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,-500px,0)}}.Toastify__slide-enter--top-left,.Toastify__slide-enter--bottom-left{animation-name:Toastify__slideInLeft}.Toastify__slide-enter--top-right,.Toastify__slide-enter--bottom-right{animation-name:Toastify__slideInRight}.Toastify__slide-enter--top-center{animation-name:Toastify__slideInDown}.Toastify__slide-enter--bottom-center{animation-name:Toastify__slideInUp}.Toastify__slide-exit--top-left,.Toastify__slide-exit--bottom-left{animation-name:Toastify__slideOutLeft;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-right,.Toastify__slide-exit--bottom-right{animation-name:Toastify__slideOutRight;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-center{animation-name:Toastify__slideOutUp;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--bottom-center{animation-name:Toastify__slideOutDown;animation-timing-function:ease-in;animation-duration:.3s}@keyframes Toastify__spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}
`);var rd=t=>typeof t=="number"&&!isNaN(t),On=t=>typeof t=="string",i0=t=>typeof t=="function",Eb=t=>On(t)||rd(t),Tb=t=>v.isValidElement(t)||On(t)||i0(t)||rd(t),Ib=1,l0=()=>`${Ib++}`,It=new Map,Bo=[],Wu=new Set,o0=()=>It.size>0,Pb=(t,{containerId:e})=>{var s;return(s=It.get(e||1))==null?void 0:s.toasts.get(t)};function Ab(t,e){var s;if(e)return!!((s=It.get(e))!=null&&s.isToastActive(t));let n=!1;return It.forEach(a=>{a.isToastActive(t)&&(n=!0)}),n}function Lb(t){if(!o0()){Bo=Bo.filter(e=>t!=null&&e.options.toastId!==t);return}if(t==null||Eb(t))It.forEach(e=>{e.removeToast(t)});else if(t&&("containerId"in t||"id"in t)){let e=It.get(t.containerId);e?e.removeToast(t.id):It.forEach(s=>{s.removeToast(t.id)})}}var Db=(t={})=>{It.forEach(e=>{e.props.limit&&(!t.containerId||e.id===t.containerId)&&e.clearQueue()})};function Rb(t,e){Tb(t)&&(o0()||Bo.push({content:t,options:e}),It.forEach(s=>{s.buildToast(t,e)}))}function c0(t,e){It.forEach(s=>{(e==null||!(e!=null&&e.containerId)||(e==null?void 0:e.containerId)===s.id)&&s.toggle(t,e==null?void 0:e.id)})}function Ob(t){return Wu.add(t),()=>{Wu.delete(t)}}function Mb(t){return t&&(On(t.toastId)||rd(t.toastId))?t.toastId:l0()}function Gn(t,e){return Rb(t,e),e.toastId}function Oi(t,e){return{...e,type:e&&e.type||t,toastId:Mb(e)}}function Mi(t){return(e,s)=>Gn(e,Oi(t,s))}function te(t,e){return Gn(t,Oi("default",e))}te.loading=(t,e)=>Gn(t,Oi("default",{isLoading:!0,autoClose:!1,closeOnClick:!1,closeButton:!1,draggable:!1,...e}));function $b(t,{pending:e,error:s,success:n},a){let i;e&&(i=On(e)?te.loading(e,a):te.loading(e.render,{...a,...e}));let l={isLoading:null,autoClose:null,closeOnClick:null,closeButton:null,draggable:null},o=(d,u,m)=>{if(u==null){te.dismiss(i);return}let h={type:d,...l,...a,data:m},y=On(u)?{render:u}:u;return i?te.update(i,{...h,...y}):te(y.render,{...h,...y}),m},c=i0(t)?t():t;return c.then(d=>o("success",n,d)).catch(d=>o("error",s,d)),c}te.promise=$b;te.success=Mi("success");te.info=Mi("info");te.error=Mi("error");te.warning=Mi("warning");te.warn=te.warning;te.dark=(t,e)=>Gn(t,Oi("default",{theme:"dark",...e}));function zb(t){Lb(t)}te.dismiss=zb;te.clearWaitingQueue=Db;te.isActive=Ab;te.update=(t,e={})=>{let s=Pb(t,e);if(s){let{props:n,content:a}=s,i={delay:100,...n,...e,toastId:e.toastId||t,updateId:l0()};i.toastId!==t&&(i.staleId=t);let l=i.render||a;delete i.render,Gn(l,i)}};te.done=t=>{te.update(t,{progress:1})};te.onChange=Ob;te.play=t=>c0(!0,t);te.pause=t=>c0(!1,t);const Fb=({customerId:t,onClose:e})=>{const{customers:s,addCustomer:n,updateCustomer:a,addClientAccess:i}=de(),[l,o]=v.useState({name:"",email:"",phone:"",address:"",city:"",postalCode:"",notes:""}),[c,d]=v.useState({name:"",email:"",phone:""});v.useEffect(()=>{if(t){const g=s.find(b=>b.id===t);g&&o({name:g.name||"",email:g.email||"",phone:g.phone||"",address:g.address||"",city:g.city||"",postalCode:g.postalCode||"",notes:g.notes||""})}else o({name:"",email:"",phone:"",address:"",city:"",postalCode:"",notes:""})},[t,s]);const u=()=>{let g=!0;const b={name:"",email:"",phone:""};return l.name.trim()||(b.name="Le nom est requis",g=!1),l.email.trim()?/\S+@\S+\.\S+/.test(l.email)||(b.email="L'email est invalide",g=!1):(b.email="L'email est requis",g=!1),l.phone.trim()||(b.phone="Le numéro de téléphone est requis",g=!1),d(b),g},m=g=>{const{name:b,value:x}=g.target;o(p=>({...p,[b]:x})),c[b]&&d(p=>({...p,[b]:""}))},h=()=>{const g="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";let b="";for(let x=0;x<8;x++)b+=g.charAt(Math.floor(Math.random()*g.length));return b},y=g=>{if(g.preventDefault(),!!u()){if(t){const b=s.find(x=>x.id===t);b&&(a({...b,...l,id:b.id,createdAt:b.createdAt}),te.success("Client mis à jour avec succès"))}else{const b={...l,id:(s.length+1).toString(),createdAt:new Date};n(b);const x=h();i({customerId:b.id,accessCode:x,isActive:!0}),te.success(`Client créé avec succès. Code d'accès: ${x}`)}e()}};return r.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm",children:[r.jsxs("div",{className:"flex justify-between items-center mb-6",children:[r.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:t?"Modifier le client":"Ajouter un nouveau client"}),r.jsx("button",{onClick:e,className:"p-2 rounded-full hover:bg-gray-100",children:r.jsx(Us,{size:20,className:"text-gray-500"})})]}),r.jsxs("form",{onSubmit:y,children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nom*"}),r.jsx("input",{type:"text",name:"name",value:l.name,onChange:m,className:`w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 ${c.name?"border-red-500":"border-gray-300"}`}),c.name&&r.jsx("p",{className:"mt-1 text-sm text-red-600",children:c.name})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"E-mail*"}),r.jsx("input",{type:"email",name:"email",value:l.email,onChange:m,className:`w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 ${c.email?"border-red-500":"border-gray-300"}`}),c.email&&r.jsx("p",{className:"mt-1 text-sm text-red-600",children:c.email})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Téléphone*"}),r.jsx("input",{type:"text",name:"phone",value:l.phone,onChange:m,className:`w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 ${c.phone?"border-red-500":"border-gray-300"}`}),c.phone&&r.jsx("p",{className:"mt-1 text-sm text-red-600",children:c.phone})]}),r.jsxs("div",{className:"col-span-3",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Adresse"}),r.jsx("input",{type:"text",name:"address",value:l.address,onChange:m,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),r.jsxs("div",{className:"md:col-span-2",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Ville"}),r.jsx("input",{type:"text",name:"city",value:l.city,onChange:m,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Code postal"}),r.jsx("input",{type:"text",name:"postalCode",value:l.postalCode,onChange:m,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),r.jsxs("div",{className:"mb-6",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes"}),r.jsx("textarea",{name:"notes",value:l.notes,onChange:m,rows:3,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),r.jsxs("div",{className:"flex justify-end gap-4",children:[r.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50",children:"Annuler"}),r.jsx("button",{type:"submit",className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:t?"Mettre à jour":"Ajouter le client"})]})]})]})},Ub=({onSelectCustomer:t})=>{const{customers:e,deleteCustomer:s}=de(),[n,a]=v.useState(""),[i,l]=v.useState(!1),[o,c]=v.useState(null),d=e.filter(h=>h.name.toLowerCase().includes(n.toLowerCase())||h.email.toLowerCase().includes(n.toLowerCase())||h.phone.includes(n)),u=h=>{t==null||t(h)},m=h=>{c(h),l(!0)};return r.jsx("div",{className:"p-4 md:p-0",children:i?r.jsx(Fb,{customerId:o,onClose:()=>{l(!1),c(null)}}):r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"mb-6 flex flex-col md:flex-row justify-between gap-4",children:[r.jsxs("div",{className:"relative w-full md:w-64",children:[r.jsx("input",{type:"text",placeholder:"Rechercher des clients...",className:"pl-10 pr-4 py-2 w-full border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",value:n,onChange:h=>a(h.target.value)}),r.jsx(Ii,{className:"absolute left-3 top-2.5 text-gray-400",size:18})]}),r.jsxs("button",{className:"flex items-center justify-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors w-full md:w-auto",onClick:()=>l(!0),children:[r.jsx(Pf,{size:18}),r.jsx("span",{children:"Ajouter un client"})]})]}),r.jsx("div",{className:"space-y-4 md:space-y-0",children:d.length>0?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"md:hidden space-y-3",children:d.map(h=>r.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-sm border border-gray-100",onClick:()=>u(h.id),children:[r.jsxs("div",{className:"flex justify-between items-start mb-2",children:[r.jsx("h3",{className:"font-medium text-gray-900",children:h.name}),r.jsxs("div",{className:"flex space-x-2",children:[r.jsx("button",{onClick:y=>{y.stopPropagation(),m(h.id)},className:"text-blue-600 hover:text-blue-800 p-1",title:"Modifier",children:r.jsx(xs,{size:16})}),r.jsx("button",{onClick:async y=>{if(y.stopPropagation(),window.confirm(`Êtes-vous sûr de vouloir supprimer le client "${h.name}" ?`))try{await s(h.id)}catch(g){console.error("Erreur lors de la suppression du client:",g),alert("Une erreur est survenue lors de la suppression du client.")}},className:"text-red-600 hover:text-red-800 p-1",title:"Supprimer",children:r.jsx(Nu,{size:16})})]})]}),r.jsxs("div",{className:"space-y-1 text-sm text-gray-600",children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx(Qc,{size:14,className:"mr-2 text-gray-400"}),r.jsx("span",{children:h.email||"Aucun email"})]}),r.jsxs("div",{className:"flex items-center",children:[r.jsx(Gc,{size:14,className:"mr-2 text-gray-400"}),r.jsx("span",{children:h.phone||"Aucun téléphone"})]}),h.address&&r.jsxs("div",{className:"flex items-start",children:[r.jsx(Tf,{size:14,className:"mr-2 text-gray-400 mt-0.5 flex-shrink-0"}),r.jsx("span",{className:"truncate",children:h.address})]})]}),r.jsxs("div",{className:"mt-3 pt-2 text-xs text-gray-500 border-t border-gray-100",children:["Client depuis le ",new Date(h.createdAt).toLocaleDateString()]})]},h.id))}),r.jsx("div",{className:"hidden md:block bg-white shadow-sm rounded-xl overflow-hidden",children:r.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[r.jsx("thead",{className:"bg-gray-50",children:r.jsxs("tr",{children:[r.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Nom"}),r.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Contact"}),r.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Adresse"}),r.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Depuis"}),r.jsx("th",{scope:"col",className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),r.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:d.map(h=>r.jsxs("tr",{className:"hover:bg-gray-50 cursor-pointer",onClick:()=>u(h.id),children:[r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("div",{className:"font-medium text-gray-900",children:h.name})}),r.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[r.jsx("div",{className:"text-sm text-gray-900",children:h.email}),r.jsx("div",{className:"text-sm text-gray-500",children:h.phone})]}),r.jsx("td",{className:"px-6 py-4",children:r.jsx("div",{className:"text-sm text-gray-500",children:h.address})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(h.createdAt).toLocaleDateString()}),r.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:[r.jsx("button",{onClick:y=>{y.stopPropagation(),m(h.id)},className:"text-blue-600 hover:text-blue-900 mr-3",title:"Modifier",children:r.jsx(xs,{size:16})}),r.jsx("button",{onClick:async y=>{if(y.stopPropagation(),window.confirm(`Êtes-vous sûr de vouloir supprimer le client "${h.name}" ?`))try{await s(h.id)}catch(g){console.error("Erreur lors de la suppression du client:",g),alert("Une erreur est survenue lors de la suppression du client.")}},className:"text-red-600 hover:text-red-900",title:"Supprimer",children:r.jsx(Nu,{size:16})})]})]},h.id))})]})})]}):r.jsx("div",{className:"p-8 text-center text-gray-500 bg-white rounded-xl shadow-sm",children:"Aucun client trouvé"})})]})})},qb=({customerId:t,onBack:e})=>{const{customers:s,orders:n}=de(),a=s.find(u=>u.id===t);if(!a)return r.jsxs("div",{className:"text-center py-8",children:[r.jsx("p",{className:"text-red-600",children:"Client non trouvé"}),r.jsx("button",{className:"mt-4 px-4 py-2 text-blue-600 hover:text-blue-800",onClick:e,children:"Retour à la liste des clients"})]});const i=n.filter(u=>u.customerId===t),l=[...i].sort((u,m)=>m.createdAt.getTime()-u.createdAt.getTime()),o=i.reduce((u,m)=>u+m.totalAmount,0),c=i.length,d=i.filter(u=>u.status!=="livre"&&u.status!=="annule").length;return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx("button",{className:"mr-4 p-2 rounded-full hover:bg-gray-100",onClick:e,children:r.jsx(Sf,{size:20,className:"text-gray-500"})}),r.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Détails du client"})]}),r.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm",children:[r.jsxs("div",{className:"flex justify-between mb-6",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"text-2xl font-bold text-gray-800 mb-1",children:a.name}),r.jsxs("p",{className:"text-gray-500",children:["Client depuis le ",Se(a.createdAt)]})]}),r.jsxs("button",{className:"flex items-center gap-2 px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50",children:[r.jsx(xs,{size:16}),r.jsx("span",{children:"Modifier"})]})]}),r.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 mb-8 w-full",children:[r.jsxs("div",{className:"flex-1 min-w-0 bg-white p-4 rounded-lg border border-gray-100",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[r.jsx("div",{className:"p-2 bg-blue-100 rounded-lg text-blue-700 flex-shrink-0",children:r.jsx(Gc,{size:18})}),r.jsx("p",{className:"text-sm text-gray-500 font-medium",children:"Téléphone"})]}),r.jsx("p",{className:"text-gray-900 break-words pl-11",children:a.phone})]}),r.jsxs("div",{className:"flex-1 min-w-0 bg-white p-4 rounded-lg border border-gray-100",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[r.jsx("div",{className:"p-2 bg-green-100 rounded-lg text-green-700 flex-shrink-0",children:r.jsx(Qc,{size:18})}),r.jsx("p",{className:"text-sm text-gray-500 font-medium",children:"E-mail"})]}),r.jsx("p",{className:"text-gray-900 break-words pl-11 truncate",children:a.email})]}),r.jsxs("div",{className:"flex-1 min-w-0 bg-white p-4 rounded-lg border border-gray-100",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[r.jsx("div",{className:"p-2 bg-purple-100 rounded-lg text-purple-700 flex-shrink-0",children:r.jsx(Tf,{size:18})}),r.jsx("p",{className:"text-sm text-gray-500 font-medium",children:"Adresse"})]}),r.jsx("p",{className:"text-gray-900 break-words pl-11",children:a.address})]})]}),a.notes&&r.jsxs("div",{className:"mb-8",children:[r.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Notes"}),r.jsx("p",{className:"text-gray-800 bg-gray-50 p-3 rounded-lg",children:a.notes})]}),r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 w-full",children:[r.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg flex flex-col h-full w-full",children:[r.jsx("h4",{className:"text-sm font-medium text-blue-700 mb-2",children:"Dépense totale"}),r.jsxs("p",{className:"text-2xl font-bold text-blue-900 mt-auto",children:["$",o.toFixed(2)]})]}),r.jsxs("div",{className:"bg-green-50 p-4 rounded-lg flex flex-col h-full w-full",children:[r.jsx("h4",{className:"text-sm font-medium text-green-700 mb-2",children:"Total des commandes"}),r.jsx("p",{className:"text-2xl font-bold text-green-900 mt-auto",children:c})]}),r.jsxs("div",{className:"bg-amber-50 p-4 rounded-lg flex flex-col h-full w-full",children:[r.jsx("h4",{className:"text-sm font-medium text-amber-700 mb-2",children:"Commandes en attente"}),r.jsx("p",{className:"text-2xl font-bold text-amber-900 mt-auto",children:d})]})]})]}),r.jsxs("div",{className:"bg-white p-4 sm:p-6 rounded-xl shadow-sm",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4 sm:mb-6",children:"Historique des commandes"}),l.length>0?r.jsxs("div",{className:"overflow-hidden",children:[r.jsx("div",{className:"md:hidden space-y-4",children:l.map(u=>r.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[r.jsxs("div",{className:"flex justify-between items-start mb-2",children:[r.jsxs("div",{children:[r.jsxs("h4",{className:"font-medium text-gray-900",children:["Commande #",u.id]}),r.jsx("div",{className:"text-sm text-gray-500",children:Se(u.createdAt)})]}),r.jsxs("div",{className:"text-right",children:[r.jsxs("div",{className:"font-medium text-gray-900",children:["$",u.totalAmount.toFixed(2)]}),r.jsx("div",{className:"text-xs text-gray-500",children:u.paid?"Payé":"Non payé"})]})]}),r.jsxs("div",{className:"text-sm text-gray-700 mb-2",children:[r.jsx("div",{className:"font-medium mb-1",children:"Services :"}),r.jsx("div",{className:"line-clamp-2",children:u.services.map(m=>m.name).join(", ")})]}),r.jsxs("div",{className:"flex justify-between items-center mt-3 pt-2 border-t border-gray-100",children:[r.jsxs("div",{className:"text-xs text-gray-500 flex items-center",children:[r.jsx(Pt,{size:12,className:"mr-1"}),r.jsxs("span",{children:["Échéance: ",Se(u.dueDate)]})]}),r.jsx("div",{children:u.status==="livre"?r.jsx("span",{className:"px-2 py-1 text-xs rounded-full bg-green-100 text-green-800",children:"Livré"}):u.status==="annule"?r.jsx("span",{className:"px-2 py-1 text-xs rounded-full bg-red-100 text-red-800",children:"Annulé"}):r.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${u.status==="en_attente"?"bg-yellow-100 text-yellow-800":"bg-blue-100 text-blue-800"}`,children:u.status.charAt(0).toUpperCase()+u.status.slice(1)})})]})]},u.id))}),r.jsx("div",{className:"hidden md:block",children:r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[r.jsx("thead",{className:"bg-gray-50",children:r.jsxs("tr",{children:[r.jsx("th",{scope:"col",className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"N° commande"}),r.jsx("th",{scope:"col",className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),r.jsx("th",{scope:"col",className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Services"}),r.jsx("th",{scope:"col",className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Montant"}),r.jsx("th",{scope:"col",className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Statut"})]})}),r.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:l.map(u=>r.jsxs("tr",{className:"hover:bg-gray-50",children:[r.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:r.jsxs("div",{className:"font-medium text-sm text-gray-900",children:["#",u.id]})}),r.jsxs("td",{className:"px-4 py-4 whitespace-nowrap",children:[r.jsx("div",{className:"text-sm text-gray-900",children:Se(u.createdAt)}),r.jsxs("div",{className:"text-xs text-gray-500 flex items-center gap-1",children:[r.jsx(Pt,{size:12}),r.jsxs("span",{children:["Due: ",Se(u.dueDate)]})]})]}),r.jsx("td",{className:"px-4 py-4 max-w-xs",children:r.jsx("div",{className:"text-sm text-gray-900 line-clamp-2",children:u.services.map(m=>m.name).join(", ")})}),r.jsxs("td",{className:"px-4 py-4 whitespace-nowrap",children:[r.jsxs("div",{className:"text-sm font-medium text-gray-900",children:["$",u.totalAmount.toFixed(2)]}),r.jsx("div",{className:"text-xs text-gray-500",children:u.paid?"Payé":"Non payé"})]}),r.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:u.status==="livre"?r.jsx("span",{className:"px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800",children:"Livré"}):u.status==="annule"?r.jsx("span",{className:"px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full bg-red-100 text-red-800",children:"Annulé"}):r.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${u.status==="en_attente"?"bg-yellow-100 text-yellow-800":"bg-blue-100 text-blue-800"}`,children:u.status.charAt(0).toUpperCase()+u.status.slice(1)})})]},u.id))})]})})})]}):r.jsx("p",{className:"text-center py-6 text-gray-500",children:"No order history found"})]})]})},Bb=()=>{const[t,e]=v.useState(null);return r.jsx("div",{children:t?r.jsx(qb,{customerId:t,onBack:()=>e(null)}):r.jsx(Ub,{onSelectCustomer:e})})};function Wb({title:t,titleId:e,...s},n){return v.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},s),t?v.createElement("title",{id:e},t):null,v.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.5 19.5 3 12m0 0 7.5-7.5M3 12h18"}))}const Vb=v.forwardRef(Wb);function Hb({title:t,titleId:e,...s},n){return v.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},s),t?v.createElement("title",{id:e},t):null,v.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 13.125C3 12.504 3.504 12 4.125 12h2.25c.621 0 1.125.504 1.125 1.125v6.75C7.5 20.496 6.996 21 6.375 21h-2.25A1.125 1.125 0 0 1 3 19.875v-6.75ZM9.75 8.625c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125v11.25c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V8.625ZM16.5 4.125c0-.621.504-1.125 1.125-1.125h2.25C20.496 3 21 3.504 21 4.125v15.75c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V4.125Z"}))}const Kb=v.forwardRef(Hb);function Qb({title:t,titleId:e,...s},n){return v.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},s),t?v.createElement("title",{id:e},t):null,v.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const d0=v.forwardRef(Qb);function Gb({title:t,titleId:e,...s},n){return v.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},s),t?v.createElement("title",{id:e},t):null,v.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m4.5 12.75 6 6 9-13.5"}))}const Jb=v.forwardRef(Gb);function Yb({title:t,titleId:e,...s},n){return v.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},s),t?v.createElement("title",{id:e},t):null,v.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.5 12a7.5 7.5 0 0 0 15 0m-15 0a7.5 7.5 0 1 1 15 0m-15 0H3m16.5 0H21m-1.5 0H12m-8.457 3.077 1.41-.513m14.095-5.13 1.41-.513M5.106 17.785l1.15-.964m11.49-9.642 1.149-.964M7.501 19.795l.75-1.3m7.5-12.99.75-1.3m-6.063 16.658.26-1.477m2.605-14.772.26-1.477m0 17.726-.26-1.477M10.698 4.614l-.26-1.477M16.5 19.794l-.75-1.299M7.5 4.205 12 12m6.894 5.785-1.149-.964M6.256 7.178l-1.15-.964m15.352 8.864-1.41-.513M4.954 9.435l-1.41-.514M12.002 12l-3.75 6.495"}))}const Il=v.forwardRef(Yb);function Xb({title:t,titleId:e,...s},n){return v.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},s),t?v.createElement("title",{id:e},t):null,v.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m21 7.5-9-5.25L3 7.5m18 0-9 5.25m9-5.25v9l-9 5.25M3 7.5l9 5.25M3 7.5v9l9 5.25m0-9v9"}))}const Zb=v.forwardRef(Xb);function e1({title:t,titleId:e,...s},n){return v.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},s),t?v.createElement("title",{id:e},t):null,v.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m.75 12 3 3m0 0 3-3m-3 3v-6m-1.5-9H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"}))}const Vu=v.forwardRef(e1);function t1({title:t,titleId:e,...s},n){return v.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},s),t?v.createElement("title",{id:e},t):null,v.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126ZM12 15.75h.007v.008H12v-.008Z"}))}const Hu=v.forwardRef(t1);function s1({title:t,titleId:e,...s},n){return v.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},s),t?v.createElement("title",{id:e},t):null,v.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 18v-5.25m0 0a6.01 6.01 0 0 0 1.5-.189m-1.5.189a6.01 6.01 0 0 1-1.5-.189m3.75 7.478a12.06 12.06 0 0 1-4.5 0m3.75 2.383a14.406 14.406 0 0 1-3 0M14.25 18v-.192c0-.983.658-1.823 1.508-2.316a7.5 7.5 0 1 0-7.517 0c.85.493 1.509 1.333 1.509 2.316V18"}))}const r1=v.forwardRef(s1);function n1({title:t,titleId:e,...s},n){return v.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},s),t?v.createElement("title",{id:e},t):null,v.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.19 8.688a4.5 4.5 0 0 1 1.242 7.244l-4.5 4.5a4.5 4.5 0 0 1-6.364-6.364l1.757-1.757m13.35-.622 1.757-1.757a4.5 4.5 0 0 0-6.364-6.364l-4.5 4.5a4.5 4.5 0 0 0 1.242 7.244"}))}const Ku=v.forwardRef(n1);function a1({title:t,titleId:e,...s},n){return v.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},s),t?v.createElement("title",{id:e},t):null,v.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L6.832 19.82a4.5 4.5 0 0 1-1.897 1.13l-2.685.8.8-2.685a4.5 4.5 0 0 1 1.13-1.897L16.863 4.487Zm0 0L19.5 7.125"}))}const Qu=v.forwardRef(a1);function i1({title:t,titleId:e,...s},n){return v.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},s),t?v.createElement("title",{id:e},t):null,v.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.879 7.519c1.171-1.025 3.071-1.025 4.242 0 1.172 1.025 1.172 2.687 0 3.712-.203.179-.43.326-.67.442-.745.361-1.45.999-1.45 1.827v.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9 5.25h.008v.008H12v-.008Z"}))}const l1=v.forwardRef(i1);function o1({title:t,titleId:e,...s},n){return v.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},s),t?v.createElement("title",{id:e},t):null,v.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.813 15.904 9 18.75l-.813-2.846a4.5 4.5 0 0 0-3.09-3.09L2.25 12l2.846-.813a4.5 4.5 0 0 0 3.09-3.09L9 5.25l.813 2.846a4.5 4.5 0 0 0 3.09 3.09L15.75 12l-2.846.813a4.5 4.5 0 0 0-3.09 3.09ZM18.259 8.715 18 9.75l-.259-1.035a3.375 3.375 0 0 0-2.455-2.456L14.25 6l1.036-.259a3.375 3.375 0 0 0 2.455-2.456L18 2.25l.259 1.035a3.375 3.375 0 0 0 2.456 2.456L21.75 6l-1.035.259a3.375 3.375 0 0 0-2.456 2.456ZM16.894 20.567 16.5 21.75l-.394-1.183a2.25 2.25 0 0 0-1.423-1.423L13.5 18.75l1.183-.394a2.25 2.25 0 0 0 1.423-1.423l.394-1.183.394 1.183a2.25 2.25 0 0 0 1.423 1.423l1.183.394-1.183.394a2.25 2.25 0 0 0-1.423 1.423Z"}))}const c1=v.forwardRef(o1);function d1({title:t,titleId:e,...s},n){return v.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},s),t?v.createElement("title",{id:e},t):null,v.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"}))}const Wo=v.forwardRef(d1);function u1({title:t,titleId:e,...s},n){return v.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},s),t?v.createElement("title",{id:e},t):null,v.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18 18 6M6 6l12 12"}))}const u0=v.forwardRef(u1),h1=({services:t,inventoryItems:e,className:s=""})=>{const a={services:t.map(o=>"service"in o?{...o.service,quantity:o.quantity}:o),status:"en_traitement"},i=Qn(a);if(i.length===0)return r.jsx("div",{className:`bg-gray-50 rounded-lg p-4 text-center ${s}`,children:r.jsx("p",{className:"text-sm text-gray-500",children:"Aucun produit nécessaire pour ces services"})});const l=i.some(o=>{const c=e.find(d=>d.id===o.itemId);return!c||c.quantity<o.quantity});return r.jsxs("div",{className:`bg-white border rounded-lg p-4 ${s}`,children:[r.jsxs("div",{className:"flex items-center justify-between mb-3",children:[r.jsx("h4",{className:"font-medium text-gray-900",children:"📦 Produits nécessaires"}),l?r.jsxs("div",{className:"flex items-center text-red-600 text-sm",children:[r.jsx(Hu,{className:"h-4 w-4 mr-1"}),"Stock insuffisant"]}):r.jsxs("div",{className:"flex items-center text-green-600 text-sm",children:[r.jsx(d0,{className:"h-4 w-4 mr-1"}),"Stock OK"]})]}),r.jsx("div",{className:"space-y-2",children:i.map(o=>{const c=e.find(m=>m.id===o.itemId),d=(c==null?void 0:c.quantity)||0,u=d>=o.quantity;return r.jsxs("div",{className:`flex items-center justify-between p-3 rounded-md ${u?"bg-green-50 border border-green-200":"bg-red-50 border border-red-200"}`,children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("div",{className:`w-2 h-2 rounded-full ${u?"bg-green-500":"bg-red-500"}`}),r.jsxs("div",{children:[r.jsx("span",{className:"font-medium text-gray-900",children:(c==null?void 0:c.name)||`Produit inconnu (ID: ${o.itemId})`}),r.jsxs("div",{className:"text-sm text-gray-600",children:["Besoin: ",o.quantity.toFixed(2)," ",(c==null?void 0:c.unit)||"unités"]}),!c&&r.jsx("div",{className:"text-xs text-red-500",children:"⚠️ Produit non trouvé dans l'inventaire"})]})]}),r.jsxs("div",{className:"text-right",children:[r.jsxs("div",{className:`text-sm font-medium ${u?"text-green-700":"text-red-700"}`,children:[d.toFixed(2)," disponible"]}),!u&&r.jsxs("div",{className:"text-xs text-red-600",children:["Manque: ",(o.quantity-d).toFixed(2)," ",c==null?void 0:c.unit]})]})]},o.itemId)})}),l&&r.jsx("div",{className:"mt-3 p-3 bg-red-50 border border-red-200 rounded-md",children:r.jsxs("div",{className:"flex items-start space-x-2",children:[r.jsx(Hu,{className:"h-5 w-5 text-red-500 mt-0.5"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-red-800",children:"Attention : Stock insuffisant"}),r.jsx("p",{className:"text-xs text-red-700 mt-1",children:"Vous devez réapprovisionner certains produits avant de pouvoir traiter cette commande."})]})]})})]})},h0=(t,e)=>{const s=cb.find(i=>i.serviceId===t.id);if(!s)return{serviceId:t.id,maxQuantity:999,limitingFactor:{itemName:"Aucune contrainte",availableStock:999,requiredPerUnit:0}};let n=999,a={itemName:"Aucune contrainte",availableStock:999,requiredPerUnit:0};return s.inventoryRequirements.forEach(i=>{const l=e.find(o=>o.id===i.itemId);if(l){const o=Math.floor(l.quantity/i.quantityPerUnit);o<n&&(n=o,a={itemName:l.name,availableStock:l.quantity,requiredPerUnit:i.quantityPerUnit})}}),{serviceId:t.id,maxQuantity:Math.max(0,n),limitingFactor:a}},m1=(t,e)=>{const s={};let n=[...e];return t.forEach(({service:a,quantity:i})=>{const l={services:[{...a,quantity:i}],status:"en_traitement"};Qn(l).forEach(c=>{const d=n.findIndex(u=>u.id===c.itemId);d>=0&&(n[d]={...n[d],quantity:Math.max(0,n[d].quantity-c.quantity)})})}),t.forEach(({service:a})=>{s[a.id]=h0(a,n)}),s},Pl=(t,e,s,n=[])=>{const a=[...n,{service:t,quantity:e}],l=m1(a,s)[t.id],o=[];let c=!0;return e>l.maxQuantity&&(c=!1,l.maxQuantity===0?o.push(`Stock insuffisant pour ${t.name}. Article manquant: ${l.limitingFactor.itemName}`):o.push(`Quantité maximale pour ${t.name}: ${l.maxQuantity} (limité par ${l.limitingFactor.itemName})`)),{isValid:c,maxAllowed:l.maxQuantity,errors:o}},f1=({onClose:t})=>{const{customers:e,services:s,addOrder:n,inventoryItems:a,checkInventoryForOrder:i}=de(),[l,o]=v.useState({customerId:"",serviceItems:[],notes:"",dueDate:b(),paid:!1,paymentMethod:"cash"}),[c,d]=v.useState({customerId:"",services:"",inventory:""}),[u,m]=v.useState({}),[h,y]=v.useState({}),g=[{value:"cash",label:"Espèces"},{value:"card",label:"Carte bancaire"},{value:"transfer",label:"Virement"},{value:"check",label:"Chèque"}];function b(){const N=new Date;return N.setDate(N.getDate()+2),N.toISOString().split("T")[0]}const x=()=>l.serviceItems.reduce((N,k)=>N+k.service.price*k.quantity,0),p=N=>{const k=h0(N,a);if(k.maxQuantity===0){m({...u,[N.id]:`Stock insuffisant pour ${N.name}. Article manquant: ${k.limitingFactor.itemName}`});return}const S=l.serviceItems.findIndex(O=>O.service.id===N.id);if(S>=0){const O=l.serviceItems[S].quantity;w(N.id,O+1)}else{const O=[...l.serviceItems,{service:N,quantity:1}];o({...l,serviceItems:O});const L=Pl(N,1,a,l.serviceItems);L.isValid||m({...u,[N.id]:L.errors[0]})}c.services&&d({...c,services:"",inventory:""})},f=N=>{o({...l,serviceItems:l.serviceItems.filter(k=>k.service.id!==N)})},w=(N,k)=>{const S=s.find(C=>C.id===N);if(!S||k<1)return;const O=l.serviceItems.filter(C=>C.service.id!==N),L=Pl(S,k,a,O),E={...u};L.isValid?delete E[N]:(E[N]=L.errors[0],k=Math.min(k,L.maxAllowed));const W=l.serviceItems.map(C=>C.service.id===N?{...C,quantity:k}:C);m(E),o({...l,serviceItems:W})},j=()=>{let N=!0;const k={customerId:"",services:"",inventory:""};if(l.customerId||(k.customerId="Veuillez sélectionner un client",N=!1),l.serviceItems.length===0&&(k.services="Veuillez ajouter au moins un service",N=!1),l.serviceItems.length>0){const S={id:"temp",customerId:l.customerId,services:l.serviceItems.map(L=>({...L.service,quantity:L.quantity})),items:[],status:"en_traitement",totalAmount:x(),paid:l.paid,paymentMethod:l.paymentMethod,notes:l.notes,dueDate:new Date(l.dueDate),createdAt:new Date,updatedAt:new Date};i(S).available||(k.inventory="Stock insuffisant pour cette commande",N=!1)}return Object.keys(u).length>0&&(N=!1),d(k),N},_=N=>{if(N.preventDefault(),!j())return;const k=new Date(l.dueDate);n({customerId:l.customerId,services:l.serviceItems.map(S=>({...S.service,quantity:S.quantity})),status:"en_traitement",totalAmount:x(),paid:l.paid,paymentMethod:l.paymentMethod,notes:l.notes,dueDate:k}),t()};return r.jsxs("div",{className:"bg-white p-4 sm:p-6 rounded-xl shadow-sm max-h-[90vh] overflow-y-auto",children:[r.jsxs("div",{className:"flex justify-between items-center mb-4 sm:mb-6",children:[r.jsx("h2",{className:"text-lg sm:text-xl font-semibold text-gray-800",children:"Nouvelle commande"}),r.jsx("button",{onClick:t,className:"p-1 sm:p-2 rounded-full hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-gray-300","aria-label":"Fermer",children:r.jsx(Us,{size:20,className:"text-gray-500"})})]}),r.jsxs("form",{onSubmit:_,className:"space-y-4 sm:space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 sm:gap-6",children:[r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Client*"}),r.jsxs("select",{value:l.customerId,onChange:N=>{o({...l,customerId:N.target.value}),c.customerId&&d({...c,customerId:""})},className:`w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 ${c.customerId?"border-red-500":"border-gray-300"}`,children:[r.jsx("option",{value:"",children:"Sélectionner un client"}),e.map(N=>r.jsxs("option",{value:N.id,children:[N.name," (",N.phone,")"]},N.id))]}),c.customerId&&r.jsx("p",{className:"mt-1 text-sm text-red-600",children:c.customerId})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Date d'échéance"}),r.jsx("input",{type:"date",value:l.dueDate,onChange:N=>o({...l,dueDate:N.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Mode de paiement"}),r.jsx("select",{value:l.paymentMethod,onChange:N=>o({...l,paymentMethod:N.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:g.map(N=>r.jsx("option",{value:N.value,children:N.label},N.value))})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-2",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Services*"}),r.jsx("div",{className:"text-xs sm:text-sm text-gray-500 text-right",children:"Sélectionnez les services à ajouter"})]}),r.jsx("div",{className:"grid grid-cols-1 xs:grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-2 sm:gap-3",children:s.map(N=>r.jsxs("button",{type:"button",onClick:()=>p(N),className:"px-4 py-3 border border-gray-300 rounded-lg text-left hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[r.jsx("div",{className:"font-medium text-gray-900",children:N.name}),r.jsxs("div",{className:"text-sm text-gray-500 mt-1",children:["$",N.price.toFixed(2)," / ",N.description]})]},N.id))}),c.services&&r.jsx("p",{className:"mt-1 text-sm text-red-600 mb-2",children:c.services}),c.inventory&&r.jsx("div",{className:"mt-1 mb-2 p-3 bg-red-50 border border-red-200 rounded-md",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Ht,{size:16,className:"text-red-600"}),r.jsx("span",{className:"text-red-800 font-medium",children:c.inventory})]})}),l.serviceItems.length>0&&r.jsx("div",{className:"border border-gray-200 rounded-lg overflow-x-auto",children:r.jsxs("table",{className:"min-w-full divide-y divide-gray-200 text-sm",children:[r.jsx("thead",{className:"bg-gray-50",children:r.jsxs("tr",{children:[r.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Service"}),r.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Prix unitaire"}),r.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Quantité"}),r.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total"}),r.jsx("th",{scope:"col",className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),r.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:l.serviceItems.map(({service:N,quantity:k})=>r.jsxs("tr",{children:[r.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[r.jsx("div",{className:"font-medium text-gray-900",children:N.name}),r.jsx("div",{className:"text-sm text-gray-500",children:N.description})]}),r.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:["$",N.price.toFixed(2)]}),r.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("button",{type:"button",onClick:()=>w(N.id,k-1),className:"p-1 sm:p-1.5 rounded-full bg-gray-100 hover:bg-gray-200 disabled:opacity-50 disabled:cursor-not-allowed",disabled:k<=1,"aria-label":"Réduire la quantité",children:r.jsx(Sv,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4"})}),r.jsx("span",{className:"text-sm sm:text-base font-medium w-6 text-center",children:k}),r.jsx("button",{type:"button",onClick:()=>{const S=l.serviceItems.filter(L=>L.service.id!==N.id),O=Pl(N,k+1,a,S);w(N.id,O.isValid?k+1:k)},className:"p-1 sm:p-1.5 rounded-full bg-gray-100 hover:bg-gray-200 disabled:opacity-50 disabled:cursor-not-allowed",disabled:!!u[N.id],title:u[N.id]||"Augmenter la quantité","aria-label":"Augmenter la quantité",children:r.jsx(Cr,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4"})})]}),u[N.id]&&r.jsxs("div",{className:"flex items-center gap-1 text-xs text-red-600 mt-1",children:[r.jsx(Ht,{size:12}),r.jsx("span",{children:u[N.id]})]}),h[N.id]!==void 0&&r.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Max: ",h[N.id]]})]}),r.jsxs("td",{className:"px-6 py-4 whitespace-nowrap font-medium",children:["$",(N.price*k).toFixed(2)]}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right",children:r.jsx("button",{type:"button",onClick:()=>f(N.id),className:"text-red-600 hover:text-red-900","aria-label":"Supprimer le service",children:r.jsx(Us,{size:16})})})]},N.id))}),r.jsx("tfoot",{children:r.jsxs("tr",{className:"bg-gray-50",children:[r.jsx("td",{colSpan:3,className:"px-6 py-3 text-right font-medium",children:"Montant total :"}),r.jsxs("td",{colSpan:2,className:"px-6 py-3 font-bold text-lg",children:["$",x().toFixed(2)]})]})})]})}),l.serviceItems.length>0&&r.jsx("div",{className:"mt-4",children:r.jsx(h1,{services:l.serviceItems,inventoryItems:a})}),r.jsxs("div",{className:"mt-6",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes"}),r.jsx("textarea",{value:l.notes,onChange:N=>o({...l,notes:N.target.value}),rows:3,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Ajoutez des notes supplémentaires pour cette commande..."})]}),r.jsxs("div",{className:"flex flex-col sm:flex-row justify-end gap-3 mt-8 pt-4 border-t border-gray-200",children:[r.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Annuler"}),r.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50",disabled:l.serviceItems.length===0||Object.keys(u).length>0,children:"Créer la commande"})]})]})]})]})},p1=()=>{const{orders:t,customers:e,deleteOrder:s,deleteClientOrder:n,clientOrders:a,servicePacks:i}=de(),[l,o]=v.useState(""),[c,d]=v.useState("all"),[u,m]=v.useState(!1),[h,y]=v.useState(null),[g,b]=v.useState(!1),x=jt(),p=v.useMemo(()=>a.map(E=>({id:`client_${E.id}`,customerId:E.customerId,services:E.packs.map(W=>{const C=i.find(T=>T.id===W.packId);let B=(C==null?void 0:C.description)||"Pack de services";if(C&&C.services.length>0){const T=C.services.map(P=>`${P.serviceName} (x${P.quantity})`).join(", ");B+=` - Inclus: ${T}`}return{id:W.packId,name:W.packName,price:W.unitPrice,description:B,estimatedTime:(C==null?void 0:C.estimatedTime)||24,quantity:W.quantity}}),status:E.status,totalAmount:E.totalAmount,paid:!1,notes:E.notes||"Commande via portail client",createdAt:E.createdAt,updatedAt:E.updatedAt,dueDate:E.deliveryDate||new Date(Date.now()+3*24*60*60*1e3)})),[a,i]),f=v.useMemo(()=>[...t,...p].sort((E,W)=>new Date(W.createdAt).getTime()-new Date(E.createdAt).getTime()),[t,p]),w=(E,W)=>{E.stopPropagation(),y(W),b(!0)},j=()=>{if(h)try{if(h.startsWith("client_")){const E=h.replace("client_","");n(E),te.success("Commande client supprimée avec succès")}else s(h),te.success("Commande supprimée avec succès");b(!1),y(null)}catch(E){console.error("Erreur lors de la suppression de la commande:",E),te.error("Une erreur est survenue lors de la suppression de la commande")}},_=()=>{b(!1),y(null)},N=E=>{x(`/orders/${E}`)},k=E=>{const W={en_attente:"bg-yellow-100 text-yellow-800",en_traitement:"bg-blue-100 text-blue-800",lavage:"bg-indigo-100 text-indigo-800",sechage:"bg-purple-100 text-purple-800",pliage:"bg-pink-100 text-pink-800",pret:"bg-green-100 text-green-800",livre:"bg-teal-100 text-teal-800",annule:"bg-red-100 text-red-800"},C={en_attente:"En attente",en_traitement:"En traitement",lavage:"En lavage",sechage:"Séchage",pliage:"En pliage",pret:"Prêt à récupérer",livre:"Livré",annule:"Annulé"},B=W[E]||"bg-gray-100 text-gray-800",T=C[E]||E;return r.jsx("span",{className:`px-2.5 py-1 text-xs font-medium rounded-full ${B}`,children:T})},S=E=>{switch(E){case"cash":return r.jsx(Cf,{size:16,className:"text-green-600"});case"card":return r.jsx(as,{size:16,className:"text-blue-600"});case"transfer":return r.jsx(Ef,{size:16,className:"text-purple-600"});case"check":return r.jsx(hr,{size:16,className:"text-orange-600"});default:return r.jsx(as,{size:16,className:"text-gray-600"})}},O=E=>{switch(E){case"cash":return"Espèces";case"card":return"Carte";case"transfer":return"Virement";case"check":return"Chèque";default:return"Non défini"}},L=f.filter(E=>{const W=e.find(P=>P.id===E.customerId),C=(W==null?void 0:W.name)||"",B=l===""||E.id.toLowerCase().includes(l.toLowerCase())||C.toLowerCase().includes(l.toLowerCase()),T=c==="all"||E.status===c;return B&&T});return u?r.jsx(f1,{onClose:()=>m(!1)}):r.jsxs("div",{className:"bg-white rounded-lg shadow overflow-x-hidden",children:[r.jsxs("div",{className:"p-4 sm:px-6 sm:py-4 border-b border-gray-200",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-6",children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900 text-center sm:text-left w-full sm:w-auto",children:"Commandes"}),r.jsx("div",{className:"w-full sm:w-auto flex justify-center sm:block",children:r.jsxs("button",{onClick:()=>m(!0),className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-md flex items-center justify-center gap-2 transition-colors w-full sm:w-auto",children:[r.jsx(Cr,{size:16}),r.jsx("span",{children:"Nouvelle commande"})]})})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs("div",{className:"relative",children:[r.jsx(Ii,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),r.jsx("input",{type:"text",placeholder:"Rechercher une commande...",className:"pl-10 pr-4 py-2 border border-gray-300 rounded-md w-full focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",value:l,onChange:E=>o(E.target.value)})]}),r.jsxs("select",{className:"border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",value:c,onChange:E=>d(E.target.value),children:[r.jsx("option",{value:"all",children:"Tous les statuts"}),r.jsx("option",{value:"en_attente",children:"En attente"}),r.jsx("option",{value:"en_traitement",children:"En traitement"}),r.jsx("option",{value:"lavage",children:"En lavage"}),r.jsx("option",{value:"sechage",children:"Séchage"}),r.jsx("option",{value:"pliage",children:"En pliage"}),r.jsx("option",{value:"pret",children:"Prêt à récupérer"}),r.jsx("option",{value:"livre",children:"Livré"}),r.jsx("option",{value:"annule",children:"Annulé"})]}),r.jsxs("div",{className:"text-sm text-gray-600 flex items-center",children:[r.jsx("span",{className:"font-medium",children:L.length}),r.jsxs("span",{className:"ml-1",children:["commande",L.length>1?"s":""," trouvée",L.length>1?"s":""]})]})]})]}),L.length>0?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"md:hidden p-3",children:r.jsx("div",{className:"space-y-3",children:L.map(E=>{var T,P;const W=e.find(V=>V.id===E.customerId),C=(W==null?void 0:W.name)||"Client inconnu",B=(W==null?void 0:W.phone)||"";return r.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-4 cursor-pointer border border-gray-100 hover:border-blue-200 transition-colors",onClick:()=>N(E.id),children:[r.jsxs("div",{className:"flex justify-between items-center mb-3 pb-2 border-b border-gray-100",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs("span",{className:"text-base font-semibold text-gray-900",children:["#",E.id.substring(0,8)]}),E.id.startsWith("client_")&&r.jsx("span",{className:"bg-blue-100 text-blue-800 text-xs px-2 py-1 rounded-full font-medium",children:"Portail Client"})]}),r.jsx("span",{className:"text-xs text-gray-500",children:Se(E.createdAt)})]}),r.jsxs("div",{className:"mb-3",children:[r.jsx("div",{className:"text-base font-medium text-gray-900 truncate",children:C}),B&&r.jsx("div",{className:"text-sm text-blue-600 mt-1",children:B})]}),r.jsxs("div",{className:"flex justify-between items-center mb-3 text-sm",children:[r.jsx("span",{className:"font-semibold text-gray-900",children:Y(E.totalAmount)}),r.jsxs("span",{className:"text-gray-600 bg-gray-50 px-2 py-1 rounded",children:[((T=E.services)==null?void 0:T.length)||0," service",(((P=E.services)==null?void 0:P.length)||0)!==1?"s":""]})]}),r.jsxs("div",{className:"flex justify-between items-center pt-2 border-t border-gray-100",children:[r.jsx("div",{className:"flex-shrink-0",children:k(E.status)}),r.jsxs("div",{className:"flex items-center gap-1.5",children:[S(E.paymentMethod||"cash"),r.jsx("span",{className:"text-xs font-medium text-gray-700",children:O(E.paymentMethod||"cash")})]})]})]},E.id)})})}),r.jsx("div",{className:"hidden md:block overflow-x-auto",children:r.jsx("div",{className:"inline-block min-w-full align-middle",children:r.jsx("div",{className:"overflow-hidden shadow-sm border border-gray-200 rounded-lg",children:r.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[r.jsx("thead",{className:"bg-gray-50",children:r.jsxs("tr",{children:[r.jsx("th",{scope:"col",className:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"N° Commande"}),r.jsx("th",{scope:"col",className:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Client"}),r.jsx("th",{scope:"col",className:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date & Heure"}),r.jsx("th",{scope:"col",className:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Montant"}),r.jsx("th",{scope:"col",className:"px-6 py-4 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Statut"}),r.jsx("th",{scope:"col",className:"px-6 py-4 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Paiement"}),r.jsx("th",{scope:"col",className:"px-6 py-4 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),r.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:L.map(E=>{var T,P;const W=e.find(V=>V.id===E.customerId),C=(W==null?void 0:W.name)||"Client inconnu",B=(W==null?void 0:W.phone)||"";return r.jsxs("tr",{className:"hover:bg-gray-50 cursor-pointer",onClick:()=>N(E.id),children:[r.jsx("td",{className:"px-4 sm:px-6 py-4 whitespace-nowrap",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:["#",E.id.substring(0,8)]}),E.id.startsWith("client_")&&r.jsx("span",{className:"bg-green-100 text-green-800 text-xs px-2 py-1 rounded-full font-medium",children:"Portail"})]})}),r.jsxs("td",{className:"px-4 sm:px-6 py-4 whitespace-nowrap",children:[r.jsx("div",{className:"text-sm font-medium text-gray-900",children:C}),B&&r.jsx("div",{className:"text-sm text-gray-500",children:B})]}),r.jsxs("td",{className:"px-4 sm:px-6 py-4 whitespace-nowrap",children:[r.jsx("div",{className:"text-sm text-gray-900",children:Se(E.createdAt)}),r.jsx("div",{className:"text-sm text-gray-500",children:new Date(E.createdAt).toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"})})]}),r.jsxs("td",{className:"px-4 sm:px-6 py-4 whitespace-nowrap",children:[r.jsx("div",{className:"text-sm font-medium text-gray-900",children:Y(E.totalAmount)}),r.jsxs("div",{className:"text-sm text-gray-500",children:[((T=E.services)==null?void 0:T.length)||0," service",(((P=E.services)==null?void 0:P.length)||0)>1?"s":""]})]}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:k(E.status)}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:r.jsxs("div",{className:"flex items-center justify-center gap-2",children:[S(E.paymentMethod||"cash"),r.jsx("span",{className:"text-sm text-gray-900",children:O(E.paymentMethod||"cash")})]})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:r.jsxs("div",{className:"flex justify-end gap-2",children:[r.jsx("button",{onClick:V=>{V.stopPropagation(),N(E.id)},className:"text-blue-600 hover:text-blue-900 p-1 rounded hover:bg-blue-50",title:"Voir les détails",children:r.jsx(Dn,{size:18})}),r.jsx("button",{onClick:V=>w(V,E.id),className:"text-red-600 hover:text-red-900 p-1 rounded hover:bg-red-50",title:"Supprimer la commande",children:r.jsx(gs,{size:18})})]})})]},E.id)})})]})})})})]}):r.jsx("div",{className:"p-6 md:p-12 text-center",children:r.jsxs("div",{className:"text-gray-500",children:[r.jsx("p",{className:"text-lg font-medium mb-2",children:"Aucune commande trouvée"}),r.jsx("p",{className:"text-sm mb-4",children:"Aucune commande ne correspond à vos critères de recherche."}),(l||c!=="all")&&r.jsx("button",{onClick:()=>{o(""),d("all")},className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Réinitialiser les filtres"})]})}),g&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:r.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:[r.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Supprimer la commande"}),r.jsxs("p",{className:"text-gray-600 mb-6",children:["Êtes-vous sûr de vouloir supprimer cette commande ?",(h==null?void 0:h.startsWith("client_"))&&r.jsx("span",{className:"block mt-2 text-blue-600",children:"Le client sera notifié de la suppression de sa commande."}),r.jsx("span",{className:"block mt-2 font-medium text-red-600",children:"Cette action est irréversible."})]}),r.jsxs("div",{className:"flex justify-end gap-3",children:[r.jsx("button",{onClick:_,className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50",children:"Annuler"}),r.jsx("button",{onClick:j,className:"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700",children:"Supprimer"})]})]})})]})},x1=({orderId:t,onBack:e})=>{const{orders:s,clientOrders:n,customers:a,servicePacks:i,updateOrderStatus:l,updateClientOrderStatus:o,addInvoice:c}=de(),d=jt(),[u,m]=v.useState(!0),[h,y]=v.useState(null),[g,b]=v.useState([]),[x,p]=v.useState(!1),[f,w]=v.useState("en_attente"),[j,_]=v.useState(!1),[N,k]=v.useState("draft"),S=P=>{w(P)},O=()=>{if(!t)return;t.startsWith("client_")?o(t.replace("client_",""),f):l(t,f),p(!1),y(V=>V?{...V,status:f,updatedAt:new Date}:null)},L=P=>{switch(P){case"en_attente":return"bg-yellow-100 text-yellow-800";case"en_traitement":return"bg-purple-100 text-purple-800";case"lavage":return"bg-cyan-100 text-cyan-800";case"sechage":return"bg-teal-100 text-teal-800";case"pliage":return"bg-emerald-100 text-emerald-800";case"pret":return"bg-green-100 text-green-800";case"livre":return"bg-blue-100 text-blue-800";case"annule":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},E=["en_attente","en_traitement","lavage","sechage","pliage","pret","livre","annule"],W=P=>{switch(P){case"cash":return r.jsx(Cf,{size:18,className:"text-green-600"});case"card":return r.jsx(as,{size:18,className:"text-blue-600"});case"transfer":return r.jsx(Ef,{size:18,className:"text-purple-600"});case"check":return r.jsx(hr,{size:18,className:"text-orange-600"});default:return r.jsx(as,{size:18,className:"text-gray-600"})}},C=P=>{switch(P){case"cash":return"Espèces";case"card":return"Carte bancaire";case"transfer":return"Virement";case"check":return"Chèque";default:return"Non défini"}},B=h?a.find(P=>P.id===h.customerId):null,T=h?h.status==="livre"||h.status==="annule":!1;return v.useEffect(()=>{let P=!0;return(async()=>{if(t){m(!0);try{const I=t.startsWith("client_");console.log("Recherche de la commande avec ID:",t,"isClientOrder:",I);let D;if(I){const F=n.find(ee=>`client_${ee.id}`===t);if(F){const ee=F.packs.flatMap(se=>{const Ye=i.find(Qt=>Qt.id===se.packId);let it=`Pack de ${se.quantity} x ${se.packName}`;if(Ye&&Ye.services.length>0){const Qt=Ye.services.map(lt=>`${lt.serviceName} (x${lt.quantity})`).join(", ");it+=` - Inclus: ${Qt}`}return{id:se.packId,name:se.packName,description:it,price:se.unitPrice,quantity:se.quantity,estimatedTime:(Ye==null?void 0:Ye.estimatedTime)||24}});D={id:`client_${F.id}`,customerId:F.customerId,status:F.status,totalAmount:F.totalAmount,paymentMethod:"card",paid:!1,notes:F.notes||"Commande passée via le portail client",services:ee,createdAt:new Date(F.createdAt),updatedAt:new Date(F.updatedAt),dueDate:F.deliveryDate||new Date(Date.now()+7*24*60*60*1e3)}}}else D=s.find(F=>F.id===t);if(console.log("Commande trouvée:",D),D&&P){console.log("Définition de la commande et de ses services"),y(D),w(D.status);const F=Array.isArray(D.services)?D.services:[];console.log("Services de la commande:",F),b(F)}else P&&(console.error(`Commande avec l'ID ${t} non trouvée`),console.warn(`Commande avec l'ID ${t} non trouvée`))}catch(I){console.error("Erreur lors du chargement de la commande:",I)}finally{P&&m(!1)}}})(),()=>{P=!1}},[t,s,n]),u?r.jsx("div",{className:"flex justify-center items-center h-64",children:r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})}):h?r.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[r.jsxs("div",{className:"flex items-center px-4 sm:px-0",children:[r.jsx("button",{className:"mr-3 p-2 rounded-full hover:bg-gray-100 active:bg-gray-200 transition-colors",onClick:e,children:r.jsx(Sf,{size:20,className:"text-gray-500"})}),r.jsx("h2",{className:"text-lg sm:text-xl font-semibold text-gray-800",children:"Détails de la commande"})]}),r.jsxs("div",{className:"bg-white p-4 sm:p-6 rounded-xl shadow-sm",children:[r.jsx("div",{className:"mb-4 sm:mb-6",children:r.jsxs("div",{className:"flex flex-col gap-3",children:[r.jsxs("div",{className:"flex items-start justify-between gap-2",children:[r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("h3",{className:"text-base sm:text-2xl font-bold text-gray-800 break-words",children:"Commande"}),r.jsxs("p",{className:"text-xs sm:text-sm font-mono text-gray-600 break-all mt-1",children:["#",h.id]})]}),r.jsx("span",{className:`px-3 py-1.5 text-xs font-semibold rounded-full whitespace-nowrap flex-shrink-0 ${L(h.status)}`,children:h.status.charAt(0).toUpperCase()+h.status.slice(1)})]}),r.jsxs("p",{className:"text-xs sm:text-sm text-gray-500 flex items-center gap-1",children:[r.jsx(Pt,{size:14,className:"flex-shrink-0"}),"Créée le ",Se(h.createdAt)]}),r.jsxs("button",{onClick:()=>_(!0),className:"w-full sm:w-auto flex items-center justify-center gap-2 px-4 py-2.5 bg-gradient-to-r from-indigo-600 to-indigo-700 text-white rounded-lg hover:from-indigo-700 hover:to-indigo-800 transition-all shadow-md hover:shadow-lg font-medium text-sm",children:[r.jsx(hr,{size:16}),r.jsx("span",{children:"Créer une facture"})]})]})}),r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 sm:gap-4 mb-6 sm:mb-8",children:[r.jsxs("div",{className:"flex items-start gap-3 p-3 sm:p-4 bg-gradient-to-br from-blue-50 to-blue-100 border border-blue-200 rounded-xl shadow-sm w-full",children:[r.jsx("div",{className:"p-2 bg-blue-500 rounded-lg text-white flex-shrink-0",children:r.jsx(To,{size:18,className:"w-4 h-4"})}),r.jsxs("div",{className:"min-w-0 flex-1",children:[r.jsx("p",{className:"text-xs font-bold text-blue-700 uppercase tracking-wider mb-1",children:"Client"}),r.jsx("p",{className:"text-sm font-semibold text-gray-900 break-words",children:B==null?void 0:B.name}),r.jsx("p",{className:"text-xs text-gray-600 mt-1",children:B==null?void 0:B.phone})]})]}),r.jsxs("div",{className:"flex items-start gap-3 p-3 sm:p-4 bg-gradient-to-br from-amber-50 to-amber-100 border border-amber-200 rounded-xl shadow-sm w-full",children:[r.jsx("div",{className:"p-2 bg-amber-500 rounded-lg text-white flex-shrink-0",children:r.jsx(Pt,{size:18,className:"w-4 h-4"})}),r.jsxs("div",{className:"min-w-0 flex-1",children:[r.jsx("p",{className:"text-xs font-bold text-amber-700 uppercase tracking-wider mb-1",children:"Échéance"}),r.jsx("p",{className:"text-sm font-semibold text-gray-900",children:Se(h.dueDate)}),new Date>h.dueDate&&h.status!=="livre"&&h.status!=="annule"&&r.jsx("p",{className:"text-xs text-red-600 font-bold mt-1 flex items-center gap-1",children:"⚠️ En retard"})]})]}),r.jsxs("div",{className:"flex items-start gap-3 p-3 sm:p-4 bg-gradient-to-br from-green-50 to-green-100 border border-green-200 rounded-xl shadow-sm w-full",children:[r.jsx("div",{className:"p-2 bg-green-500 rounded-lg text-white flex-shrink-0",children:W(h.paymentMethod||"cash")}),r.jsxs("div",{className:"min-w-0 flex-1",children:[r.jsx("p",{className:"text-xs font-bold text-green-700 uppercase tracking-wider mb-1",children:"Paiement"}),r.jsx("p",{className:"text-sm font-semibold text-gray-900 mb-1",children:C(h.paymentMethod||"cash")}),h.paid&&r.jsx("p",{className:"text-xs font-bold text-green-600",children:"✅ Payé"})]})]})]}),!T&&r.jsxs("div",{className:"mb-6 sm:mb-8 bg-gradient-to-br from-gray-50 to-gray-100 p-4 rounded-xl border border-gray-200",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-3 mb-4",children:[r.jsxs("h4",{className:"text-base sm:text-lg font-semibold text-gray-900 flex items-center gap-2",children:[r.jsx(Hc,{size:18,className:"text-blue-600"}),"Statut de la commande"]}),x?r.jsx("button",{onClick:O,className:"w-full sm:w-auto flex items-center justify-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors font-medium text-sm shadow-md hover:shadow-lg",children:"✓ Enregistrer"}):r.jsxs("button",{onClick:()=>p(!0),className:"w-full sm:w-auto flex items-center justify-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-medium text-sm shadow-md hover:shadow-lg",children:[r.jsx(xs,{size:14}),"Modifier le statut"]})]}),x?r.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-2 sm:gap-3",children:E.map(P=>r.jsx("button",{className:`px-3 py-2.5 rounded-xl text-xs sm:text-sm font-semibold transition-all ${f===P?`${L(P)} shadow-lg transform scale-105`:"bg-white text-gray-700 hover:bg-gray-100 border border-gray-200 shadow-sm"}`,onClick:()=>S(P),children:P.charAt(0).toUpperCase()+P.slice(1).replace("_"," ")},P))}):r.jsxs("div",{className:"relative",children:[r.jsx("div",{className:"overflow-hidden h-3 sm:h-4 mb-4 text-xs flex rounded-full bg-gray-300 shadow-inner",children:E.slice(0,7).map((P,V)=>{const I=E.indexOf(h.status),D=V<=I&&I<7;return r.jsx("div",{className:`flex flex-col justify-center transition-all duration-500 ${D?"bg-gradient-to-r from-blue-500 to-blue-600":"bg-gray-300"}`,style:{width:`${100/7}%`}},P)})}),r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs("div",{className:"flex items-center gap-1.5 text-xs sm:text-sm text-gray-600 font-medium",children:[r.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-500"}),"Début"]}),r.jsxs("div",{className:"flex items-center gap-1.5 text-xs sm:text-sm text-gray-600 font-medium",children:["Prêt à récupérer",r.jsx("div",{className:"w-2 h-2 rounded-full bg-gray-300"})]})]}),r.jsxs("div",{className:"mt-4 p-3 bg-white rounded-lg border border-gray-200 shadow-sm",children:[r.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Statut actuel :"}),r.jsx("span",{className:`inline-block px-3 py-1.5 rounded-full text-sm font-semibold ${L(h.status)}`,children:h.status.charAt(0).toUpperCase()+h.status.slice(1).replace("_"," ")})]})]})]}),r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[r.jsx(hr,{className:"h-5 w-5 text-blue-600"}),r.jsx("h4",{className:"text-lg font-semibold text-gray-900",children:"Détails de la commande"})]}),r.jsx("div",{className:"hidden sm:block overflow-hidden shadow-md ring-1 ring-gray-200 rounded-xl",children:r.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[r.jsx("thead",{className:"bg-gradient-to-r from-blue-50 to-indigo-50",children:r.jsxs("tr",{children:[r.jsx("th",{scope:"col",className:"py-4 pl-6 pr-3 text-left text-xs font-bold text-gray-700 uppercase tracking-wider",children:"Service"}),r.jsx("th",{scope:"col",className:"px-3 py-4 text-left text-xs font-bold text-gray-700 uppercase tracking-wider",children:"Description"}),r.jsx("th",{scope:"col",className:"px-3 py-4 text-right text-xs font-bold text-gray-700 uppercase tracking-wider",children:"Qté"}),r.jsx("th",{scope:"col",className:"px-6 py-4 text-right text-xs font-bold text-gray-700 uppercase tracking-wider",children:"Prix unit."}),r.jsx("th",{scope:"col",className:"px-6 py-4 text-right text-xs font-bold text-gray-700 uppercase tracking-wider",children:"Total"})]})}),r.jsx("tbody",{className:"divide-y divide-gray-100 bg-white",children:g.map((P,V)=>{const I=P.quantity||1,D=P.price*I;return r.jsxs("tr",{className:"hover:bg-blue-50 transition-colors",children:[r.jsx("td",{className:"py-4 pl-6 pr-3 text-sm",children:r.jsx("div",{className:"font-semibold text-gray-900",children:P.name})}),r.jsx("td",{className:"px-3 py-4 text-sm text-gray-600 max-w-xs",children:r.jsx("div",{className:"line-clamp-2",children:P.description})}),r.jsx("td",{className:"px-3 py-4 text-sm text-gray-900 text-right font-medium",children:r.jsx("span",{className:"inline-flex items-center px-2.5 py-1 rounded-full bg-blue-100 text-blue-800 font-semibold",children:I})}),r.jsx("td",{className:"px-6 py-4 text-sm text-gray-900 text-right font-medium",children:Y(P.price)}),r.jsx("td",{className:"px-6 py-4 text-right text-sm font-bold text-gray-900",children:Y(D)})]},V)})}),r.jsx("tfoot",{className:"bg-gradient-to-r from-gray-50 to-gray-100",children:r.jsxs("tr",{children:[r.jsx("td",{colSpan:4,className:"py-4 pl-6 pr-3 text-right text-sm font-bold text-gray-900 uppercase",children:"Montant total :"}),r.jsx("td",{className:"px-6 py-4 text-right",children:r.jsx("span",{className:"text-2xl font-bold text-blue-600",children:Y(h.totalAmount)})})]})})]})}),r.jsxs("div",{className:"sm:hidden space-y-3",children:[g.map((P,V)=>{const I=P.quantity||1,D=P.price*I;return r.jsxs("div",{className:"bg-gradient-to-br from-white to-blue-50 rounded-xl shadow-md border border-blue-100 p-4",children:[r.jsxs("div",{className:"flex items-start justify-between gap-2 mb-3",children:[r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("h5",{className:"font-bold text-gray-900 text-sm mb-2",children:P.name}),r.jsx("p",{className:"text-xs text-gray-600 leading-relaxed break-words",children:P.description})]}),r.jsxs("span",{className:"flex-shrink-0 inline-flex items-center px-2.5 py-1 rounded-full bg-blue-100 text-blue-800 text-xs font-bold",children:["x",I]})]}),r.jsxs("div",{className:"flex items-center justify-between pt-3 border-t border-blue-200",children:[r.jsxs("div",{className:"text-xs text-gray-600",children:[r.jsx("span",{className:"font-medium",children:Y(P.price)})," / unité"]}),r.jsxs("div",{className:"text-right",children:[r.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"Total"}),r.jsx("div",{className:"text-lg font-bold text-blue-600",children:Y(D)})]})]})]},V)}),r.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-indigo-600 rounded-xl shadow-lg p-4",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-white font-bold uppercase text-sm",children:"Montant Total"}),r.jsx("span",{className:"text-2xl font-bold text-white",children:Y(h.totalAmount)})]})})]}),h.notes&&r.jsx("div",{className:"mt-6 bg-gradient-to-br from-amber-50 to-orange-50 border-l-4 border-amber-400 rounded-lg p-4 shadow-sm",children:r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx(hr,{className:"h-5 w-5 text-amber-600 flex-shrink-0 mt-0.5"}),r.jsxs("div",{children:[r.jsx("h4",{className:"text-sm font-bold text-amber-900 mb-2",children:"📝 Notes de la commande"}),r.jsx("p",{className:"text-sm text-gray-700 leading-relaxed",children:h.notes})]})]})})]})]}),j&&h&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:r.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full",children:[r.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Créer une facture"}),r.jsxs("div",{className:"mb-4",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Statut de la facture"}),r.jsxs("select",{value:N,onChange:P=>k(P.target.value),className:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm rounded-md",children:[r.jsx("option",{value:"draft",children:"Brouillon"}),r.jsx("option",{value:"sent",children:"Envoyée"}),r.jsx("option",{value:"paid",children:"Payée"}),r.jsx("option",{value:"overdue",children:"En retard"}),r.jsx("option",{value:"cancelled",children:"Annulée"})]})]}),r.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[r.jsx("button",{onClick:()=>_(!1),className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50",children:"Annuler"}),r.jsx("button",{onClick:()=>{const P=g.reduce((V,I)=>{const D=I.quantity||1;return V+I.price*D},0);c({orderId:h.id,customerId:h.customerId,issueDate:new Date,dueDate:new Date(Date.now()+30*24*60*60*1e3),items:g.map(V=>{const I=V.quantity||1;return{id:`item_${Date.now()}_${V.id}`,description:V.name,quantity:I,unitPrice:V.price,total:V.price*I}}),subtotal:P,tax:P*.2,discount:0,total:P*1.2,notes:"",status:N,invoiceNumber:`INV-${Date.now().toString().slice(-6)}`}),d("/invoices")},className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Créer la facture"})]})]})})]}):r.jsxs("div",{className:"text-center p-8",children:[r.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Commande non trouvée"}),r.jsx("p",{className:"mt-2 text-gray-500",children:"La commande demandée n'existe pas ou a été supprimée."}),r.jsx("button",{className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",onClick:e,children:"Retour à la liste des commandes"})]})},Gu=()=>{const{orderId:t}=wg(),e=jt(),s=v.useCallback(()=>{e("/orders",{replace:!0})},[e]);return v.useCallback(()=>t?r.jsx("div",{className:"p-4 md:p-6",children:r.jsx(x1,{orderId:t,onBack:s})}):r.jsx("div",{className:"p-4 md:p-6",children:r.jsx(p1,{})}),[t,s])()},g1=({itemId:t,onClose:e})=>{const{inventoryItems:s,addInventoryItem:n,updateInventoryItem:a}=de(),[i,l]=v.useState({name:"",quantity:0,unit:"",reorderLevel:0}),[o,c]=v.useState({name:"",quantity:"",unit:"",reorderLevel:""});v.useEffect(()=>{if(t){const h=s.find(y=>y.id===t);h&&l({name:h.name,quantity:h.quantity,unit:h.unit,reorderLevel:h.reorderLevel})}},[t,s]);const d=()=>{let h=!0;const y={name:"",quantity:"",unit:"",reorderLevel:""};return i.name.trim()||(y.name="Le nom est requis",h=!1),i.quantity<0&&(y.quantity="La quantité ne peut pas être négative",h=!1),i.unit.trim()||(y.unit="L'unité est requise",h=!1),i.reorderLevel<0&&(y.reorderLevel="Le niveau de réapprovisionnement ne peut pas être négatif",h=!1),c(y),h},u=h=>{const{name:y,value:g}=h.target;l(y==="quantity"||y==="reorderLevel"?b=>({...b,[y]:parseInt(g)||0}):b=>({...b,[y]:g})),o[y]&&c(b=>({...b,[y]:""}))},m=h=>{if(h.preventDefault(),!!d()){if(t){const y=s.find(g=>g.id===t);y&&a({...y,...i})}else n(i);e()}};return r.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm",children:[r.jsxs("div",{className:"flex justify-between items-center mb-6",children:[r.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:t?"Modifier l'article":"Ajouter un nouvel article"}),r.jsx("button",{onClick:e,className:"p-2 rounded-full hover:bg-gray-100",children:r.jsx(Us,{size:20,className:"text-gray-500"})})]}),r.jsxs("form",{onSubmit:m,children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nom*"}),r.jsx("input",{type:"text",name:"name",value:i.name,onChange:u,className:`w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 ${o.name?"border-red-500":"border-gray-300"}`}),o.name&&r.jsx("p",{className:"mt-1 text-sm text-red-600",children:o.name})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Unité*"}),r.jsx("input",{type:"text",name:"unit",value:i.unit,onChange:u,placeholder:"ex: bouteilles, litres, pièces",className:`w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 ${o.unit?"border-red-500":"border-gray-300"}`}),o.unit&&r.jsx("p",{className:"mt-1 text-sm text-red-600",children:o.unit})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Quantité*"}),r.jsx("input",{type:"number",name:"quantity",value:i.quantity,onChange:u,min:"0",className:`w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 ${o.quantity?"border-red-500":"border-gray-300"}`}),o.quantity&&r.jsx("p",{className:"mt-1 text-sm text-red-600",children:o.quantity})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Niveau de réapprovisionnement*"}),r.jsx("input",{type:"number",name:"reorderLevel",value:i.reorderLevel,onChange:u,min:"0",className:`w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 ${o.reorderLevel?"border-red-500":"border-gray-300"}`}),o.reorderLevel&&r.jsx("p",{className:"mt-1 text-sm text-red-600",children:o.reorderLevel})]})]}),r.jsxs("div",{className:"flex justify-end gap-4",children:[r.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50",children:"Annuler"}),r.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:t?"Mettre à jour":"Ajouter"})]})]})]})},v1=({item:t,onEdit:e,getStatusIndicator:s,deleteInventoryItem:n})=>r.jsxs("div",{className:"bg-white p-4 rounded-lg shadow mb-4 border border-gray-100",children:[r.jsxs("div",{className:"flex justify-between items-start mb-2",children:[r.jsx("h3",{className:"font-medium text-gray-900",children:t.name}),r.jsxs("div",{className:"flex space-x-1",children:[r.jsx("button",{onClick:()=>e(t.id),className:"text-blue-600 hover:text-blue-900 p-1",title:"Modifier",children:r.jsx(xs,{size:16})}),r.jsx("button",{onClick:a=>{a.stopPropagation(),window.confirm(`Êtes-vous sûr de vouloir supprimer l'article "${t.name}" ?`)&&n(t.id)},className:"text-red-600 hover:text-red-900 p-1",title:"Supprimer",children:r.jsx(gs,{size:16})})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[r.jsx("div",{className:"text-gray-500",children:"Quantité:"}),r.jsxs("div",{className:"font-medium",children:[t.quantity," ",t.unit]}),r.jsx("div",{className:"text-gray-500",children:"Seuil d'alerte:"}),r.jsx("div",{children:t.reorderLevel}),r.jsx("div",{className:"text-gray-500",children:"Statut:"}),r.jsx("div",{children:s(t.quantity,t.reorderLevel)})]})]}),y1=()=>{const{inventoryItems:t,deleteInventoryItem:e}=de(),[s,n]=v.useState(""),[a,i]=v.useState(!1),[l,o]=v.useState(null),[c,d]=v.useState(window.innerWidth<768);v.useEffect(()=>{const x=()=>{d(window.innerWidth<768)};return window.addEventListener("resize",x),()=>window.removeEventListener("resize",x)},[]);const u=t.filter(x=>x.name.toLowerCase().includes(s.toLowerCase())),m=x=>{o(x),i(!0)},h=(x,p)=>{window.confirm(`Êtes-vous sûr de vouloir supprimer l'article "${p}" ?`)&&e(x)},y=(x,p)=>x<=p*.5?r.jsxs("div",{className:"flex items-center gap-1 text-red-600",children:[r.jsx(Ht,{size:16}),r.jsx("span",{className:"text-xs font-medium",children:"Critique"})]}):x<=p?r.jsxs("div",{className:"flex items-center gap-1 text-yellow-600",children:[r.jsx(Ht,{size:16}),r.jsx("span",{className:"text-xs font-medium",children:"Faible"})]}):r.jsx("span",{className:"text-xs font-medium text-green-600",children:"Suffisant"}),g=()=>r.jsx("div",{className:"bg-white shadow-sm rounded-xl overflow-hidden",children:r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[r.jsx("thead",{className:"bg-gray-50",children:r.jsxs("tr",{children:[r.jsx("th",{scope:"col",className:"px-4 md:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Article"}),r.jsx("th",{scope:"col",className:"px-4 md:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Quantité"}),r.jsx("th",{scope:"col",className:"px-4 md:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Unité"}),r.jsx("th",{scope:"col",className:"px-4 md:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider hidden sm:table-cell",children:"Niveau de réappro"}),r.jsx("th",{scope:"col",className:"px-4 md:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Statut"}),r.jsx("th",{scope:"col",className:"px-4 md:px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),r.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:u.map(x=>r.jsxs("tr",{className:"hover:bg-gray-50",children:[r.jsx("td",{className:"px-4 md:px-6 py-4 whitespace-nowrap",children:r.jsx("div",{className:"font-medium text-gray-900",children:x.name})}),r.jsx("td",{className:"px-4 md:px-6 py-4 whitespace-nowrap",children:r.jsx("div",{className:"text-sm text-gray-900",children:x.quantity})}),r.jsx("td",{className:"px-4 md:px-6 py-4 whitespace-nowrap",children:r.jsx("div",{className:"text-sm text-gray-900",children:x.unit})}),r.jsx("td",{className:"px-4 md:px-6 py-4 whitespace-nowrap hidden sm:table-cell",children:r.jsx("div",{className:"text-sm text-gray-900",children:x.reorderLevel})}),r.jsx("td",{className:"px-4 md:px-6 py-4 whitespace-nowrap",children:y(x.quantity,x.reorderLevel)}),r.jsxs("td",{className:"px-4 md:px-6 py-4 whitespace-nowrap text-right text-sm font-medium space-x-2",children:[r.jsx("button",{onClick:()=>m(x.id),className:"text-blue-600 hover:text-blue-900 p-1",title:"Modifier",children:r.jsx(xs,{size:16})}),r.jsx("button",{onClick:()=>h(x.id,x.name),className:"text-red-600 hover:text-red-900 p-1",title:"Supprimer",children:r.jsx(gs,{size:16})})]})]},x.id))})]})})}),b=()=>r.jsx("div",{className:"space-y-3",children:u.map(x=>r.jsx(v1,{item:x,onEdit:m,getStatusIndicator:y,deleteInventoryItem:e},x.id))});return r.jsx("div",{className:"px-2 sm:px-6",children:a?r.jsx(g1,{itemId:l,onClose:()=>{i(!1),o(null)}}):r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"mb-6 flex flex-col sm:flex-row justify-between gap-4",children:[r.jsxs("div",{className:"relative flex-1 max-w-md",children:[r.jsx("input",{type:"text",placeholder:"Rechercher dans l'inventaire...",className:"pl-10 pr-4 py-2 w-full border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm sm:text-base",value:s,onChange:x=>n(x.target.value)}),r.jsx(Ii,{className:"absolute left-3 top-2.5 text-gray-400",size:18})]}),r.jsxs("button",{className:"flex items-center justify-center gap-2 px-3 sm:px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm sm:text-base whitespace-nowrap",onClick:()=>i(!0),children:[r.jsx(Cr,{size:18}),r.jsx("span",{children:"Ajouter un article"})]})]}),c?b():g(),u.length===0&&r.jsx("div",{className:"text-center py-8 text-gray-500",children:"Aucun article trouvé. Essayez de modifier vos critères de recherche."})]})})},w1=()=>{const{getLowStockItems:t,getOutOfStockItems:e}=de(),s=t(),n=e();return s.length===0&&n.length===0?null:r.jsxs("div",{className:"space-y-4 mb-6",children:[n.length>0&&r.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[r.jsxs("div",{className:"flex items-center mb-3",children:[r.jsx(Ht,{className:"text-red-600 mr-2",size:20}),r.jsxs("h3",{className:"text-red-800 font-semibold",children:["Rupture de stock critique (",n.length," article",n.length>1?"s":"",")"]})]}),r.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-2",children:n.map(a=>r.jsxs("div",{className:"bg-white rounded-md p-3 border border-red-100",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"font-medium text-gray-900",children:a.name}),r.jsxs("span",{className:"text-red-600 font-bold",children:["0 ",a.unit]})]}),r.jsxs("div",{className:"text-sm text-gray-600 mt-1",children:["Seuil de réapprovisionnement : ",a.reorderLevel," ",a.unit]})]},a.id))})]}),s.filter(a=>a.quantity>0).length>0&&r.jsxs("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-4",children:[r.jsxs("div",{className:"flex items-center mb-3",children:[r.jsx(li,{className:"text-amber-600 mr-2",size:20}),r.jsxs("h3",{className:"text-amber-800 font-semibold",children:["Stock faible (",s.filter(a=>a.quantity>0).length," article",s.filter(a=>a.quantity>0).length>1?"s":"",")"]})]}),r.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-2",children:s.filter(a=>a.quantity>0).map(a=>r.jsxs("div",{className:"bg-white rounded-md p-3 border border-amber-100",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"font-medium text-gray-900",children:a.name}),r.jsxs("span",{className:"text-amber-600 font-bold",children:[a.quantity," ",a.unit]})]}),r.jsxs("div",{className:"text-sm text-gray-600 mt-1",children:["Seuil de réapprovisionnement : ",a.reorderLevel," ",a.unit]})]},a.id))})]})]})},b1=()=>r.jsxs("div",{className:"space-y-6",children:[r.jsx(w1,{}),r.jsx(y1,{})]}),j1=({employee:t,onSave:e,onClose:s})=>{const[n,a]=v.useState({name:"",email:"",phone:"",role:"operateur"});v.useEffect(()=>{t&&a({name:t.name,email:t.email,phone:t.phone,role:t.role})},[t]);const i=o=>{const{name:c,value:d}=o.target;a(u=>({...u,[c]:d}))},l=o=>{o.preventDefault(),e(n),s()};return r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:r.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-lg",children:[r.jsxs("div",{className:"flex justify-between items-center p-6 border-b border-gray-200",children:[r.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:t?"Modifier un employé":"Nouvel employé"}),r.jsx("button",{onClick:s,className:"text-gray-400 hover:text-gray-500 transition-colors p-1 -mr-2","aria-label":"Fermer",children:r.jsx(Us,{size:24})})]}),r.jsxs("form",{onSubmit:l,className:"p-6 space-y-6",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-1",children:"Nom complet *"}),r.jsx("input",{type:"text",id:"name",name:"name",value:n.name,onChange:i,className:"block w-full px-4 py-3 text-base rounded-lg border border-gray-300 shadow-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-200 transition duration-150",placeholder:"Nom et prénom",required:!0})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-1",children:"Adresse email *"}),r.jsx("input",{type:"email",id:"email",name:"email",value:n.email,onChange:i,className:"block w-full px-4 py-3 text-base rounded-lg border border-gray-300 shadow-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-200 transition duration-150",placeholder:"exemple@entreprise.com",required:!0})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{htmlFor:"phone",className:"block text-sm font-medium text-gray-700 mb-1",children:"Numéro de téléphone *"}),r.jsx("input",{type:"tel",id:"phone",name:"phone",value:n.phone,onChange:i,className:"block w-full px-4 py-3 text-base rounded-lg border border-gray-300 shadow-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-200 transition duration-150",placeholder:"06 12 34 56 78",required:!0})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{htmlFor:"role",className:"block text-sm font-medium text-gray-700 mb-1",children:"Rôle dans l'entreprise *"}),r.jsxs("select",{id:"role",name:"role",value:n.role,onChange:i,className:"block w-full px-4 py-3 text-base rounded-lg border border-gray-300 shadow-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-200 transition duration-150 bg-white",children:[r.jsx("option",{value:"gerant",children:"Gérant"}),r.jsx("option",{value:"operateur",children:"Opérateur"}),r.jsx("option",{value:"comptoir",children:"Agent de comptoir"}),r.jsx("option",{value:"livreur",children:"Livreur"})]})]}),r.jsxs("div",{className:"flex justify-end space-x-4 pt-6 border-t border-gray-200",children:[r.jsx("button",{type:"button",onClick:s,className:"px-6 py-3 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition duration-150",children:"Annuler"}),r.jsxs("button",{type:"submit",className:"px-6 py-3 text-sm font-medium text-white bg-blue-600 border border-transparent rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition duration-150 flex items-center",children:[r.jsx(If,{className:"mr-2 h-5 w-5"}),t?"Mettre à jour":"Créer le compte"]})]})]})]})})},N1=t=>{switch(t.toLowerCase()){case"gerant":return"Gérant";case"operateur":return"Opérateur";case"comptoir":return"Comptoir";case"livreur":return"Livreur";default:return t}},k1=()=>{const{employees:t,addEmployee:e,updateEmployee:s,deleteEmployee:n}=de(),[a,i]=v.useState(!1),[l,o]=v.useState(null),[c,d]=v.useState(null),u=b=>{console.log("Saving employee data:",b),l?(console.log("Updating existing employee:",l.id),s({...l,...b})):(console.log("Adding new employee"),e(b)),i(!1),o(null)},m=b=>{console.log("Editing employee:",b.id),o(b),i(!0)},h=b=>{console.log("Request to delete employee:",b),d(b)},y=()=>{c?(console.log("Confirming deletion of employee:",c),n(c),d(null)):console.log("No employee ID to delete")},g=b=>{switch(b.toLowerCase()){case"gerant":return"bg-purple-100 text-purple-800";case"operateur":return"bg-blue-100 text-blue-800";case"comptoir":return"bg-green-100 text-green-800";case"livreur":return"bg-yellow-100 text-yellow-800";default:return"bg-gray-100 text-gray-800"}};return r.jsxs("div",{className:"bg-white p-4 md:p-6 rounded-xl shadow-sm",children:[r.jsxs("div",{className:"flex justify-between items-center mb-6",children:[r.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Gestion des employés"}),r.jsxs("button",{onClick:()=>{o(null),i(!0)},className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm md:text-base",children:[r.jsx(Cr,{size:16}),r.jsx("span",{children:"Ajouter un employé"})]})]}),a&&r.jsx(j1,{employee:l||void 0,onSave:u,onClose:()=>{i(!1),o(null)}}),c&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:r.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full",children:[r.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Confirmer la suppression"}),r.jsx("p",{className:"text-gray-600 mb-6",children:"Êtes-vous sûr de vouloir supprimer cet employé ? Cette action est irréversible."}),r.jsxs("div",{className:"flex justify-end space-x-3",children:[r.jsx("button",{onClick:()=>d(null),className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50",children:"Annuler"}),r.jsx("button",{onClick:y,className:"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700",children:"Supprimer"})]})]})}),r.jsx("div",{className:"md:hidden space-y-3",children:t.length>0?t.map(b=>r.jsxs("div",{className:"border border-gray-100 rounded-lg p-4 shadow-sm",children:[r.jsxs("div",{className:"flex justify-between items-start mb-3",children:[r.jsxs("div",{children:[r.jsxs("h3",{className:"font-medium text-gray-900 flex items-center",children:[r.jsx(To,{size:16,className:"mr-2 text-gray-500"}),b.name]}),r.jsx("div",{className:"mt-1",children:r.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${g(b.role)}`,children:N1(b.role)})})]}),r.jsxs("div",{className:"flex space-x-2",children:[r.jsx("button",{onClick:x=>{x.stopPropagation(),m(b)},className:"text-blue-600 hover:text-blue-800 p-1 rounded-full hover:bg-blue-50",title:"Modifier",children:r.jsx(xs,{size:16})}),r.jsx("button",{onClick:x=>{x.stopPropagation(),h(b.id)},className:"text-red-600 hover:text-red-800 p-1 rounded-full hover:bg-red-50",title:"Supprimer",children:r.jsx(gs,{size:16})})]})]}),r.jsxs("div",{className:"space-y-2 mt-3 pt-3 border-t border-gray-100",children:[r.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[r.jsx(Qc,{size:14,className:"mr-2 text-gray-400 flex-shrink-0"}),r.jsx("span",{className:"truncate",children:b.email})]}),r.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[r.jsx(Gc,{size:14,className:"mr-2 text-gray-400 flex-shrink-0"}),r.jsx("span",{children:b.phone||"Non renseigné"})]})]})]},b.id)):r.jsx("div",{className:"text-center py-8 text-gray-500",children:"Aucun employé enregistré"})}),r.jsx("div",{className:"hidden md:block overflow-x-auto",children:r.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[r.jsx("thead",{className:"bg-gray-50",children:r.jsxs("tr",{children:[r.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Nom"}),r.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Rôle"}),r.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Contact"}),r.jsx("th",{scope:"col",className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),r.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:t.length>0?t.map(b=>r.jsxs("tr",{className:"hover:bg-gray-50",children:[r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"flex-shrink-0 h-10 w-10 rounded-full bg-gray-200 flex items-center justify-center",children:r.jsx(To,{size:18,className:"text-gray-500"})}),r.jsx("div",{className:"ml-4",children:r.jsx("div",{className:"font-medium text-gray-900",children:b.name})})]})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("span",{className:`px-3 py-1 text-xs rounded-full ${g(b.role)}`,children:b.role.charAt(0).toUpperCase()+b.role.slice(1)})}),r.jsxs("td",{className:"px-6 py-4",children:[r.jsx("div",{className:"text-sm text-gray-900",children:b.email}),r.jsx("div",{className:"text-sm text-gray-500",children:b.phone||"Non renseigné"})]}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:r.jsxs("div",{className:"flex justify-end space-x-4",children:[r.jsxs("button",{onClick:x=>{x.stopPropagation(),m(b)},className:"text-blue-600 hover:text-blue-900",title:"Modifier",children:[r.jsx(xs,{size:16,className:"inline mr-1"}),r.jsx("span",{children:"Modifier"})]}),r.jsxs("button",{onClick:x=>{x.stopPropagation(),h(b.id)},className:"text-red-600 hover:text-red-900",title:"Supprimer",children:[r.jsx(gs,{size:16,className:"inline mr-1"}),r.jsx("span",{children:"Supprimer"})]})]})})]},b.id)):r.jsx("tr",{children:r.jsx("td",{colSpan:4,className:"px-6 py-4 text-center text-gray-500",children:"Aucun employé enregistré"})})})]})})]})},_1=()=>{const{orders:t,customers:e,invoices:s}=de(),[n,a]=v.useState("month"),[i,l]=v.useState(""),[o,c]=v.useState("all"),[d,u]=v.useState(null),m=j=>{const _=e.find(N=>N.id===j);return _?_.name:"Client inconnu"},h=j=>j.paymentMethod||"cash",y=j=>({cash:"Espèces",card:"Carte bancaire",transfer:"Virement",check:"Chèque"})[j],g=j=>{const N={cash:Fs,card:as,transfer:xv,check:Dv}[j];return r.jsx(N,{size:16})},b=fn.useMemo(()=>new Set(s.filter(j=>j.status==="paid").map(j=>j.orderId).filter(Boolean)),[s]),x=v.useMemo(()=>t.map(j=>b.has(j.id)&&!j.paid?{...j,paid:!0}:j).filter(j=>{const _=new Date(j.createdAt),N=new Date;let k=!0;if(n==="today")k=_.toDateString()===N.toDateString();else if(n==="week"){const E=new Date(N.setDate(N.getDate()-N.getDay()));E.setHours(0,0,0,0),k=_>=E}else n==="month"?k=_.getMonth()===N.getMonth()&&_.getFullYear()===N.getFullYear():n==="year"&&(k=_.getFullYear()===N.getFullYear());const S=i===""||j.id.toLowerCase().includes(i.toLowerCase())||m(j.customerId).toLowerCase().includes(i.toLowerCase()),O=h(j);return k&&S&&(o==="all"||O===o)}),[t,n,i,o,e,s]),p=x.filter(j=>j.paid),f=x.filter(j=>!j.paid),w=v.useMemo(()=>{const j=p.reduce((S,O)=>S+O.totalAmount,0),_=p.length>0?j/p.length:0,N={cash:0,card:0,transfer:0,check:0};p.forEach(S=>{const O=h(S);N[O]=(N[O]||0)+S.totalAmount});const k=Object.entries(N).map(([S,O])=>({method:S,percentage:j>0?Math.round(O/j*100):0,amount:O}));return{totalRevenue:j,paidOrders:p.length,averageOrder:_,pendingPayments:f.reduce((S,O)=>S+O.totalAmount,0),growthRate:Math.random()*20-10,methodBreakdown:N,methodPercentages:k}},[p,f]);return r.jsxs("div",{className:"space-y-4 sm:space-y-8 px-2 sm:px-0",children:[r.jsx("div",{className:"bg-white rounded-xl sm:rounded-2xl p-4 sm:p-6 shadow-sm border border-gray-100",children:r.jsxs("div",{className:"flex flex-col space-y-4 lg:flex-row lg:items-center lg:justify-between lg:space-y-0",children:[r.jsxs("div",{className:"text-center sm:text-left",children:[r.jsx("h1",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-gray-900 mb-1 sm:mb-2",children:"Gestion des Paiements"}),r.jsx("p",{className:"text-gray-600 text-xs sm:text-sm lg:text-base",children:"Suivez vos revenus et analysez vos performances financières"})]}),r.jsxs("div",{className:"flex flex-col gap-2 sm:flex-row sm:gap-3 w-full lg:w-auto",children:[r.jsxs("div",{className:"relative flex-1 sm:flex-none",children:[r.jsx(Ii,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:16}),r.jsx("input",{type:"text",placeholder:"Rechercher...",value:i,onChange:j=>l(j.target.value),className:"pl-9 pr-3 py-2 bg-gray-50 border border-gray-200 rounded-lg text-gray-900 placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 w-full sm:w-64 text-sm"})]}),r.jsxs("select",{value:n,onChange:j=>a(j.target.value),className:"px-3 py-2 bg-gray-50 border border-gray-200 rounded-lg text-gray-900 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm flex-1 sm:flex-none",children:[r.jsx("option",{value:"today",className:"text-gray-900",children:"Aujourd'hui"}),r.jsx("option",{value:"week",className:"text-gray-900",children:"7 derniers jours"}),r.jsx("option",{value:"month",className:"text-gray-900",children:"30 derniers jours"}),r.jsx("option",{value:"year",className:"text-gray-900",children:"Cette année"}),r.jsx("option",{value:"all",className:"text-gray-900",children:"Tout le temps"})]}),r.jsxs("button",{onClick:()=>{const _=[["ID","Client","Date","Montant","Méthode","Statut"].join(","),...p.map(L=>{const E=e.find(B=>B.id===L.customerId),W=h(L),C=Se(L.createdAt);return[`#${L.id}`,`"${(E==null?void 0:E.name)||"Inconnu"}"`,`"${C}"`,Y(L.totalAmount),`"${y(W)}"`,L.paid?"Payé":"En attente"].join(",")})].join(`
`),N=new Blob(["\uFEFF"+_],{type:"text/csv;charset=utf-8;"}),k=URL.createObjectURL(N),S=document.createElement("a");S.href=k;const O=new Date().toISOString().split("T")[0];S.download=`export-paiements-${O}.csv`,document.body.appendChild(S),S.click(),document.body.removeChild(S)},className:"flex items-center justify-center gap-2 px-3 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors text-sm flex-1 sm:flex-none",children:[r.jsx(wv,{size:16}),r.jsx("span",{className:"sm:inline",children:"Exporter"})]})]})]})}),r.jsxs("div",{className:"grid grid-cols-2 gap-2 sm:gap-4 lg:gap-6",children:[r.jsxs("div",{className:"bg-white rounded-xl sm:rounded-2xl p-3 sm:p-6 shadow-lg border border-gray-100 hover:shadow-xl transition-all duration-300 group min-h-[140px] sm:min-h-[180px] flex flex-col justify-between w-full",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("div",{className:"p-2 sm:p-3 bg-gradient-to-br from-blue-500 to-blue-600 rounded-lg sm:rounded-xl text-white group-hover:scale-110 transition-transform duration-300",children:r.jsx(Fs,{size:18,className:"sm:w-6 sm:h-6"})}),r.jsx("div",{className:"flex items-center text-sm",children:w.growthRate>=0?r.jsxs(r.Fragment,{children:[r.jsx(dn,{size:16,className:"text-green-500 mr-1"}),r.jsxs("span",{className:"text-green-600 font-medium",children:["+",w.growthRate.toFixed(1),"%"]})]}):r.jsxs(r.Fragment,{children:[r.jsx(li,{size:16,className:"text-red-500 mr-1"}),r.jsxs("span",{className:"text-red-600 font-medium",children:[w.growthRate.toFixed(1),"%"]})]})})]}),r.jsxs("div",{className:"flex-1",children:[r.jsx("h3",{className:"text-xs sm:text-sm font-medium text-gray-600 mb-1",children:"Chiffre d'affaires"}),r.jsx("p",{className:"text-base sm:text-3xl font-bold text-gray-900 mb-1 break-words",children:Y(w.totalRevenue)}),r.jsx("p",{className:"text-xs text-gray-500 hidden sm:block",children:"Revenus sur la période sélectionnée"})]})]}),r.jsxs("div",{className:"bg-white rounded-xl sm:rounded-2xl p-3 sm:p-6 shadow-lg border border-gray-100 hover:shadow-xl transition-all duration-300 group min-h-[140px] sm:min-h-[180px] flex flex-col justify-between w-full",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("div",{className:"p-2 sm:p-3 bg-gradient-to-br from-green-500 to-green-600 rounded-lg sm:rounded-xl text-white group-hover:scale-110 transition-transform duration-300",children:r.jsx(as,{size:18,className:"sm:w-6 sm:h-6"})}),r.jsxs("div",{className:"flex items-center text-sm",children:[r.jsx(dn,{size:16,className:"text-green-500 mr-1"}),r.jsx("span",{className:"text-green-600 font-medium",children:"+8.2%"})]})]}),r.jsxs("div",{className:"flex-1",children:[r.jsx("h3",{className:"text-xs sm:text-sm font-medium text-gray-600 mb-1",children:"Commandes payées"}),r.jsx("p",{className:"text-base sm:text-3xl font-bold text-gray-900 mb-1 break-words",children:w.paidOrders}),r.jsx("p",{className:"text-xs text-gray-500 hidden sm:block",children:"Transactions réussies"})]})]}),r.jsxs("div",{className:"bg-white rounded-xl sm:rounded-2xl p-3 sm:p-6 shadow-lg border border-gray-100 hover:shadow-xl transition-all duration-300 group min-h-[140px] sm:min-h-[180px] flex flex-col justify-between w-full",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("div",{className:"p-2 sm:p-3 bg-gradient-to-br from-purple-500 to-purple-600 rounded-lg sm:rounded-xl text-white group-hover:scale-110 transition-transform duration-300",children:r.jsx(La,{size:18,className:"sm:w-6 sm:h-6"})}),r.jsxs("div",{className:"flex items-center text-sm",children:[r.jsx(dn,{size:16,className:"text-green-500 mr-1"}),r.jsx("span",{className:"text-green-600 font-medium",children:"+5.4%"})]})]}),r.jsxs("div",{className:"flex-1",children:[r.jsx("h3",{className:"text-xs sm:text-sm font-medium text-gray-600 mb-1",children:"Panier moyen"}),r.jsx("p",{className:"text-base sm:text-3xl font-bold text-gray-900 mb-1 break-words",children:Y(w.averageOrder)}),r.jsx("p",{className:"text-xs text-gray-500 hidden sm:block",children:"Valeur moyenne par commande"})]})]}),r.jsxs("div",{className:"bg-white rounded-xl sm:rounded-2xl p-3 sm:p-6 shadow-lg border border-gray-100 hover:shadow-xl transition-all duration-300 group min-h-[140px] sm:min-h-[180px] flex flex-col justify-between w-full",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("div",{className:"p-2 sm:p-3 bg-gradient-to-br from-orange-500 to-orange-600 rounded-lg sm:rounded-xl text-white group-hover:scale-110 transition-transform duration-300",children:r.jsx(Pt,{size:18,className:"sm:w-6 sm:h-6"})}),r.jsxs("div",{className:"flex items-center text-sm",children:[r.jsx(li,{size:16,className:"text-red-500 mr-1"}),r.jsx("span",{className:"text-red-600 font-medium",children:"-2.1%"})]})]}),r.jsxs("div",{className:"flex-1",children:[r.jsx("h3",{className:"text-xs sm:text-sm font-medium text-gray-600 mb-1",children:"En attente"}),r.jsx("p",{className:"text-base sm:text-3xl font-bold text-gray-900 mb-1 break-words",children:Y(w.pendingPayments)}),r.jsx("p",{className:"text-xs text-gray-500 hidden sm:block",children:"Montant des impayés"})]})]})]}),r.jsxs("div",{className:"bg-white rounded-xl sm:rounded-2xl p-4 sm:p-6 shadow-lg border border-gray-100",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3 mb-4 sm:mb-6",children:[r.jsxs("h2",{className:"text-lg sm:text-xl font-semibold text-gray-800 flex items-center gap-2",children:[r.jsx(Tv,{className:"text-blue-600",size:20}),r.jsx("span",{className:"hidden sm:inline",children:"Répartition par méthode de paiement"}),r.jsx("span",{className:"sm:hidden",children:"Méthodes de paiement"})]}),r.jsxs("select",{value:o,onChange:j=>c(j.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm w-full sm:w-auto",children:[r.jsx("option",{value:"all",children:"Toutes les méthodes"}),r.jsx("option",{value:"cash",children:"Espèces"}),r.jsx("option",{value:"card",children:"Carte bancaire"}),r.jsx("option",{value:"transfer",children:"Virement"}),r.jsx("option",{value:"check",children:"Chèque"})]})]}),r.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-2 lg:grid-cols-4 gap-2 sm:gap-4",children:Object.entries(w.methodBreakdown).map(([j,_])=>{const N=w.totalRevenue>0?_/w.totalRevenue*100:0;return r.jsxs("div",{className:"bg-gray-50 rounded-lg sm:rounded-xl p-2 sm:p-4 hover:bg-gray-100 transition-colors min-h-[120px] sm:min-h-[140px] flex flex-col justify-between w-full",children:[r.jsxs("div",{className:"flex flex-col items-center sm:flex-row sm:items-center gap-1 sm:gap-3 mb-2 sm:mb-3",children:[r.jsx("div",{className:"p-1.5 sm:p-2 bg-white rounded-lg shadow-sm",children:g(j)}),r.jsxs("div",{className:"text-center sm:text-left sm:flex-1 sm:min-w-0",children:[r.jsx("h4",{className:"font-medium text-gray-900 text-xs sm:text-base leading-tight break-words",children:y(j)}),r.jsxs("p",{className:"text-xs text-gray-500",children:[N.toFixed(1),"%"]})]})]}),r.jsxs("div",{className:"mt-auto w-full",children:[r.jsx("p",{className:"text-sm sm:text-lg font-semibold text-gray-900 mb-1 sm:mb-2 text-center sm:text-left break-words",children:Y(_)}),r.jsx("div",{className:"bg-gray-200 rounded-full h-1.5 sm:h-2 w-full",children:r.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-purple-600 h-1.5 sm:h-2 rounded-full transition-all duration-500",style:{width:`${Math.max(N,2)}%`}})})]})]},j)})})]}),r.jsxs("div",{className:"bg-white rounded-xl sm:rounded-2xl shadow-lg border border-gray-100",children:[r.jsx("div",{className:"p-4 sm:p-6 border-b border-gray-100",children:r.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3 sm:gap-4",children:[r.jsxs("h2",{className:"text-lg sm:text-xl font-semibold text-gray-800 flex items-center gap-2",children:[r.jsx(Kc,{className:"text-blue-600",size:20}),r.jsx("span",{className:"hidden sm:inline",children:"Historique des transactions"}),r.jsx("span",{className:"sm:hidden",children:"Transactions"})]}),r.jsx("div",{className:"flex items-center gap-3",children:r.jsxs("div",{className:"flex items-center gap-2 text-xs sm:text-sm text-gray-600",children:[r.jsx("span",{className:"hidden sm:inline",children:"Affichage:"}),r.jsxs("span",{className:"font-medium",children:[x.length," transactions"]})]})})]})}),r.jsx("div",{className:"md:hidden",children:x.length===0?r.jsxs("div",{className:"p-6 sm:p-8 text-center",children:[r.jsx("div",{className:"w-12 h-12 sm:w-16 sm:h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-3 sm:mb-4",children:r.jsx(as,{className:"text-gray-400",size:24})}),r.jsx("h3",{className:"text-base sm:text-lg font-medium text-gray-900 mb-2",children:"Aucune transaction trouvée"}),r.jsx("p",{className:"text-sm text-gray-500",children:"Aucune transaction ne correspond aux critères de recherche."})]}):r.jsx("div",{className:"p-3 sm:p-4 space-y-3 sm:space-y-4 max-h-96 overflow-y-auto",children:x.slice(0,10).map(j=>r.jsxs("div",{className:"bg-gradient-to-r from-gray-50 to-white border border-gray-200 rounded-lg sm:rounded-xl p-3 sm:p-4 hover:shadow-md transition-all duration-200",children:[r.jsxs("div",{className:"flex justify-between items-start mb-2 sm:mb-3",children:[r.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 flex-1 min-w-0",children:[r.jsx("div",{className:"p-1.5 sm:p-2 bg-blue-100 rounded-lg flex-shrink-0",children:g(h(j))}),r.jsxs("div",{className:"min-w-0 flex-1",children:[r.jsxs("p",{className:"font-semibold text-gray-900 text-sm sm:text-base",children:["#",j.id]}),r.jsx("p",{className:"text-xs sm:text-sm text-gray-600 truncate",children:m(j.customerId)})]})]}),r.jsx("div",{className:"text-right flex-shrink-0 ml-2",children:r.jsx("span",{className:`px-2 sm:px-3 py-1 text-xs font-medium rounded-full ${j.paid?"bg-green-100 text-green-800":"bg-orange-100 text-orange-800"}`,children:j.paid?"Payé":"En attente"})})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[r.jsxs("div",{children:[r.jsx("span",{className:"text-gray-500",children:"Date"}),r.jsx("p",{className:"font-medium text-gray-900",children:Se(j.updatedAt)})]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-gray-500",children:"Montant"}),r.jsx("p",{className:"font-bold text-gray-900",children:Y(j.totalAmount)})]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-gray-500",children:"Méthode"}),r.jsx("p",{className:"font-medium text-gray-900",children:y(h(j))})]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-gray-500",children:"Statut"}),r.jsx("p",{className:"font-medium text-gray-900",children:j.status})]})]}),r.jsxs("button",{onClick:()=>u(d===j.id?null:j.id),className:"mt-3 flex items-center gap-2 text-blue-600 hover:text-blue-800 text-sm font-medium",children:[r.jsx(Dn,{size:16}),d===j.id?"Masquer":"Voir détails"]}),d===j.id&&r.jsx("div",{className:"mt-3 pt-3 border-t border-gray-200 text-sm",children:r.jsxs("div",{className:"grid grid-cols-1 gap-2",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-500",children:"Services:"}),r.jsxs("span",{className:"font-medium",children:[j.services.length," service(s)"]})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-500",children:"Notes:"}),r.jsx("span",{className:"font-medium",children:j.notes||"Aucune"})]})]})})]},j.id))})}),r.jsx("div",{className:"hidden md:block",children:x.length===0?r.jsxs("div",{className:"p-12 text-center",children:[r.jsx("div",{className:"w-20 h-20 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-6",children:r.jsx(as,{className:"text-gray-400",size:40})}),r.jsx("h3",{className:"text-xl font-medium text-gray-900 mb-3",children:"Aucune transaction trouvée"}),r.jsx("p",{className:"text-gray-500 mb-6",children:"Aucune transaction ne correspond aux critères de recherche."})]}):r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"min-w-full",children:[r.jsx("thead",{className:"bg-gray-50",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Transaction"}),r.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Client"}),r.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Date"}),r.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Montant"}),r.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Méthode"}),r.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Statut"}),r.jsx("th",{className:"px-6 py-4 text-center text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Actions"})]})}),r.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:x.map(j=>{var _;return r.jsxs(v.Fragment,{children:[r.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[r.jsx("td",{className:"px-6 py-4",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:g(h(j))}),r.jsxs("div",{children:[r.jsxs("div",{className:"font-semibold text-gray-900",children:["#",j.id]}),r.jsxs("div",{className:"text-sm text-gray-500",children:[j.services.length," service(s)"]})]})]})}),r.jsx("td",{className:"px-6 py-4",children:r.jsx("div",{className:"font-medium text-gray-900",children:m(j.customerId)})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:Se(j.createdAt)}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:Y(j.totalAmount)}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("span",{className:"text-gray-700",children:g(h(j))}),r.jsx("span",{className:"ml-2 text-sm font-medium text-gray-900",children:y(h(j))})]})}),r.jsx("td",{className:"px-6 py-4",children:r.jsx("span",{className:`px-3 py-1 text-xs font-medium rounded-full ${j.paid?"bg-green-100 text-green-800":"bg-orange-100 text-orange-800"}`,children:j.paid?"Payé":"En attente"})}),r.jsx("td",{className:"px-6 py-4 text-center",children:r.jsxs("button",{onClick:()=>u(d===j.id?null:j.id),className:"inline-flex items-center gap-2 px-3 py-1 text-sm font-medium text-blue-600 hover:text-blue-800 hover:bg-blue-50 rounded-lg transition-colors",children:[r.jsx(Dn,{size:16}),"Détails"]})})]}),d===j.id&&r.jsx("tr",{className:"bg-gray-50",children:r.jsx("td",{colSpan:7,className:"px-6 py-4",children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[r.jsxs("div",{children:[r.jsx("h4",{className:"font-medium text-gray-700 mb-2",children:"Détails de la commande"}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-500",children:"Client:"}),r.jsx("span",{className:"font-medium",children:m(j.customerId)})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-500",children:"Date de création:"}),r.jsx("span",{className:"font-medium",children:Se(j.createdAt)})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-500",children:"Statut:"}),r.jsx("span",{className:"font-medium",children:j.status})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-500",children:"Méthode de paiement:"}),r.jsx("span",{className:"font-medium",children:y(h(j))})]})]})]}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-medium text-gray-700 mb-2",children:"Services"}),r.jsxs("div",{className:"space-y-2",children:[(_=j.services)==null?void 0:_.map((N,k)=>r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-500",children:N.name||"Service sans nom"}),r.jsx("span",{className:"font-medium",children:Y(N.price||0)})]},k)),r.jsx("div",{className:"border-t border-gray-200 pt-2 mt-2",children:r.jsxs("div",{className:"flex justify-between font-semibold",children:[r.jsx("span",{children:"Total:"}),r.jsx("span",{children:Y(j.totalAmount)})]})})]})]})]})})})]},j.id)})})]})})})]})]})},S1=()=>{const{orders:t,services:e}=de(),s=e.map(o=>{const d=t.filter(u=>u.services.some(m=>m.id===o.id)).reduce((u,m)=>{const h=m.services.filter(b=>b.id===o.id).length,y=m.services.length,g=h/y;return u+m.totalAmount*g},0);return{serviceName:o.name,revenue:d}}).sort((o,c)=>c.revenue-o.revenue),n=t.reduce((o,c)=>(o[c.status]=(o[c.status]||0)+1,o),{}),a=t.filter(o=>o.paid).length,i=t.length-a,l=t.length?Math.round(a/t.length*100):0;return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm",children:[r.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-6",children:"Chiffre d'affaires par service"}),r.jsx("div",{className:"space-y-4",children:s.map(({serviceName:o,revenue:c})=>{var d;return r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"w-40 text-sm font-medium text-gray-700",children:o}),r.jsx("div",{className:"flex-1 h-6 bg-gray-100 rounded-full overflow-hidden",children:r.jsx("div",{className:"h-full bg-blue-600",style:{width:`${Math.min(100,c/(((d=s[0])==null?void 0:d.revenue)||1)*100)}%`}})}),r.jsx("div",{className:"w-24 text-right font-medium text-gray-900 ml-4",children:Y(c)})]},o)})})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm",children:[r.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-6",children:"Répartition des statuts de commande"}),r.jsx("div",{className:"space-y-4",children:Object.entries(n).map(([o,c])=>r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"w-32 text-sm font-medium text-gray-700",children:o.charAt(0).toUpperCase()+o.slice(1)}),r.jsx("div",{className:"flex-1 h-6 bg-gray-100 rounded-full overflow-hidden",children:r.jsx("div",{className:"h-full bg-blue-600",style:{width:`${c/t.length*100}%`}})}),r.jsxs("div",{className:"w-16 text-right font-medium text-gray-900 ml-4",children:[c," (",Math.round(c/t.length*100),"%)"]})]},o))})]}),r.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm",children:[r.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-6",children:"Statut des paiements"}),r.jsx("div",{className:"h-48 flex items-center justify-center",children:r.jsxs("div",{className:"relative w-36 h-36",children:[r.jsx("div",{className:"absolute inset-0 rounded-full",style:{background:`conic-gradient(#10B981 0% ${l}%, #EF4444 ${l}% 100%)`}}),r.jsx("div",{className:"absolute inset-3 bg-white rounded-full flex items-center justify-center",children:r.jsxs("div",{className:"text-center",children:[r.jsxs("div",{className:"text-2xl font-bold text-gray-800",children:[l,"%"]}),r.jsx("div",{className:"text-xs text-gray-500",children:"Payé"})]})})]})}),r.jsxs("div",{className:"flex justify-center gap-8 mt-6",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"w-3 h-3 bg-green-500 rounded-full"}),r.jsxs("span",{className:"text-sm text-gray-700",children:["Payé (",a,")"]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"w-3 h-3 bg-red-500 rounded-full"}),r.jsxs("span",{className:"text-sm text-gray-700",children:["Impayé (",i,")"]})]})]})]})]})]})},C1=()=>{const{resetToMockData:t,loading:e}=js(),[s,n]=v.useState(!1),a=()=>{n(!0)},i=async()=>{await t(),n(!1)};return r.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm",children:[r.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-6",children:"Paramètres du système"}),r.jsxs("div",{className:"space-y-8",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-medium text-gray-800 mb-4",children:"Paramètres généraux"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nom de l'entreprise"}),r.jsx("input",{type:"text",defaultValue:"LaundryPro Services",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"E-mail de contact"}),r.jsx("input",{type:"email",defaultValue:"contact@laundrypro.com",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Numéro de téléphone"}),r.jsx("input",{type:"text",defaultValue:"(555) 123-4567",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Adresse de l'entreprise"}),r.jsx("input",{type:"text",defaultValue:"123 Laundry Lane, Cleanville, CL 12345",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]})]}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-medium text-gray-800 mb-4",children:"Notifications"}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-gray-800",children:"Notifications par e-mail"}),r.jsx("p",{className:"text-sm text-gray-500",children:"Recevoir des e-mails pour les nouvelles commandes et mises à jour"})]}),r.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[r.jsx("input",{type:"checkbox",className:"sr-only peer",defaultChecked:!0}),r.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]}),r.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-gray-800",children:"Notifications par SMS"}),r.jsx("p",{className:"text-sm text-gray-500",children:"Recevoir des SMS pour les changements de statut des commandes"})]}),r.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[r.jsx("input",{type:"checkbox",className:"sr-only peer"}),r.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]}),r.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-gray-800",children:"Alertes de stock bas"}),r.jsx("p",{className:"text-sm text-gray-500",children:"Être notifié lorsque les articles sont en faible quantité"})]}),r.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[r.jsx("input",{type:"checkbox",className:"sr-only peer",defaultChecked:!0}),r.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]})]})]}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-medium text-gray-800 mb-4",children:"Système"}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-gray-800",children:"Mode sombre"}),r.jsx("p",{className:"text-sm text-gray-500",children:"Basculer entre les thèmes clair et sombre"})]}),r.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[r.jsx("input",{type:"checkbox",className:"sr-only peer"}),r.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]}),r.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-gray-800",children:"Sauvegarde automatique"}),r.jsx("p",{className:"text-sm text-gray-500",children:"Sauvegarder les données du système quotidiennement"})]}),r.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[r.jsx("input",{type:"checkbox",className:"sr-only peer",defaultChecked:!0}),r.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]})]})]}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-medium text-gray-800 mb-4",children:"Gestion des données"}),r.jsx("div",{className:"space-y-3",children:r.jsx("div",{className:"p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:r.jsxs("div",{className:"flex items-start space-x-3",children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsx("svg",{className:"w-5 h-5 text-yellow-600 mt-0.5",fill:"currentColor",viewBox:"0 0 20 20",children:r.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}),r.jsxs("div",{className:"flex-1",children:[r.jsx("h4",{className:"text-sm font-medium text-yellow-800",children:"Réinitialiser aux données par défaut"}),r.jsx("p",{className:"text-sm text-yellow-700 mt-1",children:"Cette action supprimera toutes les données locales (clients, commandes, factures, etc.) et restaurera les données d'exemple par défaut. Cette action est irréversible."}),r.jsx("button",{onClick:a,disabled:e,className:"mt-3 px-4 py-2 bg-yellow-600 text-white text-sm rounded-lg hover:bg-yellow-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:e?"Réinitialisation...":"Réinitialiser les données"})]})]})})})]}),r.jsx("div",{className:"flex justify-end",children:r.jsx("button",{className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Enregistrer les paramètres"})})]}),s&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:r.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-xl max-w-md w-full mx-4",children:[r.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsx("svg",{className:"w-6 h-6 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L4.082 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),r.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Confirmer la réinitialisation"})]}),r.jsx("p",{className:"text-sm text-gray-500 mb-6",children:"Êtes-vous sûr de vouloir réinitialiser toutes les données ? Cette action supprimera définitivement :"}),r.jsxs("ul",{className:"text-sm text-gray-600 mb-6 space-y-1",children:[r.jsx("li",{children:"• Tous les clients personnalisés"}),r.jsx("li",{children:"• Toutes les commandes créées"}),r.jsx("li",{children:"• Toutes les factures générées"}),r.jsx("li",{children:"• Tous les employés ajoutés"}),r.jsx("li",{children:"• Toutes les modifications d'inventaire"})]}),r.jsxs("div",{className:"flex justify-end space-x-3",children:[r.jsx("button",{onClick:()=>n(!1),className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors",children:"Annuler"}),r.jsx("button",{onClick:i,disabled:e,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:e?"Réinitialisation...":"Réinitialiser"})]})]})})]})},E1=({invoices:t,customers:e,onEdit:s,onDelete:n,onGeneratePdf:a,onCreateNew:i})=>{const[l,o]=fn.useState("all"),[c,d]=fn.useState(""),u=t.filter(h=>{const y=l==="all"||h.status===l,g=e.find(p=>p.id===h.customerId),b=(g==null?void 0:g.name)||"",x=c===""||h.invoiceNumber.toLowerCase().includes(c.toLowerCase())||b.toLowerCase().includes(c.toLowerCase());return y&&x}),m=h=>{const y={draft:"bg-gray-100 text-gray-800",sent:"bg-blue-100 text-blue-800",paid:"bg-green-100 text-green-800",overdue:"bg-red-100 text-red-800",cancelled:"bg-gray-200 text-gray-800"},g={draft:"Brouillon",sent:"Envoyée",paid:"Payée",overdue:"En retard",cancelled:"Annulée"};return r.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${y[h]}`,children:g[h]})};return r.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-4",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6 gap-4",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Factures"}),r.jsxs("p",{className:"text-sm text-gray-500",children:[u.length," facture",u.length!==1?"s":""," au total"]})]}),r.jsx("div",{className:"flex flex-col sm:flex-row gap-3 w-full sm:w-auto",children:r.jsxs("button",{onClick:i,className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 w-full sm:w-auto justify-center",children:[r.jsx("svg",{className:"h-4 w-4 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Nouvelle facture"]})})]}),r.jsxs("div",{className:"mb-6 flex flex-col sm:flex-row justify-between gap-4",children:[r.jsxs("div",{className:"relative rounded-md shadow-sm w-full sm:w-64",children:[r.jsx("input",{type:"text",className:"focus:ring-blue-500 focus:border-blue-500 block w-full pr-10 sm:text-sm border-gray-300 rounded-md",placeholder:"Rechercher...",value:c,onChange:h=>d(h.target.value)}),r.jsx("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none",children:r.jsx("svg",{className:"h-5 w-5 text-gray-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:r.jsx("path",{fillRule:"evenodd",d:"M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z",clipRule:"evenodd"})})})]}),r.jsxs("select",{className:"block w-full sm:w-48 pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm rounded-md",value:l,onChange:h=>o(h.target.value),children:[r.jsx("option",{value:"all",children:"Tous les statuts"}),r.jsx("option",{value:"draft",children:"Brouillon"}),r.jsx("option",{value:"sent",children:"Envoyée"}),r.jsx("option",{value:"paid",children:"Payée"}),r.jsx("option",{value:"overdue",children:"En retard"}),r.jsx("option",{value:"cancelled",children:"Annulée"})]})]}),r.jsx("div",{className:"hidden md:block overflow-x-auto",children:r.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[r.jsx("thead",{className:"bg-gray-50",children:r.jsxs("tr",{children:[r.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"N° Facture"}),r.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Client"}),r.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),r.jsx("th",{scope:"col",className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Montant"}),r.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Statut"}),r.jsx("th",{scope:"col",className:"relative px-6 py-3",children:r.jsx("span",{className:"sr-only",children:"Actions"})})]})}),r.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:u.map(h=>{const y=e.find(g=>g.id===h.customerId);return r.jsxs("tr",{className:"hover:bg-gray-50",children:[r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:h.invoiceNumber}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:(y==null?void 0:y.name)||"Client inconnu"}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:Se(h.issueDate)}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 font-medium text-right",children:Y(h.total)}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:m(h.status)}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:r.jsxs("div",{className:"flex justify-end space-x-2",children:[r.jsx("button",{onClick:()=>a(h),className:"text-green-600 hover:text-green-900",title:"Télécharger PDF",children:r.jsx(Vu,{className:"h-5 w-5"})}),r.jsx("button",{onClick:()=>s(h),className:"text-blue-600 hover:text-blue-900",title:"Modifier",children:r.jsx(Qu,{className:"h-5 w-5"})}),r.jsx("button",{onClick:()=>n(h.id),className:"text-red-600 hover:text-red-900",title:"Supprimer",children:r.jsx(Wo,{className:"h-5 w-5"})})]})})]},`desktop-${h.id}`)})})]})}),r.jsx("div",{className:"md:hidden space-y-4",children:u.length>0?u.map(h=>{const y=e.find(g=>g.id===h.customerId);return r.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm border border-gray-100",children:[r.jsxs("div",{className:"flex justify-between items-start",children:[r.jsxs("div",{children:[r.jsxs("h3",{className:"text-sm font-medium text-gray-900",children:["N° ",h.invoiceNumber]}),r.jsx("p",{className:"text-sm text-gray-500 mt-1",children:(y==null?void 0:y.name)||"Client inconnu"})]}),r.jsxs("div",{className:"text-right",children:[r.jsx("div",{className:"text-sm font-medium text-gray-900",children:Y(h.total)}),r.jsx("div",{className:"mt-1",children:m(h.status)})]})]}),r.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-100 flex justify-between items-center",children:[r.jsx("p",{className:"text-sm text-gray-500",children:Se(h.issueDate)}),r.jsxs("div",{className:"flex space-x-2",children:[r.jsx("button",{onClick:()=>a(h),className:"text-green-600 hover:text-green-900 p-1",title:"Télécharger PDF",children:r.jsx(Vu,{className:"h-5 w-5"})}),r.jsx("button",{onClick:()=>s(h),className:"text-blue-600 hover:text-blue-900 p-1",title:"Modifier",children:r.jsx(Qu,{className:"h-5 w-5"})}),r.jsx("button",{onClick:()=>n(h.id),className:"text-red-600 hover:text-red-900 p-1",title:"Supprimer",children:r.jsx(Wo,{className:"h-5 w-5"})})]})]})]},`mobile-${h.id}`)}):r.jsx("div",{className:"text-center py-8 text-gray-500",children:"Aucune facture trouvée"})})]})},Ju=t=>{switch(t){case"draft":return{bg:"#FEF9C3",text:"#92400E"};case"sent":return{bg:"#DBEAFE",text:"#1E40AF"};case"paid":return{bg:"#D1FAE5",text:"#065F46"};case"overdue":return{bg:"#FEE2E2",text:"#B91C1C"};case"cancelled":return{bg:"#F3F4F6",text:"#6B7280"};default:return{bg:"#F3F4F6",text:"#111827"}}},T1=({invoice:t,onSave:e,onCancel:s})=>{const{customers:n,orders:a}=de(),[i,l]=v.useState(()=>{const d=[{id:`item_${Date.now()}`,description:"",quantity:1,unitPrice:0,total:0}];return t?{invoiceNumber:t.invoiceNumber,orderId:t.orderId,customerId:t.customerId,issueDate:new Date(t.issueDate),dueDate:new Date(t.dueDate),items:t.items,subtotal:t.subtotal,tax:t.tax,discount:t.discount,total:t.total,notes:t.notes||"",status:t.status}:{invoiceNumber:`INV-${Date.now()}`,orderId:"",customerId:"",issueDate:new Date,dueDate:new Date(Date.now()+30*24*60*60*1e3),items:d,subtotal:0,tax:0,discount:0,total:0,notes:"",status:"draft"}});v.useEffect(()=>{if(i.orderId){const d=a.find(u=>u.id===i.orderId);d&&d.customerId!==i.customerId&&l(u=>({...u,customerId:d.customerId}))}},[i.orderId,i.customerId,a]);const o=d=>{if(!d){l(m=>({...m,orderId:"",items:[{id:`item_${Date.now()}`,description:"",quantity:1,unitPrice:0,total:0}],subtotal:0,tax:0,total:0,discount:0}));return}const u=a.find(m=>m.id===d);if(u){let m=[];if((!u.items||u.items.length===0)&&(!u.services||u.services.length===0)){alert("Cette commande ne contient aucun article ou service.");return}if(u.items&&u.items.length>0&&(m=u.items.map((b,x)=>({id:`item_${Date.now()}_${x}`,description:b.productName||"Article sans nom",quantity:b.quantity||1,unitPrice:b.unitPrice||0,total:(b.quantity||1)*(b.unitPrice||0)}))),u.services&&u.services.length>0){const b=u.services.map((x,p)=>({id:`item_${Date.now()}_${p}_s`,description:x.name||"Service sans nom",quantity:1,unitPrice:x.price||0,total:x.price||0}));m=[...m,...b]}const h=m.reduce((b,x)=>b+(x.total||0),0),y=h*.2,g=h+y;l(b=>({...b,orderId:d,items:m,customerId:u.customerId,subtotal:h,tax:y,total:g,discount:0,issueDate:new Date,dueDate:new Date(Date.now()+30*24*60*60*1e3)}))}},c=d=>{d.preventDefault(),e(i)};return r.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-4 sm:p-6 max-w-5xl mx-auto",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6 gap-4",children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-800 w-full sm:w-auto",children:t?"Modifier la facture":"Nouvelle facture"}),r.jsxs("div",{className:"flex flex-col sm:flex-row w-full sm:w-auto gap-2 sm:space-x-2",children:[r.jsx("button",{type:"button",onClick:s,className:"px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50",children:"Annuler"}),r.jsx("button",{type:"submit",form:"invoice-form",className:"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700",children:"Enregistrer"})]})]}),r.jsxs("form",{id:"invoice-form",onSubmit:c,children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[r.jsx("div",{className:"md:col-span-2",children:r.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[r.jsx("h3",{className:"text-lg font-medium text-blue-800 mb-2",children:"Informations client"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{htmlFor:"customerId",className:"block text-sm font-medium text-gray-700",children:"Client *"}),r.jsxs("select",{id:"customerId",value:i.customerId,onChange:d=>l({...i,customerId:d.target.value}),className:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm rounded-md",required:!0,children:[r.jsx("option",{value:"",children:"Sélectionner un client"}),n.map(d=>r.jsx("option",{value:d.id,children:d.name},d.id))]})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"orderId",className:"block text-sm font-medium text-gray-700",children:"Commande associée *"}),r.jsxs("select",{id:"orderId",value:i.orderId,onChange:d=>o(d.target.value),className:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm rounded-md",required:!0,children:[r.jsx("option",{value:"",children:"Sélectionner une commande"}),a.filter(d=>!i.customerId||d.customerId===i.customerId).map(d=>{const u=n.find(m=>m.id===d.customerId);return r.jsxs("option",{value:d.id,children:["Commande #",d.id," - ",u==null?void 0:u.name," - ",Y(d.totalAmount)]},d.id)})]})]})]})]})}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{htmlFor:"invoiceNumber",className:"block text-sm font-medium text-gray-700",children:"Numéro de facture"}),r.jsx("input",{type:"text",id:"invoiceNumber",value:i.invoiceNumber,readOnly:!0,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm bg-gray-100"})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"status",className:"block text-sm font-medium text-gray-700",children:"Statut *"}),r.jsxs("div",{className:"relative",children:[r.jsxs("select",{id:"status",value:i.status,onChange:d=>l({...i,status:d.target.value}),className:"block w-full pl-3 pr-10 py-2.5 text-base border border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 sm:text-sm rounded-lg shadow-sm appearance-none cursor-pointer",style:{backgroundColor:Ju(i.status).bg,color:Ju(i.status).text,fontWeight:500,paddingRight:"2.5rem"},required:!0,children:[r.jsx("option",{value:"draft",className:"bg-white text-gray-900",children:"Brouillon"}),r.jsx("option",{value:"sent",className:"bg-white text-gray-900",children:"Envoyée"}),r.jsx("option",{value:"paid",className:"bg-white text-gray-900",children:"Payée"}),r.jsx("option",{value:"overdue",className:"bg-white text-gray-900",children:"En retard"}),r.jsx("option",{value:"cancelled",className:"bg-white text-gray-900",children:"Annulée"})]}),r.jsx("div",{className:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700",children:r.jsx("svg",{className:"fill-current h-4 w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",children:r.jsx("path",{d:"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"})})})]})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"issueDate",className:"block text-sm font-medium text-gray-700",children:"Date d'émission *"}),r.jsx("input",{type:"date",id:"issueDate",value:i.issueDate.toISOString().split("T")[0],onChange:d=>l({...i,issueDate:new Date(d.target.value)}),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"dueDate",className:"block text-sm font-medium text-gray-700",children:"Date d'échéance *"}),r.jsx("input",{type:"date",id:"dueDate",value:i.dueDate.toISOString().split("T")[0],onChange:d=>l({...i,dueDate:new Date(d.target.value)}),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",required:!0})]})]})]}),i.orderId&&i.items.length>0&&r.jsxs("div",{className:"mb-8",children:[r.jsx("div",{className:"flex justify-between items-center mb-2",children:r.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Articles de la commande"})}),r.jsx("div",{className:"overflow-x-auto -mx-4 sm:mx-0",children:r.jsx("div",{className:"inline-block min-w-full align-middle px-2 sm:px-0",children:r.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[r.jsx("thead",{className:"bg-gray-50 hidden sm:table-header-group",children:r.jsxs("tr",{children:[r.jsx("th",{scope:"col",className:"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Description"}),r.jsx("th",{scope:"col",className:"px-3 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Qté"}),r.jsx("th",{scope:"col",className:"px-3 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Prix unitaire"}),r.jsx("th",{scope:"col",className:"px-3 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total"})]})}),r.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:i.items.map((d,u)=>r.jsxs(fn.Fragment,{children:[r.jsx("tr",{className:"sm:hidden border-b border-gray-200",children:r.jsx("td",{colSpan:4,className:"px-3 py-4",children:r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Description"}),r.jsx("div",{className:"text-sm font-medium text-gray-900",children:d.description})]}),r.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[r.jsxs("div",{children:[r.jsx("span",{className:"text-xs font-medium text-gray-500",children:"Quantité"}),r.jsx("div",{className:"text-sm font-medium",children:d.quantity})]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-xs font-medium text-gray-500",children:"Prix unitaire"}),r.jsx("div",{className:"text-sm font-medium",children:Y(d.unitPrice)})]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-xs font-medium text-gray-500",children:"Total"}),r.jsx("div",{className:"text-sm font-medium",children:Y(d.total)})]})]})]})})}),r.jsxs("tr",{className:"hidden sm:table-row",children:[r.jsx("td",{className:"px-3 py-3 whitespace-nowrap text-sm text-gray-900",children:d.description}),r.jsx("td",{className:"px-3 py-3 whitespace-nowrap text-sm text-gray-900 text-right",children:d.quantity}),r.jsx("td",{className:"px-3 py-3 whitespace-nowrap text-sm text-gray-900 text-right",children:Y(d.unitPrice)}),r.jsx("td",{className:"px-3 py-3 whitespace-nowrap text-sm text-gray-900 text-right",children:Y(d.total)})]})]},u))})]})})})]}),!i.orderId&&r.jsx("div",{className:"mb-8 text-center py-8 bg-gray-50 rounded-lg",children:r.jsx("p",{className:"text-gray-500",children:"Sélectionnez une commande pour voir les articles"})}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[r.jsxs("div",{className:"md:col-span-2",children:[r.jsx("label",{htmlFor:"notes",className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes"}),r.jsx("textarea",{id:"notes",rows:3,value:i.notes||"",onChange:d=>l({...i,notes:d.target.value}),className:"shadow-sm focus:ring-blue-500 focus:border-blue-500 block w-full sm:text-sm border border-gray-300 rounded-md p-2",placeholder:"Notes ou conditions de paiement..."})]}),r.jsx("div",{className:"bg-gray-50 p-4 rounded-lg",children:r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-sm text-gray-600",children:"Sous-total"}),r.jsx("span",{className:"text-sm font-medium",children:Y(i.subtotal)})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-sm text-gray-600",children:"TVA (20%)"}),r.jsx("span",{className:"text-sm font-medium",children:Y(i.tax)})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-sm text-gray-600",children:"Remise"}),r.jsxs("div",{className:"flex items-center",children:[r.jsx("span",{className:"text-sm text-gray-500 mr-1",children:"€"}),r.jsx("input",{type:"number",min:"0",step:"0.01",value:i.discount,onChange:d=>{const u=Number(d.target.value);l({...i,discount:u,total:i.subtotal+i.tax-u})},className:"w-24 text-right border-0 border-b border-gray-300 focus:ring-0 focus:border-blue-500 py-0 px-1 text-sm"})]})]}),r.jsx("div",{className:"border-t border-gray-200 pt-2 mt-2",children:r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-base font-semibold",children:"Total"}),r.jsx("span",{className:"text-lg font-bold",children:Y(i.total)})]})})]})})]})]})]})},I1=()=>{const{invoices:t,customers:e,addInvoice:s,updateInvoice:n,deleteInvoice:a}=de(),[i,l]=v.useState(!1),[o,c]=v.useState(null),d=y=>{if(o){const g={...y,id:o.id,createdAt:o.createdAt,updatedAt:new Date,status:y.status||o.status};n(g)}else s(y);l(!1),c(null)},u=y=>{c(y),l(!0)},m=y=>{if(window.confirm("Êtes-vous sûr de vouloir supprimer cette facture ?"))try{a(y),console.log("Facture supprimée avec succès:",y)}catch(g){console.error("Erreur lors de la suppression:",g),alert("Erreur lors de la suppression de la facture")}},h=()=>{l(!1),c(null)};return i||o?r.jsx("div",{className:"container mx-auto px-4 py-6",children:r.jsx(T1,{invoice:o||void 0,onSave:d,onCancel:h})}):r.jsx("div",{className:"container mx-auto px-4 py-6",children:r.jsx(E1,{invoices:t,customers:e,onEdit:u,onDelete:m,onGeneratePdf:()=>console.log("PDF generation not implemented yet"),onCreateNew:()=>l(!0)})})},P1=()=>{const{clientAccess:t,customers:e,updateClientAccess:s}=de(),[n,a]=v.useState(""),[i,l]=v.useState(""),[o,c]=v.useState(!1),d=jt(),u=async m=>{m.preventDefault(),c(!0),l(""),setTimeout(()=>{const h=t.find(y=>y.accessCode===n.toUpperCase()&&y.isActive);if(h){const y=e.find(g=>g.id===h.customerId);y?(sessionStorage.setItem("clientAccess",JSON.stringify(h)),sessionStorage.setItem("clientCustomer",JSON.stringify(y)),s({...h,lastLogin:new Date}),d("/client-portal")):l("Client non trouvé")}else l("Code d'accès invalide ou inactif");c(!1)},1e3)};return r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:r.jsxs("div",{className:"max-w-md w-full space-y-8",children:[r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"mx-auto h-16 w-16 bg-blue-600 rounded-full flex items-center justify-center",children:r.jsx("svg",{className:"h-8 w-8 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})})}),r.jsx("h2",{className:"mt-6 text-3xl font-extrabold text-gray-900",children:"Portail Client Blanchisserie"}),r.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Accédez à votre espace personnel avec votre code d'accès"})]}),r.jsx("form",{className:"mt-8 space-y-6",onSubmit:u,children:r.jsxs("div",{className:"bg-white py-8 px-6 shadow-lg rounded-lg",children:[r.jsxs("div",{children:[r.jsx("label",{htmlFor:"access-code",className:"block text-sm font-medium text-gray-700 mb-2",children:"Code d'accès"}),r.jsx("input",{id:"access-code",name:"access-code",type:"text",required:!0,className:"appearance-none relative block w-full px-3 py-3 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm",placeholder:"Entrez votre code d'accès",value:n,onChange:m=>a(m.target.value),disabled:o})]}),i&&r.jsx("div",{className:"mt-4 bg-red-50 border border-red-200 rounded-md p-4",children:r.jsxs("div",{className:"flex",children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsx("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:r.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),r.jsx("div",{className:"ml-3",children:r.jsx("p",{className:"text-sm text-red-800",children:i})})]})}),r.jsx("div",{className:"mt-6",children:r.jsx("button",{type:"submit",disabled:o||!n.trim(),className:"group relative w-full flex justify-center py-3 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed",children:o?r.jsxs("div",{className:"flex items-center",children:[r.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[r.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),r.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Connexion..."]}):"Se connecter"})})]})}),r.jsxs("div",{className:"bg-white rounded-lg p-6 shadow-lg",children:[r.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Codes d'accès de démonstration"}),r.jsxs("div",{className:"space-y-2 text-sm",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-600",children:"Jean Dupont:"}),r.jsx("span",{className:"font-mono bg-gray-100 px-2 py-1 rounded",children:"JEAN2025"})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-600",children:"Marie Martin:"}),r.jsx("span",{className:"font-mono bg-gray-100 px-2 py-1 rounded",children:"MARIE789"})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-600",children:"Robert Bernard:"}),r.jsx("span",{className:"font-mono bg-gray-100 px-2 py-1 rounded",children:"ROBERT456"})]})]})]})]})})},A1=()=>{const{servicePacks:t,clientOrders:e,addClientOrder:s,customers:n,inventoryItems:a}=de(),[i,l]=v.useState(null),[o,c]=v.useState(null),[d,u]=v.useState("all"),[m,h]=v.useState([]),[y,g]=v.useState(!1),[b,x]=v.useState(!1),[p,f]=v.useState(null),[w,j]=v.useState(!1),_=jt();v.useEffect(()=>{const T=sessionStorage.getItem("clientAccess"),P=sessionStorage.getItem("clientCustomer");if(!T||!P){_("/client-login");return}l(JSON.parse(T)),c(JSON.parse(P))},[_]);const N=()=>{sessionStorage.removeItem("clientAccess"),sessionStorage.removeItem("clientCustomer"),_("/client-login")},k=t.filter(T=>T.isActive&&(d==="all"||T.category===d)),S=(T,P=1)=>!i||!o?{available:!1,shortages:[]}:(i.id,o.id,T.id,T.name,T.totalPrice,T.totalPrice*P,T.totalPrice*P,{available:!0,missingItems:[]}),O=T=>{const P=m.find(D=>D.pack.id===T.id),V=P?P.quantity+1:1,I=S(T,V);if(!I.available){alert(`Stock insuffisant pour ce pack. Articles manquants: ${I.shortages.map(D=>`${D.itemName} (requis: ${D.required}, disponible: ${D.available})`).join(", ")}`);return}h(P?m.map(D=>D.pack.id===T.id?{...D,quantity:D.quantity+1}:D):[...m,{pack:T,quantity:1}])},L=T=>{h(m.filter(P=>P.pack.id!==T))},E=(T,P)=>{P<=0?L(T):h(m.map(V=>V.pack.id===T?{...V,quantity:P}:V))},W=()=>m.reduce((T,P)=>T+P.pack.totalPrice*P.quantity,0),C=async()=>{if(!(m.length===0||!i||!o)){j(!0),f(null);try{s({clientAccessId:i.id,customerId:o.id,packs:m.map(T=>({packId:T.pack.id,packName:T.pack.name,quantity:T.quantity,unitPrice:T.pack.totalPrice,total:T.pack.totalPrice*T.quantity})),totalAmount:W(),status:"en_attente",notes:"Commande passée via le portail client"}),h([]),g(!1),alert("Commande passée avec succès ! Vous recevrez une confirmation par email.")}catch(T){console.error("Erreur lors de la création de la commande:",T),f(T instanceof Error?T.message:"Une erreur est survenue lors de la création de la commande.")}finally{j(!1)}}},B=T=>({standard:"Standard",express:"Express",premium:"Premium",literie:"Literie",professionnel:"Professionnel"})[T];return o?r.jsx("div",{className:"min-h-screen w-full overflow-x-hidden bg-gradient-to-br from-blue-50 to-indigo-50",children:r.jsxs("div",{className:"max-w-7xl mx-auto w-full px-2 py-3 sm:px-4 sm:py-4",children:[r.jsx("header",{className:"bg-white/95 backdrop-blur-xl shadow-sm sm:shadow-md border-b border-gray-100 sticky top-0 z-50",children:r.jsx("div",{className:"w-full px-3 sm:px-4",children:r.jsxs("div",{className:"flex justify-between items-center py-3 min-h-[60px]",children:[r.jsxs("div",{className:"flex items-center space-x-3 flex-1 min-w-0",children:[r.jsxs("div",{className:"relative group flex-shrink-0",children:[r.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-500 via-indigo-500 to-purple-600 rounded-2xl blur-lg opacity-60 group-hover:opacity-90 transition-all duration-500 animate-pulse"}),r.jsx("div",{className:"relative h-12 w-12 sm:h-14 sm:w-14 lg:h-16 lg:w-16 bg-gradient-to-br from-blue-600 via-indigo-600 to-purple-700 rounded-2xl flex items-center justify-center shadow-2xl transform group-hover:scale-110 group-hover:rotate-3 transition-all duration-500",children:r.jsx("svg",{className:"h-6 w-6 sm:h-8 sm:w-8 lg:h-9 lg:w-9 text-white drop-shadow-lg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})})})]}),r.jsxs("div",{className:"relative min-w-0 flex-1",children:[r.jsx("h1",{className:"text-base sm:text-2xl lg:text-3xl font-black bg-gradient-to-r from-gray-900 via-blue-800 to-indigo-900 bg-clip-text text-transparent tracking-tight truncate",children:"Portail Client"}),r.jsxs("div",{className:"flex items-center mt-0.5 sm:mt-1",children:[r.jsxs("div",{className:"relative inline-flex h-2 w-2 sm:h-3 sm:w-3 mr-2 flex-shrink-0",children:[r.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-emerald-400 opacity-75"}),r.jsx("span",{className:"relative inline-flex rounded-full h-2 w-2 sm:h-3 sm:w-3 bg-emerald-500 shadow-lg"})]}),r.jsxs("p",{className:"text-xs sm:text-base lg:text-lg text-gray-700 font-semibold truncate",children:["Bienvenue, ",r.jsx("span",{className:"bg-gradient-to-r from-indigo-600 to-purple-600 bg-clip-text text-transparent font-bold",children:o.name})]})]})]})]}),r.jsxs("div",{className:"flex items-center space-x-2 flex-shrink-0",children:[r.jsxs("button",{onClick:()=>_("/client-orders"),className:"group relative overflow-hidden px-3 py-2.5 sm:px-5 sm:py-3 bg-gradient-to-r from-indigo-500 to-purple-600 hover:from-indigo-600 hover:to-purple-700 text-white rounded-xl shadow-xl hover:shadow-2xl transition-all duration-300 transform hover:scale-105 font-bold text-xs sm:text-sm flex items-center justify-center min-w-[44px] min-h-[44px]",children:[r.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-white/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),r.jsxs("div",{className:"relative flex items-center",children:[r.jsx("svg",{className:"h-5 w-5 sm:mr-2 transition-transform group-hover:rotate-12 flex-shrink-0",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})}),r.jsx("span",{className:"hidden sm:inline whitespace-nowrap",children:"Mes Commandes"})]})]}),r.jsxs("button",{onClick:()=>g(!0),className:"group relative p-2.5 bg-gradient-to-r from-blue-500 to-cyan-500 hover:from-blue-600 hover:to-cyan-600 text-white rounded-xl shadow-xl hover:shadow-2xl transition-all duration-300 transform hover:scale-110 min-w-[44px] min-h-[44px] flex items-center justify-center","aria-label":"Panier",children:[r.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-white/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300 rounded-xl"}),r.jsxs("div",{className:"relative",children:[r.jsx("svg",{className:"h-5 w-5 transition-transform duration-300 group-hover:scale-110",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M3 3h2l.4 2M7 13h10l4-8H5.4m0 0L7 13m0 0l-2.5 2.5M7 13l2.5 2.5"})}),m.length>0&&r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"absolute -top-2 -right-2 bg-gradient-to-r from-red-500 to-pink-500 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center shadow-xl border-2 border-white animate-bounce",children:m.reduce((T,P)=>T+P.quantity,0)}),r.jsx("div",{className:"absolute -top-1 -right-1 w-6 h-6 rounded-full bg-pink-400 opacity-30 animate-ping"})]})]})]}),r.jsxs("div",{className:"hidden md:block relative group",children:[r.jsxs("button",{onClick:N,className:"group/logout relative overflow-hidden px-3 py-2.5 sm:px-5 sm:py-3 bg-gradient-to-r from-gray-600 to-gray-700 hover:from-gray-700 hover:to-gray-800 text-white rounded-xl shadow-xl hover:shadow-2xl transition-all duration-300 transform hover:scale-105 font-bold text-xs sm:text-sm flex items-center justify-center min-w-[44px] min-h-[44px]",children:[r.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-white/10 to-transparent opacity-0 group-hover/logout:opacity-100 transition-opacity duration-300"}),r.jsxs("div",{className:"relative flex items-center",children:[r.jsx("svg",{className:"h-5 w-5 sm:mr-2 transition-transform group-hover/logout:translate-x-1 flex-shrink-0",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),r.jsx("span",{className:"hidden sm:inline whitespace-nowrap",children:"Déconnexion"})]})]}),r.jsx("div",{className:"absolute -bottom-12 left-1/2 transform -translate-x-1/2 opacity-0 group-hover:opacity-100 transition-all duration-300 pointer-events-none",children:r.jsxs("div",{className:"bg-gray-900 text-white text-xs rounded-lg py-2 px-3 whitespace-nowrap shadow-xl",children:["Se déconnecter du portail",r.jsx("div",{className:"absolute -top-1 left-1/2 transform -translate-x-1/2 rotate-45 w-2 h-2 bg-gray-900"})]})})]}),r.jsx("button",{onClick:N,className:"md:hidden p-2.5 bg-gradient-to-r from-gray-600 to-gray-700 hover:from-gray-700 hover:to-gray-800 text-white rounded-xl shadow-xl hover:shadow-2xl transition-all duration-300 transform hover:scale-110 min-w-[44px] min-h-[44px] flex items-center justify-center","aria-label":"Déconnexion",children:r.jsx("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})})})]})]})})}),r.jsxs("div",{className:"w-full px-2 py-3 sm:px-4 sm:py-4",children:[r.jsx("div",{className:"w-full",children:r.jsx("div",{className:"w-full",children:r.jsxs("div",{className:"bg-white/90 backdrop-blur-sm rounded-xl sm:rounded-2xl shadow-md border border-white/30 p-3 sm:p-4 transition-all duration-300 w-full",children:[r.jsxs("div",{className:"text-center mb-10 relative",children:[r.jsx("div",{className:"absolute -top-2 left-1/2 transform -translate-x-1/2 w-24 h-1 bg-gradient-to-r from-blue-500 to-indigo-500 rounded-full"}),r.jsx("h2",{className:"text-3xl lg:text-4xl font-bold bg-gradient-to-r from-blue-600 via-indigo-600 to-purple-600 bg-clip-text text-transparent mb-3 inline-block",children:"Nos Packs de Services"}),r.jsxs("p",{className:"text-gray-600 text-lg max-w-2xl mx-auto relative",children:[r.jsxs("span",{className:"relative z-10 bg-gradient-to-r from-blue-50 to-indigo-50 px-4 py-1 rounded-full",children:["Choisissez le pack qui vous convient le mieux ",r.jsx("span",{className:"animate-bounce inline-block",children:"✨"})]}),r.jsx("span",{className:"absolute inset-0 bg-gradient-to-r from-blue-100 to-indigo-100 blur-lg opacity-50 rounded-full"})]})]}),r.jsxs("div",{className:"mb-6 sm:mb-8",children:[r.jsx("div",{className:"sm:hidden mb-4",children:r.jsxs("button",{onClick:()=>x(!b),className:"w-full flex items-center justify-between px-4 py-3 bg-gradient-to-r from-blue-600 to-indigo-600 text-white rounded-xl shadow-lg hover:shadow-xl transition-all duration-300 transform hover:scale-105 font-semibold",children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx("svg",{className:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"})}),r.jsx("span",{children:"Filtrer par catégorie"}),d!=="all"&&r.jsxs("span",{className:"ml-2 px-2 py-1 bg-white/20 rounded-full text-xs",children:[d==="standard"&&"📚",d==="express"&&"⚡️",d==="premium"&&"💎",d==="literie"&&"🛏️",d==="professionnel"&&"💼"]})]}),r.jsx("svg",{className:`h-5 w-5 transition-transform duration-300 ${b?"rotate-180":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]})}),r.jsxs("div",{className:"hidden sm:flex flex-wrap justify-center gap-3",children:[r.jsx("button",{onClick:()=>u("all"),className:`px-5 py-2.5 rounded-xl text-sm font-semibold transition-all duration-300 transform hover:scale-105 shadow-lg ${d==="all"?"bg-gradient-to-r from-blue-600 to-indigo-600 text-white shadow-lg shadow-blue-200/50":"bg-white/90 text-gray-700 hover:bg-white hover:shadow-xl border border-gray-200/80 hover:border-gray-300"}`,children:r.jsxs("span",{className:"flex items-center",children:[r.jsx("span",{className:"mr-1.5",children:"✨"})," Tous les packs"]})}),[{key:"standard",label:"Standard",emoji:"📚",color:"from-gray-500 to-gray-600",hover:"hover:from-gray-600 hover:to-gray-700"},{key:"express",label:"Express",emoji:"⚡️",color:"from-orange-500 to-red-500",hover:"hover:from-orange-600 hover:to-red-600"},{key:"premium",label:"Premium",emoji:"💎",color:"from-purple-500 to-pink-500",hover:"hover:from-purple-600 hover:to-pink-600"},{key:"literie",label:"Literie",emoji:"🛏️",color:"from-green-500 to-teal-500",hover:"hover:from-green-600 hover:to-teal-600"},{key:"professionnel",label:"Pro",emoji:"💼",color:"from-blue-500 to-indigo-500",hover:"hover:from-blue-600 hover:to-indigo-600"}].map(({key:T,label:P,emoji:V,color:I,hover:D})=>r.jsxs("button",{onClick:()=>u(T),className:`px-5 py-2.5 rounded-xl text-sm font-semibold transition-all duration-300 transform hover:scale-105 shadow-lg flex items-center ${d===T?`bg-gradient-to-r ${I} text-white shadow-lg ${D.replace("hover:","shadow-")}200/50`:`bg-white/90 text-gray-700 hover:bg-white hover:shadow-xl border border-gray-200/80 hover:border-gray-300 ${D}`}`,children:[r.jsx("span",{className:"mr-1.5",children:V})," ",P]},T))]}),r.jsx("div",{className:`sm:hidden transition-all duration-300 ease-in-out overflow-hidden ${b?"max-h-96 opacity-100":"max-h-0 opacity-0"}`,children:r.jsx("div",{className:"bg-white/95 backdrop-blur-sm rounded-xl shadow-lg border border-white/30 p-4 mt-2",children:r.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[r.jsx("button",{onClick:()=>{u("all"),x(!1)},className:`px-4 py-3 rounded-lg text-sm font-semibold transition-all duration-300 transform hover:scale-105 shadow-md ${d==="all"?"bg-gradient-to-r from-blue-600 to-indigo-600 text-white shadow-lg shadow-blue-200/50":"bg-white text-gray-700 hover:bg-gray-50 hover:shadow-lg border border-gray-200"}`,children:r.jsxs("div",{className:"flex flex-col items-center",children:[r.jsx("span",{className:"text-lg mb-1",children:"✨"}),r.jsx("span",{className:"text-xs",children:"Tous"})]})}),[{key:"standard",label:"Standard",emoji:"📚",color:"from-gray-500 to-gray-600"},{key:"express",label:"Express",emoji:"⚡️",color:"from-orange-500 to-red-500"},{key:"premium",label:"Premium",emoji:"💎",color:"from-purple-500 to-pink-500"},{key:"literie",label:"Literie",emoji:"🛏️",color:"from-green-500 to-teal-500"},{key:"professionnel",label:"Pro",emoji:"💼",color:"from-blue-500 to-indigo-500"}].map(({key:T,label:P,emoji:V,color:I})=>r.jsx("button",{onClick:()=>{u(T),x(!1)},className:`px-4 py-3 rounded-lg text-sm font-semibold transition-all duration-300 transform hover:scale-105 shadow-md ${d===T?`bg-gradient-to-r ${I} text-white shadow-lg`:"bg-white text-gray-700 hover:bg-gray-50 hover:shadow-lg border border-gray-200"}`,children:r.jsxs("div",{className:"flex flex-col items-center",children:[r.jsx("span",{className:"text-lg mb-1",children:V}),r.jsx("span",{className:"text-xs",children:P})]})},T))]})})})]}),r.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6 sm:gap-4 auto-rows-fr",children:k.map((T,P)=>{const V=S(T,1),I={express:{gradient:"from-orange-500 to-red-500",hoverGradient:"from-orange-600 to-red-600",emoji:"⚡️",bgGradient:"from-orange-50 to-red-50",shadow:"shadow-orange-200/50"},premium:{gradient:"from-purple-500 to-pink-500",hoverGradient:"from-purple-600 to-pink-600",emoji:"💎",bgGradient:"from-purple-50 to-pink-50",shadow:"shadow-purple-200/50"},literie:{gradient:"from-green-500 to-teal-500",hoverGradient:"from-green-600 to-teal-600",emoji:"🛏️",bgGradient:"from-green-50 to-teal-50",shadow:"shadow-green-200/50"},professionnel:{gradient:"from-blue-500 to-indigo-500",hoverGradient:"from-blue-600 to-indigo-600",emoji:"💼",bgGradient:"from-blue-50 to-indigo-50",shadow:"shadow-blue-200/50"},standard:{gradient:"from-gray-500 to-gray-600",hoverGradient:"from-gray-600 to-gray-700",emoji:"📚",bgGradient:"from-gray-50 to-gray-100",shadow:"shadow-gray-200/50"}},D=I[T.category]||I.standard;return r.jsxs("div",{className:`group relative bg-gradient-to-br ${D.bgGradient} rounded-lg p-4 mb-4 sm:mb-0 hover:shadow-md transition-all duration-200 transform hover:-translate-y-0.5 border border-white/50 hover:border-white/70 animate-fade-in overflow-hidden w-full h-full flex flex-col`,style:{animationDelay:`${P*100}ms`,boxShadow:"0 4px 16px -4px rgba(0, 0, 0, 0.1)",minHeight:"480px",maxHeight:"480px"},children:[r.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-white/30 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-500 pointer-events-none"}),r.jsxs("div",{className:`absolute top-2 right-2 bg-gradient-to-r ${D.gradient} text-white px-3 py-1.5 rounded-lg text-xs font-bold shadow-lg transform rotate-12 group-hover:rotate-6 group-hover:scale-105 transition-all duration-200 flex items-center z-20 border border-white/30 min-w-max`,children:[r.jsx("span",{className:"text-xs mr-1.5",children:D.emoji}),r.jsx("span",{className:"text-xs whitespace-nowrap",children:B(T.category)})]}),r.jsxs("div",{className:"relative z-10 flex flex-col h-full pt-3 sm:pt-4",children:[r.jsxs("div",{className:"mb-4 sm:mb-6",children:[r.jsx("h3",{className:"text-lg sm:text-xl font-bold text-gray-900 mb-2 sm:mb-3 group-hover:text-gray-800 transition-colors leading-tight min-h-[2.5rem] sm:min-h-[3rem] flex items-center pr-12 sm:pr-16",children:T.name}),r.jsx("p",{className:"text-gray-600 text-xs sm:text-sm leading-relaxed min-h-[2rem] sm:min-h-[2.5rem]",children:T.description})]}),r.jsxs("div",{className:"bg-white/80 rounded-xl p-3 sm:p-4 mb-3 sm:mb-4 backdrop-blur-sm border border-white/60 shadow-sm flex-1",style:{minHeight:"160px",maxHeight:"160px"},children:[r.jsxs("h4",{className:"text-xs sm:text-sm font-semibold text-gray-700 mb-2 sm:mb-3 flex items-center",children:[r.jsx("svg",{className:"h-3 w-3 sm:h-4 sm:w-4 mr-1.5 sm:mr-2 text-indigo-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})}),"Services inclus"]}),r.jsx("div",{className:"space-y-1.5 overflow-y-auto",style:{maxHeight:"120px"},children:T.services.map((F,ee)=>r.jsxs("div",{className:"flex justify-between items-start text-xs group/item p-1.5 rounded-lg hover:bg-white/50 transition-colors",style:{transitionDelay:`${ee*50}ms`},children:[r.jsxs("span",{className:"text-gray-600 flex-1 flex items-start",children:[r.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-gradient-to-r from-indigo-400 to-purple-400 mr-2 mt-1 group-hover/item:scale-110 transition-transform flex-shrink-0"}),r.jsx("span",{className:"font-medium text-xs leading-tight",children:F.serviceName})]}),r.jsxs("span",{className:"font-bold text-gray-900 bg-gradient-to-r from-white to-gray-50 px-2 py-0.5 rounded text-xs border border-gray-200 shadow-sm whitespace-nowrap ml-2 flex-shrink-0",children:[(F.quantity*F.unitPrice).toFixed(2),"€"]})]},F.serviceId))})]}),r.jsxs("div",{className:"mt-auto pt-2 sm:pt-3 border-t border-white/30",children:[r.jsx("div",{className:"w-full",children:r.jsx("div",{className:"text-center mb-2 sm:mb-3",children:r.jsxs("div",{className:"flex flex-col items-center justify-center space-y-1",children:[r.jsxs("span",{className:`text-xl sm:text-2xl font-bold bg-gradient-to-r ${D.gradient} bg-clip-text text-transparent`,children:[T.totalPrice.toFixed(2),"€"]}),r.jsxs("div",{className:"flex items-center text-gray-500",children:[r.jsx("svg",{className:"h-3 w-3 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),r.jsxs("span",{className:"text-xs",children:["Délai: ",T.estimatedTime,"h"]})]})]})})}),r.jsxs("div",{className:"w-full",children:[r.jsx("button",{onClick:()=>O(T),disabled:!V.available,className:`w-full px-4 py-2.5 sm:py-3 text-xs sm:text-sm font-bold rounded-xl transition-all transform hover:scale-105 shadow-lg ${V.available?`bg-gradient-to-r ${D.gradient} hover:${D.hoverGradient} text-white ${D.shadow} hover:shadow-xl`:"bg-gray-200 text-gray-500 cursor-not-allowed shadow-none"}`,children:V.available?r.jsxs("span",{className:"flex items-center justify-center",children:[r.jsx("svg",{className:"h-4 w-4 mr-1.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),r.jsx("span",{className:"hidden sm:inline",children:"Ajouter au panier"}),r.jsx("span",{className:"sm:hidden",children:"Ajouter"})]}):r.jsxs("span",{className:"flex items-center justify-center",children:[r.jsx("svg",{className:"h-4 w-4 mr-1.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),r.jsx("span",{className:"hidden sm:inline",children:"Stock insuffisant"}),r.jsx("span",{className:"sm:hidden",children:"Indisponible"})]})}),!V.available&&r.jsx("p",{className:"text-xs text-red-600 mt-2 text-center bg-red-50 px-2 py-1 rounded-full border border-red-200",children:r.jsxs("span",{className:"inline-flex items-center",children:[r.jsx("span",{className:"w-1.5 h-1.5 bg-red-500 rounded-full mr-1 animate-pulse"}),r.jsx("span",{className:"font-medium text-xs",children:"Stock limité"})]})})]})]})]})]},T.id)})})]})})}),y&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:r.jsx("div",{className:"bg-white rounded-2xl w-full max-w-md max-h-[90vh] overflow-y-auto",children:r.jsxs("div",{className:"p-6",children:[r.jsxs("div",{className:"flex justify-between items-center mb-6",children:[r.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"Votre Panier"}),r.jsx("button",{onClick:()=>g(!1),className:"text-gray-400 hover:text-gray-500",children:r.jsx("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),m.length===0?r.jsxs("div",{className:"text-center py-8",children:[r.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:r.jsx("svg",{className:"h-8 w-8 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 3h2l.4 2M7 13h10l4-8H5.4m0 0L7 13m0 0l-2.5 2.5M7 13l2.5 2.5"})})}),r.jsx("h4",{className:"text-xl font-bold text-gray-700 mb-2",children:"Votre panier est vide"}),r.jsx("p",{className:"text-gray-500 mb-6",children:"Ajoutez des packs pour commencer vos achats 🛒"}),r.jsx("button",{onClick:()=>g(!1),className:"px-6 py-3 bg-gradient-to-r from-blue-600 to-indigo-600 text-white rounded-xl font-semibold hover:shadow-lg transform hover:scale-105 transition-all duration-300",children:"Continuer mes achats"})]}):r.jsxs("div",{children:[r.jsx("div",{className:"space-y-4 mb-6",children:m.map(T=>r.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("button",{onClick:()=>L(T.pack.id),className:"text-gray-400 hover:text-red-500 transition-colors","aria-label":"Supprimer du panier",children:r.jsx("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-medium text-gray-900",children:T.pack.name}),r.jsxs("div",{className:"flex items-center mt-1",children:[r.jsx("button",{onClick:()=>E(T.pack.id,T.quantity-1),className:"w-6 h-6 flex items-center justify-center border border-gray-300 rounded-md text-gray-500 hover:bg-gray-100","aria-label":"Réduire la quantité",children:"-"}),r.jsx("span",{className:"mx-2 w-8 text-center",children:T.quantity}),r.jsx("button",{onClick:()=>E(T.pack.id,T.quantity+1),className:"w-6 h-6 flex items-center justify-center border border-gray-300 rounded-md text-gray-500 hover:bg-gray-100","aria-label":"Augmenter la quantité",children:"+"})]})]})]}),r.jsxs("span",{className:"font-medium",children:[(T.pack.totalPrice*T.quantity).toFixed(2),"€"]})]},T.pack.id))}),r.jsxs("div",{className:"border-t border-gray-200 pt-4 mb-6",children:[r.jsxs("div",{className:"flex justify-between items-center mb-2",children:[r.jsx("span",{className:"text-gray-600",children:"Total"}),r.jsxs("div",{className:"flex items-baseline",children:[r.jsxs("span",{className:"text-xl font-bold text-gray-900",children:[W().toFixed(2),"€"]}),r.jsx("span",{className:"text-sm text-gray-500 ml-1",children:"TTC"})]})]}),r.jsxs("div",{className:"text-right text-sm text-gray-500",children:[r.jsx("div",{children:"🚚 Livraison estimée"}),r.jsx("div",{className:"font-semibold text-gray-700",children:"2-3 jours ouvrés"})]})]}),p&&r.jsx("div",{className:"mb-6 p-4 bg-gradient-to-r from-red-50 to-pink-50 border border-red-200 rounded-2xl",children:r.jsxs("div",{className:"flex",children:[r.jsx("div",{className:"flex-shrink-0 w-8 h-8 bg-red-100 rounded-full flex items-center justify-center mr-3",children:r.jsx("svg",{className:"h-5 w-5 text-red-500",viewBox:"0 0 20 20",fill:"currentColor",children:r.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-sm font-bold text-red-800 mb-1",children:"⚠️ Commande impossible"}),r.jsxs("div",{className:"text-sm text-red-700",children:[r.jsx("p",{className:"mb-1",children:p}),r.jsx("p",{className:"text-xs",children:"Veuillez réduire les quantités ou contacter notre service client."})]})]})]})}),r.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[r.jsx("button",{onClick:()=>g(!1),className:"flex-1 py-4 px-6 bg-white border-2 border-gray-200 text-gray-700 rounded-2xl font-semibold hover:bg-gray-50 hover:border-gray-300 transition-all duration-300 transform hover:scale-105",children:"Continuer mes achats"}),r.jsx("button",{onClick:C,disabled:w,className:`flex-1 py-4 px-6 rounded-2xl font-bold transition-all duration-300 transform hover:scale-105 shadow-lg ${w?"bg-gray-400 text-gray-700 cursor-not-allowed":"bg-gradient-to-r from-blue-600 to-indigo-600 text-white hover:shadow-xl hover:shadow-blue-200"}`,children:w?r.jsxs("span",{className:"flex items-center justify-center",children:[r.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[r.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),r.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Traitement en cours..."]}):r.jsxs("span",{className:"flex items-center justify-center",children:[r.jsx("svg",{className:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Passer la commande 🚀"]})})]})]})]})})})]})]})}):r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 flex items-center justify-center",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-t-4 border-b-4 border-blue-600 mx-auto mb-4"}),r.jsx("p",{className:"text-lg font-medium text-gray-700",children:"Chargement de votre espace..."})]})})},L1=()=>{const{clientOrders:t}=de(),[e,s]=v.useState(null),[n,a]=v.useState(null),i=jt();v.useEffect(()=>{const m=sessionStorage.getItem("clientAccess"),h=sessionStorage.getItem("clientCustomer");if(!m||!h){i("/client-login");return}s(JSON.parse(m)),a(JSON.parse(h))},[i]);const l=()=>{sessionStorage.removeItem("clientAccess"),sessionStorage.removeItem("clientCustomer"),i("/client-login")},o=m=>({en_attente:"En attente",en_traitement:"En traitement",lavage:"En lavage",sechage:"En séchage",pliage:"En pliage",pret:"Prêt",livre:"Livré",annule:"Annulé"})[m]||m,c=m=>({en_attente:"bg-yellow-100 text-yellow-800 border-yellow-200",en_traitement:"bg-blue-100 text-blue-800 border-blue-200",lavage:"bg-indigo-100 text-indigo-800 border-indigo-200",sechage:"bg-purple-100 text-purple-800 border-purple-200",pliage:"bg-pink-100 text-pink-800 border-pink-200",pret:"bg-green-100 text-green-800 border-green-200",livre:"bg-gray-100 text-gray-800 border-gray-200",annule:"bg-red-100 text-red-800 border-red-200"})[m]||"bg-gray-100 text-gray-800 border-gray-200",d=m=>({en_attente:"⏳",en_traitement:"🔄",lavage:"🧺",sechage:"🌪️",pliage:"👕",pret:"✅",livre:"🚚",annule:"❌"})[m]||"📋";if(!n)return r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 flex items-center justify-center",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-t-4 border-b-4 border-blue-600 mx-auto mb-4"}),r.jsx("p",{className:"text-lg font-medium text-gray-700",children:"Chargement de vos commandes..."})]})});const u=e?t.filter(m=>m.clientAccessId===e.id):[];return r.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50",children:[r.jsx("header",{className:"bg-white/90 backdrop-blur-lg shadow-xl border-b border-white/30 sticky top-0 z-50 transition-all duration-300 hover:shadow-2xl",children:r.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:r.jsxs("div",{className:"flex justify-between items-center py-3 lg:py-4",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsxs("div",{className:"relative group",children:[r.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-500 to-indigo-600 rounded-xl blur opacity-75 group-hover:opacity-100 transition-opacity duration-300"}),r.jsx("div",{className:"relative h-10 w-10 lg:h-12 lg:w-12 bg-gradient-to-r from-blue-600 to-indigo-600 rounded-xl flex items-center justify-center shadow-lg transform group-hover:scale-105 transition-all duration-300",children:r.jsx("svg",{className:"h-6 w-6 lg:h-7 lg:w-7 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})})})]}),r.jsxs("div",{className:"relative",children:[r.jsx("h1",{className:"text-xl lg:text-2xl font-bold bg-gradient-to-r from-gray-900 to-gray-800 bg-clip-text text-transparent",children:"Mes Commandes"}),r.jsxs("p",{className:"text-sm lg:text-base text-gray-600 font-medium flex items-center",children:[r.jsxs("span",{className:"relative inline-flex h-2 w-2 mr-2",children:[r.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-green-400 opacity-75"}),r.jsx("span",{className:"relative inline-flex rounded-full h-2 w-2 bg-green-500"})]}),"Bienvenue, ",r.jsx("span",{className:"ml-1 font-semibold text-indigo-600",children:n.name})]})]})]}),r.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-3",children:[r.jsxs("button",{onClick:()=>i("/client-portal"),className:"px-4 py-2.5 lg:px-5 lg:py-2.5 text-gray-600 hover:text-white bg-white hover:bg-gradient-to-r hover:from-blue-600 hover:to-indigo-600 rounded-xl shadow-lg hover:shadow-xl transition-all duration-300 transform hover:scale-105 font-medium",children:[r.jsx("svg",{className:"h-4 w-4 mr-1.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),r.jsx("span",{children:"Retour au portail"})]}),r.jsx("div",{className:"hidden sm:block relative group",children:r.jsxs("button",{onClick:l,className:"flex items-center px-4 py-2.5 lg:px-5 lg:py-2.5 text-gray-600 hover:text-white bg-white hover:bg-gradient-to-r hover:from-gray-700 hover:to-gray-800 rounded-xl shadow-lg hover:shadow-xl transition-all duration-300 transform hover:scale-105 font-medium group-hover:translate-x-0.5",children:[r.jsx("svg",{className:"h-4 w-4 mr-1.5 transition-transform group-hover:translate-x-0.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),r.jsx("span",{children:"Déconnexion"})]})}),r.jsx("button",{onClick:l,className:"sm:hidden p-2.5 text-gray-600 hover:text-white bg-white hover:bg-gradient-to-r hover:from-gray-600 hover:to-gray-700 rounded-xl shadow-lg hover:shadow-xl transition-all duration-300","aria-label":"Déconnexion",children:r.jsx("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})})})]})]})})}),r.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6 lg:py-8",children:u.length===0?r.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-3xl shadow-2xl border border-white/30 p-8 lg:p-12 text-center",children:[r.jsx("div",{className:"w-24 h-24 bg-gradient-to-r from-gray-200 to-gray-300 rounded-full flex items-center justify-center mx-auto mb-6",children:r.jsx("svg",{className:"h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})})}),r.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-3",children:"Aucune commande pour le moment"}),r.jsx("p",{className:"text-gray-600 mb-8",children:"Vous n'avez pas encore passé de commande. Découvrez nos packs de services !"}),r.jsx("button",{onClick:()=>i("/client-portal"),className:"px-8 py-4 bg-gradient-to-r from-blue-600 to-indigo-600 text-white rounded-xl font-semibold hover:shadow-lg transform hover:scale-105 transition-all duration-300",children:"Découvrir nos services"})]}):r.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-3xl shadow-2xl border border-white/30 p-6 lg:p-8",children:[r.jsxs("div",{className:"text-center mb-8",children:[r.jsx("h2",{className:"text-3xl lg:text-4xl font-bold bg-gradient-to-r from-blue-600 via-indigo-600 to-purple-600 bg-clip-text text-transparent mb-3",children:"Historique de vos commandes"}),r.jsx("p",{className:"text-gray-600 text-lg",children:"Suivez l'état d'avancement de vos commandes en temps réel"})]}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:u.map((m,h)=>r.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-lg hover:shadow-xl transition-all duration-300 transform hover:-translate-y-1 border border-gray-100",style:{animationDelay:`${h*100}ms`},children:[r.jsxs("div",{className:"flex justify-between items-start mb-4",children:[r.jsxs("div",{children:[r.jsxs("h3",{className:"font-bold text-gray-800 text-lg",children:["Commande #",m.id.slice(-8)]}),r.jsx("p",{className:"text-sm text-gray-500",children:new Date(m.createdAt).toLocaleDateString("fr-FR",{day:"numeric",month:"long",year:"numeric"})})]}),r.jsxs("div",{className:"text-right",children:[r.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:[m.totalAmount.toFixed(2),"€"]}),r.jsx("p",{className:"text-xs text-gray-500",children:"TTC"})]})]}),r.jsxs("div",{className:`inline-flex items-center px-3 py-2 rounded-full text-sm font-medium border mb-4 ${c(m.status)}`,children:[r.jsx("span",{className:"mr-2 text-base",children:d(m.status)}),o(m.status)]}),r.jsxs("div",{className:"space-y-3",children:[r.jsx("h4",{className:"font-semibold text-gray-700 text-sm",children:"Packs commandés :"}),m.packs.map((y,g)=>r.jsxs("div",{className:"flex justify-between items-center text-sm bg-gray-50 rounded-lg p-3",children:[r.jsxs("span",{className:"text-gray-600 flex-1",children:[y.packName,y.quantity>1&&r.jsxs("span",{className:"text-gray-400 ml-1",children:["x",y.quantity]})]}),r.jsxs("span",{className:"font-semibold text-gray-900",children:[y.total.toFixed(2),"€"]})]},g))]}),m.notes&&r.jsx("div",{className:"mt-4 p-3 bg-blue-50 rounded-lg",children:r.jsxs("p",{className:"text-sm text-blue-800",children:[r.jsx("span",{className:"font-semibold",children:"Note :"})," ",m.notes]})})]},m.id))})]})})]})},D1=()=>{const{clientAccess:t,addClientAccess:e,updateClientAccess:s,deleteClientAccess:n,customers:a}=de(),[i,l]=v.useState(!1),[o,c]=v.useState(""),[d,u]=v.useState(""),m=f=>{const w=a.find(j=>j.id===f);return w?w.name:"Client inconnu"},h=f=>{const w=a.find(j=>j.id===f);return w?w.email:""},y=()=>{const f="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";let w="";for(let j=0;j<8;j++)w+=f.charAt(Math.floor(Math.random()*f.length));return w},g=f=>{if(f.preventDefault(),!o){alert("Veuillez sélectionner un client");return}if(t.find(N=>N.customerId===o)){alert("Ce client a déjà un code d'accès");return}const j=d||y();if(t.find(N=>N.accessCode===j)){alert("Ce code d'accès existe déjà");return}e({customerId:o,accessCode:j,isActive:!0}),c(""),u(""),l(!1)},b=f=>{const w=t.find(j=>j.id===f);w&&s({...w,isActive:!w.isActive})},x=f=>{confirm("Êtes-vous sûr de vouloir supprimer cet accès ?")&&n(f)};console.log("Tous les clients:",a),console.log("Accès clients actuels:",t),v.useEffect(()=>{console.log("ClientAccessPage - Liste des clients:",a),console.log("ClientAccessPage - Accès clients actuels:",t)},[a,t]);const p=v.useMemo(()=>{const f=a.filter(w=>!t.some(j=>j.customerId===w.id));return console.log("Clients disponibles pour accès:",f),f},[a,t]);return r.jsxs("div",{className:"p-6",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-4 mb-6",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-900 mb-2",children:"🔐 Gestion des Accès Clients"}),r.jsx("p",{className:"text-sm sm:text-base text-gray-600",children:"Créez et gérez les codes d'accès sécurisés pour vos clients"})]}),r.jsxs("button",{onClick:()=>l(!0),className:"inline-flex items-center justify-center px-5 py-2.5 bg-gradient-to-r from-blue-600 to-blue-700 text-white font-medium rounded-xl hover:from-blue-700 hover:to-blue-800 transition-all duration-200 shadow-lg hover:shadow-xl transform hover:scale-105 whitespace-nowrap",children:[r.jsx("svg",{className:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2.5,children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"})}),"Créer un accès"]})]}),r.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-3 sm:gap-4 mb-6",children:[r.jsx("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 p-4 rounded-xl shadow-md hover:shadow-lg transition-all duration-300 border border-blue-200 w-full",children:r.jsxs("div",{className:"flex flex-col items-center text-center justify-center h-full min-h-[120px]",children:[r.jsx("div",{className:"p-3 bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl mb-3 shadow-md",children:r.jsx("svg",{className:"h-6 w-6 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2.5,children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})})}),r.jsx("p",{className:"text-xs font-semibold text-blue-700 mb-1 uppercase tracking-wide",children:"Total Accès"}),r.jsx("p",{className:"text-2xl sm:text-3xl font-bold text-blue-900",children:t.length})]})}),r.jsx("div",{className:"bg-gradient-to-br from-green-50 to-green-100 p-4 rounded-xl shadow-md hover:shadow-lg transition-all duration-300 border border-green-200 w-full",children:r.jsxs("div",{className:"flex flex-col items-center text-center justify-center h-full min-h-[120px]",children:[r.jsx("div",{className:"p-3 bg-gradient-to-br from-green-500 to-green-600 rounded-xl mb-3 shadow-md",children:r.jsx("svg",{className:"h-6 w-6 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2.5,children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),r.jsx("p",{className:"text-xs font-semibold text-green-700 mb-1 uppercase tracking-wide",children:"Actifs"}),r.jsx("p",{className:"text-2xl sm:text-3xl font-bold text-green-900",children:t.filter(f=>f.isActive).length})]})}),r.jsx("div",{className:"bg-gradient-to-br from-amber-50 to-amber-100 p-4 rounded-xl shadow-md hover:shadow-lg transition-all duration-300 border border-amber-200 w-full",children:r.jsxs("div",{className:"flex flex-col items-center text-center justify-center h-full min-h-[120px]",children:[r.jsx("div",{className:"p-3 bg-gradient-to-br from-amber-500 to-amber-600 rounded-xl mb-3 shadow-md",children:r.jsx("svg",{className:"h-6 w-6 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2.5,children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M18.364 18.364A9 9 0 005.636 5.636m12.728 12.728A9 9 0 015.636 5.636m12.728 12.728L5.636 5.636"})})}),r.jsx("p",{className:"text-xs font-semibold text-amber-700 mb-1 uppercase tracking-wide",children:"Inactifs"}),r.jsx("p",{className:"text-2xl sm:text-3xl font-bold text-amber-900",children:t.filter(f=>!f.isActive).length})]})}),r.jsx("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 p-4 rounded-xl shadow-md hover:shadow-lg transition-all duration-300 border border-purple-200 w-full",children:r.jsxs("div",{className:"flex flex-col items-center text-center justify-center h-full min-h-[120px]",children:[r.jsx("div",{className:"p-3 bg-gradient-to-br from-purple-500 to-purple-600 rounded-xl mb-3 shadow-md",children:r.jsx("svg",{className:"h-6 w-6 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2.5,children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v6h4.5m4.5 0a9 9 0 11-18 0 9 9 0 0118 0z"})})}),r.jsxs("p",{className:"text-xs font-semibold text-purple-700 mb-1 uppercase tracking-wide",children:["Connexions",r.jsx("br",{}),"récentes"]}),r.jsx("p",{className:"text-2xl sm:text-3xl font-bold text-purple-900",children:t.filter(f=>f.lastLogin&&new Date(f.lastLogin).getTime()>Date.now()-7*24*60*60*1e3).length})]})})]}),r.jsxs("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden",children:[r.jsx("div",{className:"px-4 sm:px-6 py-4 border-b border-gray-200",children:r.jsx("h2",{className:"text-base sm:text-lg font-medium text-gray-900",children:"Liste des Accès"})}),r.jsx("div",{className:"block lg:hidden",children:r.jsx("div",{className:"divide-y divide-gray-200",children:t.map(f=>r.jsxs("div",{className:"p-4 hover:bg-gray-50 transition-colors",children:[r.jsxs("div",{className:"flex items-start justify-between mb-3",children:[r.jsxs("div",{className:"flex-1",children:[r.jsx("div",{className:"text-sm font-semibold text-gray-900",children:m(f.customerId)}),r.jsx("div",{className:"text-xs text-gray-500 mt-0.5",children:h(f.customerId)})]}),r.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${f.isActive?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:f.isActive?"Actif":"Inactif"})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-3",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Code d'accès"}),r.jsx("span",{className:"font-mono text-xs bg-gray-100 px-2 py-1 rounded",children:f.accessCode})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Créé le"}),r.jsx("p",{className:"text-xs text-gray-900",children:new Date(f.createdAt).toLocaleDateString("fr-FR")})]}),r.jsxs("div",{className:"col-span-2",children:[r.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Dernière connexion"}),r.jsx("p",{className:"text-xs text-gray-900",children:f.lastLogin?new Date(f.lastLogin).toLocaleDateString("fr-FR"):"Jamais connecté"})]})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{onClick:()=>b(f.id),className:`flex-1 px-3 py-1.5 rounded-lg text-xs font-medium transition-colors ${f.isActive?"bg-red-100 text-red-700 hover:bg-red-200":"bg-green-100 text-green-700 hover:bg-green-200"}`,children:f.isActive?"🔒 Désactiver":"✅ Activer"}),r.jsx("button",{onClick:()=>x(f.id),className:"flex-1 px-3 py-1.5 bg-red-100 text-red-700 rounded-lg text-xs font-medium hover:bg-red-200 transition-colors",children:"🗑️ Supprimer"})]})]},f.id))})}),r.jsx("div",{className:"hidden lg:block overflow-x-auto",children:r.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[r.jsx("thead",{className:"bg-gray-50",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Client"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Code d'accès"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Statut"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Dernière connexion"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Créé le"}),r.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),r.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:t.map(f=>r.jsxs("tr",{className:"hover:bg-gray-50",children:[r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsxs("div",{children:[r.jsx("div",{className:"text-sm font-medium text-gray-900",children:m(f.customerId)}),r.jsx("div",{className:"text-sm text-gray-500",children:h(f.customerId)})]})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("span",{className:"font-mono text-sm bg-gray-100 px-2 py-1 rounded",children:f.accessCode})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${f.isActive?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:f.isActive?"Actif":"Inactif"})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:f.lastLogin?new Date(f.lastLogin).toLocaleDateString("fr-FR"):"Jamais"}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(f.createdAt).toLocaleDateString("fr-FR")}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:r.jsxs("div",{className:"flex justify-end space-x-2",children:[r.jsx("button",{onClick:()=>b(f.id),className:`px-3 py-1 rounded text-xs font-medium ${f.isActive?"bg-red-100 text-red-700 hover:bg-red-200":"bg-green-100 text-green-700 hover:bg-green-200"}`,children:f.isActive?"Désactiver":"Activer"}),r.jsx("button",{onClick:()=>x(f.id),className:"px-3 py-1 bg-red-100 text-red-700 rounded text-xs font-medium hover:bg-red-200",children:"Supprimer"})]})})]},f.id))})]})})]}),i&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:r.jsx("div",{className:"bg-white rounded-lg max-w-md w-full",children:r.jsxs("form",{onSubmit:g,className:"p-6",children:[r.jsxs("div",{className:"flex justify-between items-center mb-6",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Créer un Accès Client"}),r.jsx("button",{type:"button",onClick:()=>l(!1),className:"text-gray-400 hover:text-gray-600",children:r.jsx("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Client"}),r.jsxs("select",{value:o,onChange:f=>c(f.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,children:[r.jsx("option",{value:"",children:"Sélectionner un client"}),p.map(f=>r.jsxs("option",{value:f.id,children:[f.name," - ",f.email]},f.id))]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Code d'accès (optionnel)"}),r.jsxs("div",{className:"flex space-x-2",children:[r.jsx("input",{type:"text",value:d,onChange:f=>u(f.target.value.toUpperCase()),className:"flex-1 border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Laisser vide pour génération automatique",maxLength:10}),r.jsx("button",{type:"button",onClick:()=>u(y()),className:"px-3 py-2 bg-gray-100 text-gray-700 rounded-md hover:bg-gray-200",children:"Générer"})]})]})]}),r.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[r.jsx("button",{type:"button",onClick:()=>l(!1),className:"px-4 py-2 text-gray-700 border border-gray-300 rounded-md hover:bg-gray-50",children:"Annuler"}),r.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Créer l'accès"})]})]})})})]})},R1=()=>r.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:r.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:r.jsxs("div",{className:"space-y-6",children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"🚀 Monitoring Supabase"}),r.jsx("div",{className:"bg-white shadow rounded-lg p-6",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full mr-3"}),r.jsxs("div",{children:[r.jsx("h2",{className:"text-lg font-semibold",children:"Configuration Terminée ✅"}),r.jsx("p",{className:"text-gray-600",children:"Projet: zmtotombhpklllxjuirb"}),r.jsx("p",{className:"text-sm text-green-600",children:"Jeton configuré et application prête"})]})]})}),r.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-6",children:[r.jsx("h2",{className:"text-lg font-semibold text-blue-900 mb-4",children:"🎯 Finaliser la configuration"}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-start",children:[r.jsx("span",{className:"bg-blue-500 text-white rounded-full w-6 h-6 flex items-center justify-center text-sm mr-3",children:"1"}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium",children:"Ouvrez votre projet Supabase"}),r.jsx("a",{href:"https://supabase.com/dashboard/project/zmtotombhpklllxjuirb",target:"_blank",className:"text-blue-600 underline text-sm",children:"https://supabase.com/dashboard/project/zmtotombhpklllxjuirb"})]})]}),r.jsxs("div",{className:"flex items-start",children:[r.jsx("span",{className:"bg-blue-500 text-white rounded-full w-6 h-6 flex items-center justify-center text-sm mr-3",children:"2"}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium",children:'Cliquez sur "SQL Editor"'}),r.jsx("p",{className:"text-sm text-gray-600",children:"Dans la sidebar gauche de Supabase"})]})]}),r.jsxs("div",{className:"flex items-start",children:[r.jsx("span",{className:"bg-blue-500 text-white rounded-full w-6 h-6 flex items-center justify-center text-sm mr-3",children:"3"}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium",children:"Copiez et exécutez ce script SQL :"}),r.jsx("div",{className:"mt-2 bg-white border rounded p-3 max-h-40 overflow-y-auto",children:r.jsx("pre",{className:"text-xs text-gray-800",children:`-- Script de base pour tester
CREATE TABLE IF NOT EXISTS customers (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  name VARCHAR(255) NOT NULL,
  email VARCHAR(255) UNIQUE NOT NULL,
  created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);

INSERT INTO customers (name, email) VALUES 
('Test Client', 'test@example.com');`})})]})]})]})]}),r.jsxs("div",{className:"bg-white shadow rounded-lg p-6",children:[r.jsx("h2",{className:"text-lg font-semibold mb-4",children:"⚙️ Configuration actuelle"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600",children:"URL Supabase"}),r.jsx("p",{className:"font-mono text-sm",children:"https://zmtotombhpklllxjuirb.supabase.co"})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Jeton d'accès"}),r.jsx("p",{className:"font-mono text-sm",children:"sbp_611cad...*** ✅"})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Fichier .env.local"}),r.jsx("p",{className:"text-green-600",children:"✅ Créé"})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Dépendance @supabase/supabase-js"}),r.jsx("p",{className:"text-green-600",children:"✅ Installée"})]})]})]}),r.jsxs("div",{className:"bg-white shadow rounded-lg p-6",children:[r.jsx("h2",{className:"text-lg font-semibold mb-4",children:"🔍 Test rapide"}),r.jsx("p",{className:"text-gray-600 mb-4",children:"Une fois le script SQL exécuté, le monitoring complet sera disponible avec :"}),r.jsxs("ul",{className:"list-disc list-inside space-y-2 text-sm text-gray-600",children:[r.jsx("li",{children:"Métriques de performance en temps réel"}),r.jsx("li",{children:"Statistiques de l'application"}),r.jsx("li",{children:"Tests automatisés de la base de données"}),r.jsx("li",{children:"Alertes et monitoring avancé"})]})]})]})})}),O1=()=>r.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:r.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"📊 Démonstration Monitoring Supabase"}),r.jsx("p",{className:"text-gray-600",children:"Aperçu du tableau de bord de monitoring"})]}),r.jsx("div",{className:"px-3 py-1 bg-blue-100 text-blue-800 text-sm rounded-full",children:"🎯 Démo - Projet: zmtotombhpklllxjuirb"})]}),r.jsx("div",{className:"bg-white shadow rounded-lg p-6",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full mr-3 animate-pulse"}),r.jsxs("div",{children:[r.jsx("h2",{className:"text-lg font-semibold",children:"Statut de la connexion"}),r.jsx("p",{className:"text-sm text-gray-600",children:"Connecté à Supabase"}),r.jsx("p",{className:"text-xs text-green-600",children:"✅ https://zmtotombhpklllxjuirb.supabase.co"})]})]})}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[r.jsx("div",{className:"bg-white shadow rounded-lg p-6",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center mr-3",children:"📊"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Requêtes totales"}),r.jsx("p",{className:"text-2xl font-bold text-gray-900",children:"1,247"})]})]})}),r.jsx("div",{className:"bg-white shadow rounded-lg p-6",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"w-8 h-8 bg-green-100 rounded-lg flex items-center justify-center mr-3",children:"✅"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Taux de succès"}),r.jsx("p",{className:"text-2xl font-bold text-green-600",children:"99%"})]})]})}),r.jsx("div",{className:"bg-white shadow rounded-lg p-6",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"w-8 h-8 bg-yellow-100 rounded-lg flex items-center justify-center mr-3",children:"⚡"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Temps de réponse"}),r.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:"145ms"})]})]})}),r.jsx("div",{className:"bg-white shadow rounded-lg p-6",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"w-8 h-8 bg-red-100 rounded-lg flex items-center justify-center mr-3",children:"❌"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Erreurs"}),r.jsx("p",{className:"text-2xl font-bold text-red-600",children:"12"})]})]})})]}),r.jsxs("div",{className:"bg-white shadow rounded-lg p-6",children:[r.jsx("h2",{className:"text-lg font-semibold mb-4",children:"📈 Statistiques de l'application"}),r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-6",children:[r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-3xl font-bold text-blue-600",children:"156"}),r.jsx("div",{className:"text-sm text-gray-500",children:"Clients"})]}),r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-3xl font-bold text-green-600",children:"423"}),r.jsx("div",{className:"text-sm text-gray-500",children:"Commandes"})]}),r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-3xl font-bold text-purple-600",children:"298"}),r.jsx("div",{className:"text-sm text-gray-500",children:"Factures"})]}),r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-3xl font-bold text-green-600",children:"15,420€"}),r.jsx("div",{className:"text-sm text-gray-500",children:"Chiffre d'affaires"})]})]})]}),r.jsxs("div",{className:"bg-white shadow rounded-lg p-6",children:[r.jsx("h2",{className:"text-lg font-semibold mb-4",children:"⚡ Indicateurs de performance"}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsxs("div",{className:"flex justify-between text-sm text-gray-600 mb-1",children:[r.jsx("span",{children:"Taux de succès"}),r.jsx("span",{children:"99%"})]}),r.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:r.jsx("div",{className:"h-2 bg-green-500 rounded-full",style:{width:"99%"}})})]}),r.jsxs("div",{children:[r.jsxs("div",{className:"flex justify-between text-sm text-gray-600 mb-1",children:[r.jsx("span",{children:"Performance"}),r.jsx("span",{children:"145ms"})]}),r.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:r.jsx("div",{className:"h-2 bg-green-500 rounded-full",style:{width:"85%"}})})]})]})]}),r.jsxs("div",{className:"bg-white shadow rounded-lg p-6",children:[r.jsx("h2",{className:"text-lg font-semibold mb-4",children:"📋 Rapport de Tests (Démo)"}),r.jsx("div",{className:"bg-gray-50 rounded-lg p-4",children:r.jsx("pre",{className:"text-sm text-gray-700 whitespace-pre-wrap",children:`# Rapport de Test Supabase
Généré le: ${new Date().toLocaleString("fr-FR")}

## Métriques de Performance
- Requêtes totales: 1,247
- Taux de succès: 99%
- Temps de réponse moyen: 145ms
- Statut de connexion: connecté

## Statistiques de l'Application  
- Clients: 156
- Commandes: 423
- Factures: 298
- Chiffre d'affaires: 15,420.00€

## Recommandations
- ✅ Système fonctionnel, aucune action requise
- 🎯 Projet Supabase: zmtotombhpklllxjuirb
- 🚀 Prêt pour la production`})})]}),r.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:r.jsxs("p",{className:"text-yellow-800",children:["💡 ",r.jsx("strong",{children:"Note:"})," Ceci est une démonstration. Pour le monitoring réel, configurez d'abord votre base de données Supabase puis allez sur",r.jsx("span",{className:"font-mono",children:"/monitoring"})]})})]})})});class M1{constructor(){Xe(this,"cache",null);Xe(this,"cacheExpiry",0);Xe(this,"CACHE_DURATION",6e4);Xe(this,"FREE_PLAN_LIMITS",{database:500*1024*1024,storage:1*1024*1024*1024,bandwidth:2*1024*1024*1024,requests:5e4})}async getStorageStats(){if(this.cache&&Date.now()<this.cacheExpiry)return this.cache;try{const e=await this.getTableStats(),s=e.reduce((i,l)=>i+l.size,0),n=this.FREE_PLAN_LIMITS.database,a={used:s,limit:n,percentage:s/n*100,remaining:n-s,tables:e,lastUpdated:new Date};return this.cache=a,this.cacheExpiry=Date.now()+this.CACHE_DURATION,a}catch(e){return console.error("Erreur lors de la récupération des stats de stockage:",e),{used:0,limit:this.FREE_PLAN_LIMITS.database,percentage:0,remaining:this.FREE_PLAN_LIMITS.database,tables:[],lastUpdated:new Date}}}async getTableStats(){const e=["customers","employees","services","inventory_items","orders","order_services","order_items","invoices","invoice_items","client_access","service_packs","pack_services","client_orders","client_order_packs"],s=[];let n=0;console.log("🔍 Récupération des statistiques réelles de Supabase...");for(const i of e)try{const{count:l,error:o}=await q.from(i).select("*",{count:"exact",head:!0});if(o){console.warn(`⚠️ Erreur pour la table ${i}:`,o.message),s.push({name:i,rows:0,size:0,percentage:0});continue}const c=l||0;n+=c;const d=this.getEstimatedRowSize(i),u=c*d;console.log(`📊 Table ${i}: ${c} lignes, ~${this.formatSize(u)}`),s.push({name:i,rows:c,size:u,percentage:0})}catch(l){console.error(`❌ Erreur lors de la récupération des stats pour ${i}:`,l),s.push({name:i,rows:0,size:0,percentage:0})}const a=s.reduce((i,l)=>i+l.size,0);return s.forEach(i=>{i.percentage=a>0?i.size/a*100:0}),console.log(`📈 Total: ${n} lignes, ~${this.formatSize(a)}`),s.sort((i,l)=>l.size-i.size)}getEstimatedRowSize(e){return{customers:500,employees:300,services:200,inventory_items:250,orders:400,order_services:150,order_items:200,invoices:350,invoice_items:150,client_access:200,service_packs:300,pack_services:150,client_orders:350,client_order_packs:200}[e]||250}getRecommendations(e){const s=[];e.percentage>80?s.push("⚠️ Stockage critique (>80%) - Envisagez de nettoyer les anciennes données"):e.percentage>60&&s.push("⚡ Stockage élevé (>60%) - Surveillez l'évolution");const n=e.tables.filter(a=>a.percentage>20).slice(0,3);return n.length>0&&s.push(`📊 Tables les plus volumineuses: ${n.map(a=>a.name).join(", ")}`),e.tables.some(a=>a.rows>1e4)&&s.push("🗂️ Certaines tables ont beaucoup de données - Considérez l'archivage"),s}formatSize(e){const s=["B","KB","MB","GB"];let n=e,a=0;for(;n>=1024&&a<s.length-1;)n/=1024,a++;return`${n.toFixed(1)} ${s[a]}`}clearCache(){this.cache=null,this.cacheExpiry=0}}const Ys=new M1,$1=({refreshInterval:t=3e4,showDetails:e=!0})=>{const[s,n]=v.useState(null),[a,i]=v.useState(!0),[l,o]=v.useState(null),[c,d]=v.useState(null),u=async()=>{try{o(null);const g=await Ys.getStorageStats();n(g),d(new Date)}catch(g){o(g instanceof Error?g.message:"Erreur inconnue")}finally{i(!1)}};v.useEffect(()=>{u();const g=setInterval(u,t);return()=>clearInterval(g)},[t]);const m=g=>g>=80?"text-red-600 bg-red-100":g>=60?"text-yellow-600 bg-yellow-100":"text-green-600 bg-green-100",h=g=>g>=80?r.jsx(Ht,{className:"w-5 h-5"}):g>=60?r.jsx(ju,{className:"w-5 h-5"}):r.jsx(Ln,{className:"w-5 h-5"});if(a)return r.jsx("div",{className:"bg-white shadow rounded-lg p-6",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(ii,{className:"w-5 h-5 animate-spin text-blue-600"}),r.jsx("span",{children:"Chargement des statistiques de stockage..."})]})});if(l)return r.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(Ht,{className:"w-5 h-5 text-red-600"}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-red-800",children:"Erreur de chargement"}),r.jsx("p",{className:"text-red-600 text-sm",children:l})]})]}),r.jsx("button",{onClick:u,className:"mt-3 bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 text-sm",children:"Réessayer"})]});if(!s)return null;const y=Ys.getRecommendations(s);return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"bg-white shadow rounded-lg p-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:`p-2 rounded-full ${m(s.percentage)}`,children:h(s.percentage)}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-semibold",children:"Stockage Supabase"}),r.jsxs("p",{className:"text-sm text-gray-600",children:["Mis à jour: ",c==null?void 0:c.toLocaleTimeString()]})]})]}),r.jsx("button",{onClick:u,className:"p-2 hover:bg-gray-100 rounded-full transition-colors",title:"Actualiser",children:r.jsx(ii,{className:"w-4 h-4 text-gray-600"})})]}),r.jsxs("div",{className:"mb-4",children:[r.jsxs("div",{className:"flex justify-between text-sm text-gray-600 mb-2",children:[r.jsx("span",{children:"Utilisation"}),r.jsxs("span",{children:[s.percentage.toFixed(1),"%"]})]}),r.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3",children:r.jsx("div",{className:`h-3 rounded-full transition-all duration-500 ${s.percentage>=80?"bg-red-500":s.percentage>=60?"bg-yellow-500":"bg-green-500"}`,style:{width:`${Math.min(s.percentage,100)}%`}})})]}),r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[r.jsxs("div",{className:"text-center p-3 bg-blue-50 rounded-lg",children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Utilisé"}),r.jsx("p",{className:"text-lg font-bold text-blue-600",children:Ys.formatSize(s.used)})]}),r.jsxs("div",{className:"text-center p-3 bg-gray-50 rounded-lg",children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Limite"}),r.jsx("p",{className:"text-lg font-bold text-gray-600",children:Ys.formatSize(s.limit)})]}),r.jsxs("div",{className:"text-center p-3 bg-green-50 rounded-lg",children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Disponible"}),r.jsx("p",{className:"text-lg font-bold text-green-600",children:Ys.formatSize(s.remaining)})]}),r.jsxs("div",{className:"text-center p-3 bg-purple-50 rounded-lg",children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Tables"}),r.jsx("p",{className:"text-lg font-bold text-purple-600",children:s.tables.length})]})]})]}),e&&s.tables.length>0&&r.jsxs("div",{className:"bg-white shadow rounded-lg p-6",children:[r.jsxs("h4",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[r.jsx(Ti,{className:"w-5 h-5 text-blue-600"}),"Utilisation par table"]}),r.jsx("div",{className:"space-y-3",children:s.tables.slice(0,8).map(g=>r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex justify-between items-center mb-1",children:[r.jsx("span",{className:"text-sm font-medium capitalize",children:g.name.replace("_"," ")}),r.jsxs("span",{className:"text-xs text-gray-500",children:[g.rows," lignes"]})]}),r.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:r.jsx("div",{className:"bg-blue-500 h-2 rounded-full transition-all duration-300",style:{width:`${Math.max(g.percentage,2)}%`}})})]}),r.jsxs("div",{className:"ml-4 text-right",children:[r.jsx("p",{className:"text-sm font-medium",children:Ys.formatSize(g.size)}),r.jsxs("p",{className:"text-xs text-gray-500",children:[g.percentage.toFixed(1),"%"]})]})]},g.name))})]}),y.length>0&&r.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-6",children:[r.jsxs("h4",{className:"text-lg font-semibold text-yellow-800 mb-3 flex items-center gap-2",children:[r.jsx(ju,{className:"w-5 h-5"}),"Recommandations"]}),r.jsx("ul",{className:"space-y-2",children:y.map((g,b)=>r.jsx("li",{className:"text-yellow-700 text-sm",children:g},b))})]})]})};class z1{async runFullTest(){console.log("🧪 Démarrage du test complet Supabase...");const e={isConnected:!1,tablesStatus:{},totalRows:0,errors:[]},s=["customers","employees","services","inventory_items","orders","order_services","order_items","invoices","invoice_items","client_access","service_packs","pack_services","client_orders","client_order_packs"];try{const{data:n,error:a}=await q.from("customers").select("id").limit(1);if(a)return e.errors.push(`Connexion échouée: ${a.message}`),e;e.isConnected=!0,console.log("✅ Connexion Supabase établie")}catch(n){return e.errors.push(`Erreur de connexion: ${n instanceof Error?n.message:"Inconnue"}`),e}for(const n of s)try{console.log(`🔍 Test de la table: ${n}`);const{count:a,error:i}=await q.from(n).select("*",{count:"exact",head:!0});if(i)e.tablesStatus[n]={accessible:!1,count:0,error:i.message},e.errors.push(`Table ${n}: ${i.message}`),console.log(`❌ ${n}: ${i.message}`);else{const l=a||0;e.tablesStatus[n]={accessible:!0,count:l},e.totalRows+=l,console.log(`✅ ${n}: ${l} lignes`)}}catch(a){const i=a instanceof Error?a.message:"Erreur inconnue";e.tablesStatus[n]={accessible:!1,count:0,error:i},e.errors.push(`Table ${n}: ${i}`),console.log(`❌ ${n}: ${i}`)}return console.log(`📊 Test terminé: ${e.totalRows} lignes au total`),e}async testCreateAndRead(){console.log("🧪 Test de création et lecture...");try{const e={name:"Test Customer",email:`test-${Date.now()}@example.com`,phone:"0123456789"},{data:s,error:n}=await q.from("customers").insert([e]).select();if(n)return console.log(`❌ Erreur d'insertion: ${n.message}`),!1;console.log("✅ Client test créé:",s);const{data:a,error:i}=await q.from("customers").select("*").eq("email",e.email);if(i)return console.log(`❌ Erreur de lecture: ${i.message}`),!1;if(console.log("✅ Client test lu:",a),s&&s[0]){const{error:l}=await q.from("customers").delete().eq("id",s[0].id);console.log(l?`⚠️ Erreur de suppression: ${l.message}`:"✅ Client test supprimé")}return!0}catch(e){return console.log(`❌ Erreur générale: ${e instanceof Error?e.message:"Inconnue"}`),!1}}async checkRLS(){console.log("🔒 Vérification des politiques RLS...");try{const{data:e,error:s}=await q.from("customers").select("*").limit(5);return s?(console.log(`❌ RLS bloque l'accès: ${s.message}`),!1):(console.log(`✅ RLS configuré correctement, ${(e==null?void 0:e.length)||0} clients accessibles`),!0)}catch(e){return console.log(`❌ Erreur RLS: ${e instanceof Error?e.message:"Inconnue"}`),!1}}}const F1=new z1,U1=()=>{const[t,e]=v.useState(!1),[s,n]=v.useState(null),[a,i]=v.useState(null),l=async()=>{e(!0);try{console.log("🚀 Lancement du diagnostic Supabase...");const d=await F1.runFullTest();n(d),i(new Date),console.log("📊 Diagnostic terminé:",d)}catch(d){console.error("❌ Erreur lors du diagnostic:",d)}finally{e(!1)}},o=d=>d.accessible?d.count===0?r.jsx(Ht,{className:"w-4 h-4 text-yellow-500"}):r.jsx(Ln,{className:"w-4 h-4 text-green-500"}):r.jsx(fl,{className:"w-4 h-4 text-red-500"}),c=d=>d.accessible?d.count===0?"bg-yellow-50 border-yellow-200":"bg-green-50 border-green-200":"bg-red-50 border-red-200";return r.jsxs("div",{className:"bg-white shadow rounded-lg p-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-semibold",children:"Diagnostic Supabase"}),r.jsx("p",{className:"text-sm text-gray-600",children:"Vérification complète de la connectivité et des données"})]}),r.jsxs("button",{onClick:l,disabled:t,className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 disabled:opacity-50 flex items-center gap-2",children:[t?r.jsx(ii,{className:"w-4 h-4 animate-spin"}):r.jsx(Iv,{className:"w-4 h-4"}),t?"Test en cours...":"Lancer le diagnostic"]})]}),a&&r.jsxs("div",{className:"mb-4 text-sm text-gray-600",children:["Dernier test: ",a.toLocaleString()]}),s&&r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:`p-4 rounded-lg border ${s.isConnected?"bg-green-50 border-green-200":"bg-red-50 border-red-200"}`,children:[r.jsxs("div",{className:"flex items-center gap-2",children:[s.isConnected?r.jsx(Ln,{className:"w-5 h-5 text-green-600"}):r.jsx(fl,{className:"w-5 h-5 text-red-600"}),r.jsx("span",{className:`font-medium ${s.isConnected?"text-green-800":"text-red-800"}`,children:s.isConnected?"Connexion établie":"Connexion échouée"})]}),s.isConnected&&r.jsxs("p",{className:"text-sm text-green-700 mt-1",children:["Total: ",s.totalRows," lignes dans la base de données"]})]}),s.errors.length>0&&r.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[r.jsx("h4",{className:"font-medium text-red-800 mb-2",children:"Erreurs détectées:"}),r.jsx("ul",{className:"space-y-1",children:s.errors.map((d,u)=>r.jsxs("li",{className:"text-sm text-red-700",children:["• ",d]},u))})]}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-medium mb-3",children:"Statut des tables:"}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3",children:Object.entries(s.tablesStatus).map(([d,u])=>r.jsxs("div",{className:`p-3 rounded-lg border ${c(u)}`,children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[o(u),r.jsx("span",{className:"text-sm font-medium capitalize",children:d.replace("_"," ")})]}),r.jsx("span",{className:"text-xs text-gray-600",children:u.accessible?`${u.count} lignes`:"Erreur"})]}),u.error&&r.jsx("p",{className:"text-xs text-red-600 mt-1",children:u.error})]},d))})]}),s.isConnected&&s.totalRows===0&&r.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx(Ht,{className:"w-5 h-5 text-yellow-600"}),r.jsx("span",{className:"font-medium text-yellow-800",children:"Base de données vide"})]}),r.jsx("p",{className:"text-sm text-yellow-700",children:"Votre base de données Supabase est connectée mais ne contient aucune donnée. Cela explique pourquoi le monitoring du stockage affiche 0."}),r.jsxs("div",{className:"mt-3",children:[r.jsx("p",{className:"text-sm text-yellow-700 font-medium",children:"Solutions:"}),r.jsxs("ul",{className:"text-sm text-yellow-700 mt-1 ml-4",children:[r.jsx("li",{children:"• Créez quelques clients, commandes ou employés dans l'application"}),r.jsx("li",{children:"• Importez des données existantes"}),r.jsx("li",{children:"• Vérifiez que l'application utilise bien Supabase (pas localStorage)"})]})]})]}),!s.isConnected&&r.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx(fl,{className:"w-5 h-5 text-red-600"}),r.jsx("span",{className:"font-medium text-red-800",children:"Problème de connexion"})]}),r.jsx("p",{className:"text-sm text-red-700 mb-3",children:"Impossible de se connecter à Supabase. L'application utilise probablement localStorage."}),r.jsxs("div",{className:"mt-3",children:[r.jsx("p",{className:"text-sm text-red-700 font-medium",children:"Vérifications:"}),r.jsxs("ul",{className:"text-sm text-red-700 mt-1 ml-4",children:[r.jsx("li",{children:"• Vérifiez vos clés API dans .env.local"}),r.jsx("li",{children:"• Vérifiez que votre projet Supabase est actif"}),r.jsx("li",{children:"• Vérifiez les politiques RLS"}),r.jsx("li",{children:"• Consultez la console du navigateur pour plus de détails"})]})]})]})]})]})},q1=()=>{const[t,e]=v.useState(mr.getMetrics()),[s,n]=v.useState(!1),[a,i]=v.useState(null),[l,o]=v.useState(null);v.useEffect(()=>{const h=setInterval(()=>{e(mr.getMetrics())},2e3);return()=>clearInterval(h)},[]);const c=async()=>{n(!0);try{await di.getCustomers(),i("✅ Connexion Supabase réussie !")}catch(h){i(`❌ Erreur: ${h instanceof Error?h.message:"Connexion échouée"}`)}finally{n(!1)}},d=async()=>{try{const h=await di.getStats();o(h)}catch(h){console.error("Erreur lors du chargement des stats:",h)}};v.useEffect(()=>{d()},[]),a0({interval:15e3,enabled:!0,onRefresh:()=>{e(mr.getMetrics()),d()}});const u=()=>{switch(t.connectionStatus){case"connected":return"text-green-600 bg-green-100";case"error":return"text-red-600 bg-red-100";default:return"text-yellow-600 bg-yellow-100"}},m=()=>{switch(t.connectionStatus){case"connected":return r.jsx(Ln,{className:"w-5 h-5"});case"error":return r.jsx(ml,{className:"w-5 h-5"});default:return r.jsx(Pt,{className:"w-5 h-5"})}};return r.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:r.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsxs("h1",{className:"text-3xl font-bold text-gray-900 flex items-center gap-3",children:[r.jsx(Ti,{className:"w-8 h-8 text-blue-600"}),"Monitoring Supabase"]}),r.jsx("p",{className:"text-gray-600 mt-1",children:"Surveillance en temps réel de la base de données"})]}),r.jsxs("button",{onClick:c,disabled:s,className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 disabled:opacity-50 flex items-center gap-2",children:[r.jsx(Lf,{className:"w-4 h-4"}),s?"Test en cours...":"Tester la connexion"]})]}),a&&r.jsx("div",{className:`p-4 rounded-lg ${a.includes("✅")?"bg-green-50 border border-green-200":"bg-red-50 border border-red-200"}`,children:r.jsx("p",{className:"font-medium",children:a})}),r.jsx("div",{className:"bg-white shadow rounded-lg p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:`p-2 rounded-full ${u()}`,children:m()}),r.jsxs("div",{children:[r.jsx("h2",{className:"text-lg font-semibold",children:"Statut de la connexion"}),r.jsx("p",{className:"text-gray-600 capitalize",children:t.connectionStatus})]})]}),r.jsxs("div",{className:"text-right",children:[r.jsx("p",{className:"text-sm text-gray-500",children:"Projet Supabase"}),r.jsx("p",{className:"font-mono text-sm",children:"zmtotombhpklllxjuirb"})]})]})}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[r.jsx("div",{className:"bg-white shadow rounded-lg p-6",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"p-2 bg-blue-100 rounded-full",children:r.jsx(Hc,{className:"w-6 h-6 text-blue-600"})}),r.jsxs("div",{className:"ml-4",children:[r.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Requêtes totales"}),r.jsx("p",{className:"text-2xl font-bold text-gray-900",children:t.totalQueries})]})]})}),r.jsx("div",{className:"bg-white shadow rounded-lg p-6",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"p-2 bg-green-100 rounded-full",children:r.jsx(Ln,{className:"w-6 h-6 text-green-600"})}),r.jsxs("div",{className:"ml-4",children:[r.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Succès"}),r.jsx("p",{className:"text-2xl font-bold text-gray-900",children:t.successfulQueries})]})]})}),r.jsx("div",{className:"bg-white shadow rounded-lg p-6",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"p-2 bg-red-100 rounded-full",children:r.jsx(ml,{className:"w-6 h-6 text-red-600"})}),r.jsxs("div",{className:"ml-4",children:[r.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Erreurs"}),r.jsx("p",{className:"text-2xl font-bold text-gray-900",children:t.failedQueries})]})]})}),r.jsx("div",{className:"bg-white shadow rounded-lg p-6",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"p-2 bg-purple-100 rounded-full",children:r.jsx(Pt,{className:"w-6 h-6 text-purple-600"})}),r.jsxs("div",{className:"ml-4",children:[r.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Temps moyen"}),r.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:[Math.round(t.averageResponseTime),"ms"]})]})]})})]}),l&&r.jsxs("div",{className:"bg-white shadow rounded-lg p-6",children:[r.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[r.jsx(dn,{className:"w-5 h-5 text-blue-600"}),"Statistiques de la base de données"]}),r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[r.jsxs("div",{className:"text-center p-4 bg-blue-50 rounded-lg",children:[r.jsx("p",{className:"text-2xl font-bold text-blue-600",children:l.totalCustomers}),r.jsx("p",{className:"text-sm text-gray-600",children:"Clients"})]}),r.jsxs("div",{className:"text-center p-4 bg-green-50 rounded-lg",children:[r.jsx("p",{className:"text-2xl font-bold text-green-600",children:l.totalOrders}),r.jsx("p",{className:"text-sm text-gray-600",children:"Commandes"})]}),r.jsxs("div",{className:"text-center p-4 bg-yellow-50 rounded-lg",children:[r.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:l.pendingOrders}),r.jsx("p",{className:"text-sm text-gray-600",children:"En attente"})]}),r.jsxs("div",{className:"text-center p-4 bg-purple-50 rounded-lg",children:[r.jsx("p",{className:"text-2xl font-bold text-purple-600",children:l.totalInvoices}),r.jsx("p",{className:"text-sm text-gray-600",children:"Factures"})]})]})]}),t.lastError&&r.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6",children:[r.jsxs("h3",{className:"text-lg font-semibold text-red-800 mb-2 flex items-center gap-2",children:[r.jsx(ml,{className:"w-5 h-5"}),"Dernière erreur"]}),r.jsx("p",{className:"text-red-700 font-mono text-sm",children:t.lastError}),t.lastErrorTime&&r.jsx("p",{className:"text-red-600 text-sm mt-1",children:new Date(t.lastErrorTime).toLocaleString()})]}),r.jsx(U1,{}),r.jsxs("div",{children:[r.jsxs("h2",{className:"text-2xl font-bold text-gray-900 mb-4 flex items-center gap-3",children:[r.jsx(Nv,{className:"w-7 h-7 text-blue-600"}),"Stockage en Temps Réel"]}),r.jsx($1,{refreshInterval:15e3,showDetails:!0})]}),r.jsxs("div",{className:"bg-white shadow rounded-lg p-6",children:[r.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[r.jsx(Pv,{className:"w-5 h-5 text-gray-600"}),"Configuration"]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-500",children:"URL Supabase"}),r.jsx("p",{className:"font-mono text-sm text-gray-900 break-all",children:"https://zmtotombhpklllxjuirb.supabase.co"})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Mode"}),r.jsx("p",{className:"text-sm text-gray-900",children:"Hybride (Supabase + localStorage fallback)"})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Rafraîchissement"}),r.jsx("p",{className:"text-sm text-gray-900",children:"Automatique (15s monitoring, 30s global)"})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Plan"}),r.jsx("p",{className:"text-sm text-gray-900",children:"Gratuit (500MB DB, 1GB Storage)"})]})]})]}),r.jsxs("div",{className:"bg-white shadow rounded-lg p-6",children:[r.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Actions de monitoring"}),r.jsxs("div",{className:"flex flex-wrap gap-3",children:[r.jsx("button",{onClick:()=>mr.resetMetrics(),className:"bg-gray-600 text-white px-4 py-2 rounded-lg hover:bg-gray-700",children:"Réinitialiser les métriques"}),r.jsx("button",{onClick:d,className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700",children:"Actualiser les stats"}),r.jsx("button",{onClick:()=>window.open("https://supabase.com/dashboard/project/zmtotombhpklllxjuirb","_blank"),className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700",children:"Ouvrir Supabase Dashboard"})]})]})]})})})},Yu=({title:t,content:e,example:s})=>{const[n,a]=v.useState(!1);return r.jsxs("div",{className:"relative inline-block",children:[r.jsx("button",{onClick:()=>a(!n),className:"text-gray-400 hover:text-gray-600 transition-colors",type:"button",children:r.jsx(l1,{className:"h-4 w-4"})}),n&&r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"fixed inset-0 z-10",onClick:()=>a(!1)}),r.jsx("div",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 z-20",children:r.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg shadow-lg p-4 w-80 max-w-sm",children:[r.jsxs("div",{className:"flex items-start justify-between mb-2",children:[r.jsx("h4",{className:"font-medium text-gray-900 text-sm",children:t}),r.jsx("button",{onClick:()=>a(!1),className:"text-gray-400 hover:text-gray-600",children:r.jsx(u0,{className:"h-4 w-4"})})]}),r.jsx("p",{className:"text-sm text-gray-600 mb-2",children:e}),s&&r.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-md p-2",children:r.jsxs("p",{className:"text-xs text-blue-800",children:[r.jsx("strong",{children:"Exemple :"})," ",s]})}),r.jsx("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2",children:r.jsx("div",{className:"w-2 h-2 bg-white border-r border-b border-gray-200 transform rotate-45"})})]})})]})]})},B1=({services:t,inventoryItems:e,onUpdateMappings:s})=>{const[n,a]=v.useState(null),[i,l]=v.useState([]);v.useEffect(()=>{const h=r0();l(h)},[]);const o=h=>i.find(y=>y.serviceId===h),c=(h,y,g)=>{const b=i.map(x=>x.serviceId===h?x.inventoryRequirements.find(f=>f.itemId===y)?{...x,inventoryRequirements:x.inventoryRequirements.map(f=>f.itemId===y?{...f,quantityPerUnit:g}:f)}:{...x,inventoryRequirements:[...x.inventoryRequirements,{itemId:y,quantityPerUnit:g}]}:x);l(b),s(b)},d=(h,y)=>{const g=i.map(b=>b.serviceId===h?{...b,inventoryRequirements:b.inventoryRequirements.filter(x=>x.itemId!==y)}:b);l(g),s(g)},u=(h,y)=>{const g=o(h);return(g==null?void 0:g.inventoryRequirements.some(b=>b.itemId===y))||!1},m=(h,y)=>{const g=o(h),b=g==null?void 0:g.inventoryRequirements.find(x=>x.itemId===y);return(b==null?void 0:b.quantityPerUnit)||.1};return r.jsxs("div",{className:"bg-white shadow-sm rounded-lg overflow-hidden",children:[r.jsxs("div",{className:"px-6 py-4 border-b border-gray-200",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"🔗 Lier Services et Produits"}),r.jsx(Yu,{title:"Comment ça marche ?",content:"Configurez quels produits d'inventaire sont consommés quand vous traitez chaque type de service.",example:"Lavage & Pliage de 10kg consomme 1L de lessive (0.1L par kg)"})]}),r.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Choisissez quels produits sont utilisés pour chaque service"})]}),r.jsx("div",{className:"p-3 sm:p-4 space-y-6",children:t.map(h=>{const y=o(h.id),g=n===h.id;return r.jsxs("div",{className:"border border-gray-200 rounded-lg p-3 sm:p-4 flex flex-col bg-white shadow-sm",children:[r.jsxs("div",{className:"flex flex-col gap-2 mb-3",children:[r.jsxs("div",{className:"flex-1",children:[r.jsx("h4",{className:"text-sm sm:text-base font-semibold text-gray-900",children:h.name}),r.jsx("p",{className:"text-xs text-gray-500 mt-0.5",children:h.description})]}),r.jsxs("div",{className:"flex items-center justify-between gap-2",children:[r.jsxs("div",{className:`px-2 py-1 rounded-full text-xs font-medium ${y!=null&&y.inventoryRequirements.length?"bg-green-100 text-green-800":"bg-gray-100 text-gray-600"}`,children:[(y==null?void 0:y.inventoryRequirements.length)||0," produit(s)"]}),r.jsx("button",{onClick:()=>a(g?null:h.id),className:`px-3 py-1.5 rounded-lg text-xs font-medium ${g?"bg-green-600 text-white hover:bg-green-700":"bg-blue-600 text-white hover:bg-blue-700"} transition-colors`,children:g?"✓ Terminer":"Configurer"})]})]}),r.jsx("div",{className:"mb-3",children:y!=null&&y.inventoryRequirements.length?r.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-2",children:y.inventoryRequirements.map(b=>{const x=e.find(p=>p.id===b.itemId);return r.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-2 flex flex-col",children:[r.jsxs("div",{className:"flex items-start justify-between gap-1 mb-1",children:[r.jsx("div",{className:"flex-1 min-w-0",children:r.jsx("div",{className:"font-medium text-green-900 text-xs leading-tight truncate",children:(x==null?void 0:x.name)||"Produit inconnu"})}),g&&r.jsx("button",{onClick:()=>d(h.id,b.itemId),className:"text-red-600 hover:text-red-800 p-0.5 flex-shrink-0 -mt-0.5",children:r.jsx(Wo,{className:"h-3 w-3"})})]}),r.jsxs("div",{className:"text-xs text-green-700 leading-tight",children:[b.quantityPerUnit," ",(x==null?void 0:x.unit)||"unités"," par ",h.name.includes("kg")?"kg":"pièce"]})]},b.itemId)})}):r.jsx("div",{className:"text-xs text-gray-500 italic bg-gray-50 p-3 rounded-lg flex items-center justify-center border border-gray-200",children:"Aucun produit configuré pour ce service"})}),g&&r.jsxs("div",{className:"border-t border-gray-200 pt-3 mt-3",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx("h5",{className:"text-xs font-semibold text-gray-700",children:"📦 Ajouter des produits"}),r.jsx(Yu,{title:"Quantité par unité",content:"Entrez la quantité de produit utilisée pour une unité de service (1kg, 1 pièce, etc.)",example:"0.1 signifie 0.1L de lessive par kg de linge"})]}),r.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto pr-1",children:e.map(b=>{const x=u(h.id,b.id),p=m(h.id,b.id);return r.jsxs("div",{className:`border rounded-lg p-2 flex items-center gap-2 ${x?"border-green-300 bg-green-50":"border-gray-200 hover:border-blue-200 hover:bg-blue-50"} transition-colors`,children:[r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"font-medium text-gray-900 text-xs leading-tight",children:b.name}),x&&r.jsx("div",{className:"text-green-600 flex-shrink-0",children:r.jsx(Jb,{className:"h-3.5 w-3.5"})})]}),r.jsxs("div",{className:"text-xs text-gray-500 mt-0.5",children:["Stock: ",b.quantity," ",b.unit]})]}),r.jsxs("div",{className:"flex items-center gap-1.5 flex-shrink-0",children:[r.jsx("input",{type:"number",step:"0.01",min:"0",value:x?p:.1,onChange:f=>{const w=parseFloat(f.target.value)||.1;w>0&&c(h.id,b.id,w)},className:"w-16 px-1.5 py-1 text-xs border border-gray-300 rounded focus:ring-1 focus:ring-blue-500 focus:border-blue-500",placeholder:"0.1"}),r.jsx("span",{className:"text-xs text-gray-500 w-8",children:b.unit}),!x&&r.jsx("button",{onClick:()=>c(h.id,b.id,.1),className:"px-2 py-1 bg-blue-600 text-white text-xs font-medium rounded hover:bg-blue-700 transition-colors whitespace-nowrap",children:"+ Ajouter"})]})]},b.id)})})]})]},h.id)})})]})},W1=({message:t,show:e,onHide:s,autoHide:n=!0,duration:a=3e3})=>{const[i,l]=v.useState(e);return v.useEffect(()=>{if(l(e),e&&n){const o=setTimeout(()=>{l(!1),setTimeout(s,300)},a);return()=>clearTimeout(o)}},[e,n,a,s]),!e&&!i?null:r.jsx("div",{className:`fixed top-4 right-4 z-50 transition-all duration-300 ${i?"translate-x-0 opacity-100":"translate-x-full opacity-0"}`,children:r.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg shadow-lg p-4 max-w-sm",children:r.jsxs("div",{className:"flex items-start space-x-3",children:[r.jsx(d0,{className:"h-5 w-5 text-green-500 mt-0.5 flex-shrink-0"}),r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:"text-sm font-medium text-green-800",children:"Configuration sauvegardée !"}),r.jsx("p",{className:"text-sm text-green-700 mt-1",children:t})]}),r.jsx("button",{onClick:()=>{l(!1),setTimeout(s,300)},className:"text-green-400 hover:text-green-600",children:r.jsx(u0,{className:"h-4 w-4"})})]})})})},V1=()=>{const{services:t,inventoryItems:e}=de(),s=jt(),[n,a]=v.useState(!1),i=o=>{ab(o),console.log("✅ Configuration sauvegardée:",o),a(!0)},l=()=>{lb(),a(!0),window.location.reload()};return r.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 via-blue-50 to-indigo-50 overflow-x-hidden",children:[r.jsx("div",{className:"bg-white shadow-sm border-b border-gray-200 w-full",children:r.jsx("div",{className:"max-w-7xl mx-auto px-3 sm:px-4 lg:px-6",children:r.jsxs("div",{className:"flex items-center justify-between h-16",children:[r.jsxs("button",{onClick:()=>s("/"),className:"inline-flex items-center text-gray-500 hover:text-gray-700 transition-colors duration-200",children:[r.jsx(Vb,{className:"h-5 w-5 mr-2"}),r.jsx("span",{className:"font-medium",children:"Tableau de bord"})]}),r.jsx("div",{className:"flex items-center space-x-3",children:r.jsxs("div",{className:"hidden sm:flex items-center space-x-2 text-sm text-gray-500",children:[r.jsx(Il,{className:"h-4 w-4"}),r.jsx("span",{children:"Configuration"})]})})]})})}),r.jsxs("div",{className:"w-full max-w-full mx-auto px-3 sm:px-4 lg:px-6 py-6 overflow-x-hidden",children:[r.jsxs("div",{className:"text-center mb-8",children:[r.jsx("div",{className:"inline-flex items-center justify-center w-12 h-12 bg-gradient-to-r from-blue-500 to-indigo-600 rounded-xl mb-4",children:r.jsx(Ku,{className:"h-6 w-6 text-white"})}),r.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-900 mb-3",children:"Services & Produits"}),r.jsx("p",{className:"text-sm sm:text-base text-gray-600 max-w-2xl mx-auto mb-6 px-2",children:"Configurez les liens entre services et produits pour un suivi automatique"}),r.jsxs("button",{onClick:l,className:"inline-flex items-center px-4 py-2 bg-gradient-to-r from-orange-500 to-red-500 text-white text-sm font-medium rounded-lg hover:from-orange-600 hover:to-red-600 transition-all duration-200 shadow-md",children:[r.jsx(c1,{className:"h-4 w-4 mr-2"}),"Charger les exemples"]})]}),r.jsx(W1,{message:"Les mappings ont été mis à jour avec succès",show:n,onHide:()=>a(!1)}),r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3 mb-8 w-full max-w-7xl mx-auto",children:[r.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-md border border-gray-100 w-full",children:[r.jsx("div",{className:"flex items-center justify-center mb-2",children:r.jsx("div",{className:"p-2 bg-gradient-to-r from-blue-500 to-blue-600 rounded-lg",children:r.jsx(Il,{className:"h-6 w-6 text-white"})})}),r.jsxs("div",{className:"text-center",children:[r.jsx("p",{className:"text-xs font-medium text-gray-500 uppercase mb-1",children:"Services"}),r.jsx("p",{className:"text-2xl font-bold text-gray-900 mb-2",children:t.length}),r.jsx("p",{className:"text-xs text-gray-600",children:"Disponibles"})]})]}),r.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-md border border-gray-100 w-full",children:[r.jsx("div",{className:"flex items-center justify-center mb-2",children:r.jsx("div",{className:"p-2 bg-gradient-to-r from-green-500 to-emerald-600 rounded-lg",children:r.jsx(Zb,{className:"h-6 w-6 text-white"})})}),r.jsxs("div",{className:"text-center",children:[r.jsx("p",{className:"text-xs font-medium text-gray-500 uppercase mb-1",children:"Produits"}),r.jsx("p",{className:"text-2xl font-bold text-gray-900 mb-2",children:e.length}),r.jsx("p",{className:"text-xs text-gray-600",children:"En stock"})]})]}),r.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-md border border-gray-100 w-full",children:[r.jsx("div",{className:"flex items-center justify-center mb-2",children:r.jsx("div",{className:"p-2 bg-gradient-to-r from-purple-500 to-indigo-600 rounded-lg",children:r.jsx(Ku,{className:"h-6 w-6 text-white"})})}),r.jsxs("div",{className:"text-center",children:[r.jsx("p",{className:"text-xs font-medium text-gray-500 uppercase mb-1",children:"Mappings"}),r.jsx("p",{className:"text-2xl font-bold text-gray-900 mb-2",children:"∞"}),r.jsx("p",{className:"text-xs text-gray-600",children:"Illimités"})]})]})]}),r.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 overflow-hidden mb-6 w-full max-w-7xl mx-auto",children:[r.jsxs("div",{className:"px-3 sm:px-4 py-3 bg-gradient-to-r from-gray-50 to-blue-50 border-b border-gray-200",children:[r.jsxs("h2",{className:"text-base sm:text-lg font-semibold text-gray-900 flex items-center",children:[r.jsx(Il,{className:"h-5 w-5 mr-2 text-blue-600"}),"Configuration des Services"]}),r.jsx("p",{className:"text-xs sm:text-sm text-gray-600 mt-1",children:"Définissez quels produits sont consommés pour chaque service"})]}),r.jsx("div",{className:"p-3 sm:p-4",children:r.jsx(B1,{services:t,inventoryItems:e,onUpdateMappings:i})})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-3 mb-6 w-full max-w-7xl mx-auto",children:[r.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-100 rounded-xl p-4 border border-blue-200 shadow-md",children:[r.jsxs("div",{className:"flex items-center mb-2",children:[r.jsx("div",{className:"p-2 bg-blue-500 rounded-lg",children:r.jsx(r1,{className:"h-5 w-5 text-white"})}),r.jsx("h3",{className:"text-sm font-semibold text-blue-900 ml-2",children:"Comment ça fonctionne"})]}),r.jsx("p",{className:"text-xs text-blue-800 leading-relaxed",children:"Configurez une fois les liens entre services et produits. Le système calculera automatiquement les consommations."})]}),r.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-emerald-100 rounded-xl p-4 border border-green-200 shadow-md",children:[r.jsxs("div",{className:"flex items-center mb-2",children:[r.jsx("div",{className:"p-2 bg-green-500 rounded-lg",children:r.jsx(Kb,{className:"h-5 w-5 text-white"})}),r.jsx("h3",{className:"text-sm font-semibold text-green-900 ml-2",children:"Avantages"})]}),r.jsx("p",{className:"text-xs text-green-800 leading-relaxed",children:"Suivi automatique des stocks, alertes intelligentes et calcul précis des coûts."})]})]})]})]})},H1=({pack:t,onSave:e,onCancel:s})=>{const{services:n,inventoryItems:a}=de(),[i,l]=v.useState((t==null?void 0:t.name)||""),[o,c]=v.useState((t==null?void 0:t.description)||""),[d,u]=v.useState((t==null?void 0:t.category)||"standard"),[m,h]=v.useState((t==null?void 0:t.totalPrice)||0),[y,g]=v.useState((t==null?void 0:t.estimatedTime)||0),[b,x]=v.useState((t==null?void 0:t.isActive)??!0),[p,f]=v.useState((t==null?void 0:t.services)||[]),[w,j]=v.useState((t==null?void 0:t.inventoryItems)||[]),_=[{value:"standard",label:"Standard"},{value:"express",label:"Express"},{value:"premium",label:"Premium"},{value:"literie",label:"Literie"},{value:"professionnel",label:"Professionnel"}],N=C=>{const B=n.find(P=>P.id===C);if(!B)return;if(p.find(P=>P.serviceId===C)){alert("Ce service est déjà ajouté au pack");return}f([...p,{serviceId:B.id,serviceName:B.name,quantity:1,unitPrice:B.price}])},k=C=>{f(p.filter(B=>B.serviceId!==C))},S=(C,B)=>{f(p.map(T=>T.serviceId===C?{...T,quantity:Math.max(1,B)}:T))},O=C=>{const B=a.find(P=>P.id===C);if(!B)return;if(w.find(P=>P.itemId===C)){alert("Ce produit est déjà ajouté au pack");return}j([...w,{itemId:B.id,itemName:B.name,quantityPerPack:1,unit:B.unit}])},L=C=>{j(w.filter(B=>B.itemId!==C))},E=(C,B)=>{j(w.map(T=>T.itemId===C?{...T,quantityPerPack:Math.max(.01,B)}:T))},W=C=>{if(C.preventDefault(),!i.trim()){alert("Le nom du pack est requis");return}if(p.length===0){alert("Ajoutez au moins un service au pack");return}e({name:i,description:o,category:d,services:p,inventoryItems:w,totalPrice:m,estimatedTime:y,isActive:b})};return r.jsx("div",{className:"p-4 sm:p-6",children:r.jsxs("div",{className:"bg-white rounded-xl shadow-lg max-w-5xl mx-auto",children:[r.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:t?"Modifier le pack":"Créer un nouveau pack"}),r.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Configurez les services et produits inclus dans ce pack"})]}),r.jsx("button",{onClick:s,className:"p-2 text-gray-400 hover:text-gray-600 rounded-lg hover:bg-gray-100",children:r.jsx(Us,{className:"h-6 w-6"})})]}),r.jsxs("form",{onSubmit:W,className:"p-6 space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"md:col-span-2",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nom du pack *"}),r.jsx("input",{type:"text",value:i,onChange:C=>l(C.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Ex: Pack Familial Standard",required:!0})]}),r.jsxs("div",{className:"md:col-span-2",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),r.jsx("textarea",{value:o,onChange:C=>c(C.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",rows:3,placeholder:"Décrivez ce pack..."})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Catégorie *"}),r.jsx("select",{value:d,onChange:C=>u(C.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0,children:_.map(C=>r.jsx("option",{value:C.value,children:C.label},C.value))})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[r.jsx(Fs,{className:"h-4 w-4 inline mr-1"}),"Prix total (€) *"]}),r.jsx("input",{type:"number",step:"0.01",min:"0",value:m,onChange:C=>h(parseFloat(C.target.value)||0),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[r.jsx(Pt,{className:"h-4 w-4 inline mr-1"}),"Durée estimée (heures) *"]}),r.jsx("input",{type:"number",step:"0.5",min:"0",value:y,onChange:C=>g(parseFloat(C.target.value)||0),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0})]}),r.jsx("div",{className:"flex items-center",children:r.jsxs("label",{className:"flex items-center cursor-pointer",children:[r.jsx("input",{type:"checkbox",checked:b,onChange:C=>x(C.target.checked),className:"w-5 h-5 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),r.jsx("span",{className:"ml-2 text-sm font-medium text-gray-700",children:"Pack actif (visible sur le portail client)"})]})})]}),r.jsxs("div",{className:"border-t border-gray-200 pt-6",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Services inclus"}),r.jsxs("div",{className:"mb-4",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Ajouter un service"}),r.jsx("div",{className:"flex gap-2",children:r.jsxs("select",{onChange:C=>{C.target.value&&(N(C.target.value),C.target.value="")},className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[r.jsx("option",{value:"",children:"Sélectionner un service..."}),n.filter(C=>!p.some(B=>B.serviceId===C.id)).map(C=>r.jsxs("option",{value:C.id,children:[C.name," - ",C.price,"€"]},C.id))]})})]}),r.jsxs("div",{className:"space-y-2",children:[p.map(C=>r.jsxs("div",{className:"flex items-center gap-3 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:[r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:"font-medium text-gray-900",children:C.serviceName}),r.jsxs("p",{className:"text-sm text-gray-600",children:[C.unitPrice,"€ / unité"]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("label",{className:"text-xs text-gray-600",children:"Quantité:"}),r.jsx("input",{type:"number",min:"1",value:C.quantity,onChange:B=>S(C.serviceId,parseInt(B.target.value)||1),className:"w-16 px-2 py-1 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),r.jsx("button",{type:"button",onClick:()=>k(C.serviceId),className:"p-2 text-red-600 hover:bg-red-100 rounded-lg transition-colors",children:r.jsx(gs,{className:"h-4 w-4"})})]},C.serviceId)),p.length===0&&r.jsx("div",{className:"text-center py-8 text-gray-500 bg-gray-50 rounded-lg border-2 border-dashed border-gray-300",children:"Aucun service ajouté. Sélectionnez un service ci-dessus."})]})]}),r.jsxs("div",{className:"border-t border-gray-200 pt-6",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Produits d'inventaire nécessaires"}),r.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Spécifiez les produits qui seront utilisés pour ce pack (optionnel)"}),r.jsxs("div",{className:"mb-4",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Ajouter un produit"}),r.jsx("div",{className:"flex gap-2",children:r.jsxs("select",{onChange:C=>{C.target.value&&(O(C.target.value),C.target.value="")},className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[r.jsx("option",{value:"",children:"Sélectionner un produit..."}),a.filter(C=>!w.some(B=>B.itemId===C.id)).map(C=>r.jsxs("option",{value:C.id,children:[C.name," (",C.unit,")"]},C.id))]})})]}),r.jsxs("div",{className:"space-y-2",children:[w.map(C=>r.jsxs("div",{className:"flex items-center gap-3 p-3 bg-green-50 border border-green-200 rounded-lg",children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("p",{className:"font-medium text-gray-900",children:["📦 ",C.itemName]}),r.jsxs("p",{className:"text-xs text-gray-600",children:["Unité: ",C.unit]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("label",{className:"text-xs text-gray-600",children:"Quantité/pack:"}),r.jsx("input",{type:"number",step:"0.01",min:"0.01",value:C.quantityPerPack,onChange:B=>E(C.itemId,parseFloat(B.target.value)||.01),className:"w-20 px-2 py-1 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),r.jsx("span",{className:"text-xs text-gray-600",children:C.unit})]}),r.jsx("button",{type:"button",onClick:()=>L(C.itemId),className:"p-2 text-red-600 hover:bg-red-100 rounded-lg transition-colors",children:r.jsx(gs,{className:"h-4 w-4"})})]},C.itemId)),w.length===0&&r.jsx("div",{className:"text-center py-6 text-gray-500 bg-gray-50 rounded-lg border-2 border-dashed border-gray-300",children:"Aucun produit ajouté. C'est optionnel."})]})]}),r.jsxs("div",{className:"flex justify-end gap-3 pt-6 border-t border-gray-200",children:[r.jsx("button",{type:"button",onClick:s,className:"px-6 py-2 text-gray-700 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"Annuler"}),r.jsxs("button",{type:"submit",className:"inline-flex items-center px-6 py-2 bg-gradient-to-r from-blue-600 to-blue-700 text-white font-medium rounded-lg hover:from-blue-700 hover:to-blue-800 transition-all shadow-lg hover:shadow-xl",children:[r.jsx(If,{className:"h-5 w-5 mr-2"}),t?"Enregistrer les modifications":"Créer le pack"]})]})]})]})})},K1=()=>{const{servicePacks:t,addServicePack:e,updateServicePack:s,deleteServicePack:n}=de(),[a,i]=v.useState(!1),[l,o]=v.useState(null),[c,d]=v.useState("all"),u=[{value:"all",label:"Tous",color:"gray"},{value:"standard",label:"Standard",color:"blue"},{value:"express",label:"Express",color:"orange"},{value:"premium",label:"Premium",color:"purple"},{value:"literie",label:"Literie",color:"green"},{value:"professionnel",label:"Professionnel",color:"indigo"}],m=c==="all"?t:t.filter(x=>x.category===c),h=x=>{s({...x,isActive:!x.isActive})},y=x=>{confirm("Êtes-vous sûr de vouloir supprimer ce pack ?")&&n(x)},g=x=>{l?(s({...x,id:l.id}),o(null)):(e(x),i(!1))},b=x=>{const p=u.find(f=>f.value===x);return(p==null?void 0:p.color)||"gray"};return a||l?r.jsx(H1,{pack:l||void 0,onSave:g,onCancel:()=>{i(!1),o(null)}}):r.jsxs("div",{className:"p-4 sm:p-6",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-4 mb-6",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-900 mb-2",children:"📦 Gestion des Packs"}),r.jsx("p",{className:"text-sm sm:text-base text-gray-600",children:"Créez et gérez vos offres de packs pour le portail client"})]}),r.jsxs("button",{onClick:()=>i(!0),className:"inline-flex items-center justify-center px-5 py-2.5 bg-gradient-to-r from-blue-600 to-blue-700 text-white font-medium rounded-xl hover:from-blue-700 hover:to-blue-800 transition-all duration-200 shadow-lg hover:shadow-xl transform hover:scale-105 whitespace-nowrap",children:[r.jsx(Cr,{className:"h-5 w-5 mr-2"}),"Créer un pack"]})]}),r.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-3 sm:gap-4 mb-6",children:[r.jsx("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 p-4 rounded-xl shadow-md border border-blue-200 w-full",children:r.jsxs("div",{className:"flex flex-col items-center text-center justify-center h-full min-h-[120px]",children:[r.jsx("div",{className:"p-3 bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl mb-3 shadow-md",children:r.jsx(Eo,{className:"h-6 w-6 text-white"})}),r.jsx("p",{className:"text-xs font-semibold text-blue-700 mb-1 uppercase tracking-wide",children:"Total Packs"}),r.jsx("p",{className:"text-2xl sm:text-3xl font-bold text-blue-900",children:t.length})]})}),r.jsx("div",{className:"bg-gradient-to-br from-green-50 to-green-100 p-4 rounded-xl shadow-md border border-green-200 w-full",children:r.jsxs("div",{className:"flex flex-col items-center text-center justify-center h-full min-h-[120px]",children:[r.jsx("div",{className:"p-3 bg-gradient-to-br from-green-500 to-green-600 rounded-xl mb-3 shadow-md",children:r.jsx(Dn,{className:"h-6 w-6 text-white"})}),r.jsx("p",{className:"text-xs font-semibold text-green-700 mb-1 uppercase tracking-wide",children:"Actifs"}),r.jsx("p",{className:"text-2xl sm:text-3xl font-bold text-green-900",children:t.filter(x=>x.isActive).length})]})}),r.jsx("div",{className:"bg-gradient-to-br from-amber-50 to-amber-100 p-4 rounded-xl shadow-md border border-amber-200 w-full",children:r.jsxs("div",{className:"flex flex-col items-center text-center justify-center h-full min-h-[120px]",children:[r.jsx("div",{className:"p-3 bg-gradient-to-br from-amber-500 to-amber-600 rounded-xl mb-3 shadow-md",children:r.jsx(wu,{className:"h-6 w-6 text-white"})}),r.jsx("p",{className:"text-xs font-semibold text-amber-700 mb-1 uppercase tracking-wide",children:"Inactifs"}),r.jsx("p",{className:"text-2xl sm:text-3xl font-bold text-amber-900",children:t.filter(x=>!x.isActive).length})]})}),r.jsx("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 p-4 rounded-xl shadow-md border border-purple-200 w-full",children:r.jsxs("div",{className:"flex flex-col items-center text-center justify-center h-full min-h-[120px]",children:[r.jsx("div",{className:"p-3 bg-gradient-to-br from-purple-500 to-purple-600 rounded-xl mb-3 shadow-md",children:r.jsx(Fs,{className:"h-6 w-6 text-white"})}),r.jsx("p",{className:"text-xs font-semibold text-purple-700 mb-1 uppercase tracking-wide",children:"Prix Moyen"}),r.jsxs("p",{className:"text-2xl sm:text-3xl font-bold text-purple-900",children:[t.length>0?Math.round(t.reduce((x,p)=>x+p.totalPrice,0)/t.length):0,"€"]})]})})]}),r.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 mb-6",children:r.jsx("div",{className:"flex flex-wrap gap-2",children:u.map(x=>r.jsx("button",{onClick:()=>d(x.value),className:`px-4 py-2 rounded-lg text-sm font-medium transition-all ${c===x.value?`bg-${x.color}-100 text-${x.color}-700 ring-2 ring-${x.color}-500`:"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:x.label},x.value))})}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4",children:m.map(x=>{const p=b(x.category);return r.jsxs("div",{className:`bg-white rounded-xl shadow-md hover:shadow-lg transition-all duration-300 overflow-hidden border-2 w-full ${x.isActive?`border-${p}-200`:"border-gray-200"}`,children:[r.jsxs("div",{className:`bg-gradient-to-r from-${p}-500 to-${p}-600 p-4 text-white`,children:[r.jsxs("div",{className:"flex items-start justify-between gap-2 mb-2",children:[r.jsx("h3",{className:"text-base sm:text-lg font-bold flex-1 min-w-0",children:x.name}),r.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-semibold whitespace-nowrap flex-shrink-0 ${x.isActive?"bg-white bg-opacity-30":"bg-red-500"}`,children:x.isActive?"✓ Actif":"✗ Inactif"})]}),r.jsx("p",{className:"text-xs sm:text-sm opacity-90",children:x.description})]}),r.jsxs("div",{className:"p-4",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4 pb-4 border-b",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Fs,{className:`h-5 w-5 text-${p}-600`}),r.jsxs("span",{className:"text-2xl font-bold text-gray-900",children:[x.totalPrice,"€"]})]}),r.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[r.jsx(Pt,{className:"h-4 w-4"}),r.jsxs("span",{className:"text-sm",children:[x.estimatedTime,"h"]})]})]}),r.jsxs("div",{className:"mb-3",children:[r.jsxs("h4",{className:"text-xs font-semibold text-gray-700 mb-2 uppercase tracking-wide",children:["Services inclus (",x.services.length,")"]}),r.jsxs("div",{className:"space-y-1",children:[x.services.slice(0,3).map((f,w)=>r.jsxs("div",{className:"flex items-center justify-between text-xs",children:[r.jsxs("span",{className:"text-gray-600",children:["• ",f.serviceName]}),r.jsxs("span",{className:"text-gray-500",children:["x",f.quantity]})]},w)),x.services.length>3&&r.jsxs("p",{className:"text-xs text-gray-500 italic",children:["+",x.services.length-3," autre(s)..."]})]})]}),x.inventoryItems&&x.inventoryItems.length>0&&r.jsxs("div",{className:"mb-3",children:[r.jsxs("h4",{className:"text-xs font-semibold text-gray-700 mb-2 uppercase tracking-wide",children:["Produits nécessaires (",x.inventoryItems.length,")"]}),r.jsxs("div",{className:"space-y-1",children:[x.inventoryItems.slice(0,3).map((f,w)=>r.jsxs("div",{className:"flex items-center justify-between text-xs",children:[r.jsxs("span",{className:"text-gray-600",children:["📦 ",f.itemName]}),r.jsxs("span",{className:"text-gray-500",children:[f.quantityPerPack," ",f.unit]})]},w)),x.inventoryItems.length>3&&r.jsxs("p",{className:"text-xs text-gray-500 italic",children:["+",x.inventoryItems.length-3," autre(s)..."]})]})]}),r.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 mt-4",children:[r.jsxs("button",{onClick:()=>o(x),className:"flex-1 px-3 py-2 bg-blue-100 text-blue-700 rounded-lg text-xs sm:text-sm font-medium hover:bg-blue-200 transition-colors",children:[r.jsx(Ev,{className:"h-4 w-4 inline mr-1"}),"Modifier"]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs("button",{onClick:()=>h(x),className:`flex-1 px-3 py-2 rounded-lg text-xs sm:text-sm font-medium transition-colors ${x.isActive?"bg-amber-100 text-amber-700 hover:bg-amber-200":"bg-green-100 text-green-700 hover:bg-green-200"}`,children:[x.isActive?r.jsx(wu,{className:"h-4 w-4 inline mr-1"}):r.jsx(Dn,{className:"h-4 w-4 inline mr-1"}),x.isActive?"Désactiver":"Activer"]}),r.jsx("button",{onClick:()=>y(x.id),className:"px-3 py-2 bg-red-100 text-red-700 rounded-lg text-xs sm:text-sm font-medium hover:bg-red-200 transition-colors",children:r.jsx(gs,{className:"h-4 w-4"})})]})]})]})]},x.id)})}),m.length===0&&r.jsxs("div",{className:"text-center py-12",children:[r.jsx(Eo,{className:"h-16 w-16 text-gray-400 mx-auto mb-4"}),r.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Aucun pack trouvé"}),r.jsx("p",{className:"text-gray-500 mb-4",children:c==="all"?"Commencez par créer votre premier pack":"Aucun pack dans cette catégorie"}),c==="all"&&r.jsxs("button",{onClick:()=>i(!0),className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[r.jsx(Cr,{className:"h-5 w-5 mr-2"}),"Créer un pack"]})]})]})},Q1=({message:t="Chargement de l'application..."})=>r.jsx("div",{className:"fixed inset-0 bg-white flex items-center justify-center z-50",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-2 border-blue-600 mx-auto"}),r.jsx("p",{className:"mt-4 text-gray-600",children:t})]})}),G1=()=>{const{activeView:t,setActiveView:e,loading:s,error:n}=js(),a=At();if(fn.useEffect(()=>{const l=a.pathname.split("/")[1]||"dashboard";l!==t&&e(l)},[a,t,e]),s)return r.jsx(Q1,{message:"Synchronisation avec la base de données..."});if(n)return r.jsx("div",{className:"fixed inset-0 bg-white flex items-center justify-center z-50",children:r.jsxs("div",{className:"text-center max-w-md mx-auto p-6",children:[r.jsx("div",{className:"text-red-600 mb-4",children:r.jsx("svg",{className:"w-16 h-16 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L4.082 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),r.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-2",children:"Erreur de connexion"}),r.jsx("p",{className:"text-gray-600 mb-4",children:n}),r.jsx("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Réessayer"})]})});const i=l=>r.jsx(yb,{children:l});return r.jsxs(Rg,{children:[r.jsx(fe,{path:"/",element:i(r.jsx(vu,{to:"/dashboard",replace:!0}))}),r.jsx(fe,{path:"/dashboard",element:i(r.jsx(Sb,{}))}),r.jsx(fe,{path:"/customers",element:i(r.jsx(Bb,{}))}),r.jsx(fe,{path:"/orders",element:i(r.jsx(Gu,{}))}),r.jsx(fe,{path:"/orders/:orderId",element:i(r.jsx(Gu,{}))}),r.jsx(fe,{path:"/inventory",element:i(r.jsx(b1,{}))}),r.jsx(fe,{path:"/employees",element:i(r.jsx(k1,{}))}),r.jsx(fe,{path:"/payments",element:i(r.jsx(_1,{}))}),r.jsx(fe,{path:"/invoices",element:i(r.jsx(I1,{}))}),r.jsx(fe,{path:"/reports",element:i(r.jsx(S1,{}))}),r.jsx(fe,{path:"/settings",element:i(r.jsx(C1,{}))}),r.jsx(fe,{path:"/simple-service-config",element:i(r.jsx(V1,{}))}),r.jsx(fe,{path:"/pack-management",element:i(r.jsx(K1,{}))}),r.jsx(fe,{path:"/monitoring",element:i(r.jsx(R1,{}))}),r.jsx(fe,{path:"/monitoring-demo",element:i(r.jsx(O1,{}))}),r.jsx(fe,{path:"/supabase-monitoring",element:i(r.jsx(q1,{}))}),r.jsx(fe,{path:"/client-login",element:r.jsx(P1,{})}),r.jsx(fe,{path:"/client-portal",element:r.jsx(A1,{})}),r.jsx(fe,{path:"/client-orders",element:r.jsx(L1,{})}),r.jsx(fe,{path:"/client-access",element:i(r.jsx(D1,{}))}),r.jsx(fe,{path:"*",element:i(r.jsx(vu,{to:"/dashboard",replace:!0}))})]})},J1=()=>r.jsx(pb,{children:r.jsx(G1,{})}),m0=document.getElementById("root");if(!m0)throw new Error("L'élément avec l'ID 'root' est introuvable dans le DOM.");const Y1=uf(m0);Y1.render(r.jsx(v.StrictMode,{children:r.jsx(nv,{children:r.jsx(J1,{})})}));
//# sourceMappingURL=index-OenLn_qA.js.map
